<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>JavaScript | LiSir</title><meta name="keywords" content="JS"><meta name="author" content="LiSir,zewei4703@gmail.com"><meta name="copyright" content="LiSir"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="JavaScript"><meta name="application-name" content="JavaScript"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="JavaScript"><meta property="og:url" content="http://example.com/2024/07/30/JavaScript/index.html"><meta property="og:site_name" content="LiSir"><meta property="og:description" content="JavaScriptJS引入方式 内部脚本：将JS代码定义在HTML页面中  JavaScript代码必须位于script标签内 在HTML文档中，可以再任意地方 ，放置任意数量的script 一般会把脚本置于body元素的底部，可以改善显示速度   外部脚本：将JS代码定义在外部JS文件中，然后引"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://example.com/img/default_cover.jpg"><meta property="article:author" content="LiSir"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://example.com/img/default_cover.jpg"><meta name="description" content="JavaScriptJS引入方式 内部脚本：将JS代码定义在HTML页面中  JavaScript代码必须位于script标签内 在HTML文档中，可以再任意地方 ，放置任意数量的script 一般会把脚本置于body元素的底部，可以改善显示速度   外部脚本：将JS代码定义在外部JS文件中，然后引"><link rel="shortcut icon" href="/img/touxiang.jpg"><link rel="canonical" href="http://example.com/2024/07/30/JavaScript/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: LiSir","link":"链接: ","source":"来源: LiSir","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'LiSir',
  title: 'JavaScript',
  postAI: '',
  pageFillDescription: 'JavaScript, JS引入方式, JS基础语法, 1、书写语法, 输出语句, 2、变量, 3、数据类型, 原始类型, 运算符, 流程控制, 冒泡排序, 3）JS函数, 1、函数的定义, 2、匿名函数, 4）JS对象, Array(数组对象), String对象, json对象, BOM对象, Window对象, Location对象, DOM对象, 5）JS事件监听, 事件绑定, 常见事件, 6）变量, 6.1、变量的赋值, 6.2、var和let的区别, 7）WebAPIS, 7.1、webAPI基本认识, 7.1.1、作用和分类, 7.1.2、什么是DOM, 7.1.3、DOM树, 7.1.4、DOM对象, 7.2、获取DOM对象, 7.2.1、根据CSS选择器来获取DOM元素, 7.2.2、其他获取DOM元素的方法, 7.3、操作元素内容, 7.3.2、对象.innerHtml属性, 7.3.3、getElementById 方法, 7.4、JavaScript 验证 API, 约束验证 DOM 方法, 约束验证 DOM 属性, 有效性属性, 7.5、Web History API, History back() 方法, History go() 方法, History 对象属性, History 对象方法, 7.6、Web Storage API, localStorage 对象, sessionStorage 对象, Storage 对象属性和方法, Web Storage API 相关页面, 7.7、Web Worker API, 创建 Web Worker 文件, 创建 Web Worker 对象, 终止 Web Worker, 重用 Web Worker, Web Worker 和 DOM, 7.8、JavaScript Fetch API, Fetch API 实例, 7.9、Web Geolocation API, 使用 Geolocation API, 处理错误和拒绝, getCurrentPosition() 方法 - 返回数据, JS ASYNC, JavaScript 回调, 函数序列, 实例1, 实例2, 顺序控制, JavaScript 回调, 实例, 异步的 JavaScript, 等待超时, 实例1, 实例2, 等待间隔, 实例, 等待文件, JavaScript Promise, JavaScript Promise 对象, Promise 语法, Promise 对象属性, 如何使用 Promise, 实例, JavaScript Promise 实例, 等待超时, 等待文件, 浏览器支持, JavaScript Async, Async 语法, 实例1, 实例2, Await 语法, 基础语法, 实例1, 等待超时, 等待文件, Ajax, Ajax实例, 什么是 AJAX？, AJAX 如何工作, AJAX - XMLHttpRequest 对象, XMLHttpRequest 对象是 AJAX 的基石。, XMLHttpRequest 对象, 创建 XMLHttpRequest 对象, 定义回调函数, 发送请求, 实例, XMLHttpRequest 对象方法, XMLHttpRequest 对象属性, onload 属性, 实例, 多个回调函数, 实例, onreadystatechange 属性, 实例, XMLHttpRequest 对象用于同服务器交换数据。, 向服务器发送请求, GET 还是 POST？, GET 请求, 实例1, 实例2, 实例3, POST 请求, 实例1, 实例2, url - 服务器上的文件, 异步 - true 还是 false？, onreadystatechange 属性, 实例, 同步请求, 实例, AJAX - 服务器响应, onreadystatechange 属性, 实例, 服务器响应属性, responseText 属性, 实例, responseXML 属性, 实例, 服务器响应方法, getAllResponseHeaders() 方法, 实例, getResponseHeader() 方法, 实例, AJAX 可用于同 XML 文件进行交互式通信。, XML 应用程序, 在 HTML div 元素中显示第一首曲子, 在曲目之间导航, Axios引入方式内部脚本将代码定义在页面中代码必须位于标签内在文档中可以再任意地方放置任意数量的一般会把脚本置于元素的底部可以改善显示速度外部脚本将代码定义在外部文件中然后引入到页面中外部文件中只包含代码不包含标签标签不能够自闭合也就是不可以写成基础语法书写语法区分大小写与一样变量名函数名以及其他一切东西都是区分大小写的每行结尾的分号可有可无注释单行注释注释内容多行注释注释内容大括号代表代码块判断输出语句使用写入警告框使用写入输出使用写入浏览器控制台变量中用关键字的缩写来声明变量的特点作用域比较大全局变量可以重复定义同一个变量相当于一个覆盖是一门弱类型语言变量可以存放不同类型的值张三定义的值是字符串张三把值赋值给输出变量名需要遵循如下规则组成字符可以是任何字母数字下划线或美元符号数字不能开头建议使用驼峰命名如关键字来定义变量它的用法类似于但是所声明的变量只在关键字所在的代码块内有效且不允许重复声明关键字用来声明一个只读的常量一旦声明常量的值就不能改变数据类型中分为原始类型和引用类型原始类型运算符算术运算符赋值运算符比较运算符与会进行类型转换不会进行类型转换逻辑运算符三元运算符条件表达式类型转换字符串类型转为数字方法这个方法能够将字符串转为数字原理是从字符串左边开始读取读取到不是数字的地方如他会读取到这个为止而停下来停下来取该位置前面的输出转为转为转为其他类型转为类型和转为其他均转为类型空字符串转为其他均转为类型和类型均转为隐式转换检测数据类型检测的名字流程控制值得注意的是在中这些流程控制语句和我们的是完全一致的和冒泡排序函数函数的定义参数参数要执行的代码另一种方式调用参数参数要执行的代码注意形式参数不需要类型因为是弱类型语言返回值类型也不需要定义可以再函数内部直接使用返回即可调用函数名称实际参数列表匿名函数函数分为函数表达式函数表达式函数表达式和具名函数有名函数有什么不同呢具名函数的调用可以写到任何位置匿名函数的函数表达式形式写法必须先声明在使用否则会报错未声明立即执行函数立即执行函数第二种写法上面结构中第二个小括号是实参中的小括号传递的是形参中写入要执行的逻辑注意多个立即执行函数要在函数末尾用分号隔开对象定义对象名数组对象定义变量名元素列表或者变量名元素列表定义数组或者访问元素特点长度可变类型可变数组的遍历遍历所有的元素数组的遍历遍历数组中有值的元素箭头函数形参列表函数体的内容方法添加元素到数组末尾添加测试添加测试删除元素方法从某个索引位置开始删除删除元素的个数对象对象方式一方式二对象的属性和方法对象方式一方式二获取字符串长度方法返回指定位置的字符方法查询对应字符的索引方法去除空格方法截取字符串前闭后开输入两个值开始索引和结束索引这里演示截取去除空格后的字符串将截取出来对象概念对象标记法是通过对象标记法书写的文本由于其语法简单层次结构鲜明现多用于作为数据载体在网络中进行数据传输数据格式男性定义案例定义小李北京字符串转为对象方法对象转为字符串方法对象概念浏览器对象模型允许与浏览器对话将浏览器的各个组成部分封装为对象对象介绍浏览器窗口对象获取直接使用其中可以省略和效果一样属性对对象的只读引用请参阅对象用于窗口或框架的对象请参阅对象对对象的只读引用请参阅对象方法显示带有一段消息和一个确认按钮的警告框显示带有一段消息以及确认按钮和取消按钮的对话按照指定的周期以毫秒计来调用函数或计算表达式在指定的毫秒数后调用函数或计算表达式示例代码获取方法对话框确认取消您确认删除该记录吗定时器周期性的执行某一个函数定时器执行了次定时器延迟指定时间执行一次对象介绍地址栏对象获取使用获取其中可以省略不写属性设置或返回完整的如果设置那么他会自动跳转所设置的代码示例获取当前完整的设置自动跳转对象概念文档对象模型将标记语言的各个组成部分封装为对应的对象整个文档对象元素对象属性对象文本对象注释对象通过就能够对进行如下操作改变元素的内容改变元素的样式对事件作出反应添加和删除元素事件监听事件事件是发生在元素上的事情比如按钮被点击鼠标移动到元素上按下键盘按键事件监听可以在事件被侦测到时执行代码事件绑定方式一通过标签中的时间属性进行绑定按钮我被点击了方式二通过元素属性绑定按钮我被点击了常见事件变量语法变量名变量的赋值语法变量要赋的值或者弹出输入框请输入姓名请输入姓名和的区别在较旧的使用关键字来声明变量而不是现在开发中一般不再使用它只是我们可能再老版程序中看到它为了解决的一些问题声明可以先使用在声明不合理声明过的变量可以重复声明不合理比如变量提升全局变量没有块级作用域等等变量声明基本认识作用和分类作用就是使用去操作和浏览器分类文档对象模型浏览器对象模型什么是指的是应用程序编程接口是的应用程序编程接口浏览器可以扩展浏览器的功能服务器可以扩展服务器的功能什么是文档对象模型是用来呈现以及与任意或文档交互的白话文是浏览器提供的一套专门用来操作网页内容的功能树树是什么将文档以树状结构直观的表现出来我们称之为文档树或树描述网页内容关系的名词作用文档树直观的体现了标签与标签之间的关系对象对象浏览器根据标签生成的对象所有的标签属性都可以在这个对象上面找到修改这个对象的属性会自动映射到标签身上核心思想把网页内容当做对象来处理对象是里提供的一个对象所以它提供的属性和方法都是用来访问和操作网页内容的例网页所有内容都在里面获取对象根据选择器来获取元素选择匹配的第一个元素语法选择器获取匹配的第一个元素通过标签元素和类名来进行选择参数包含一个或多个有效的选择器字符串返回值选择器匹配的第一个元素一个对象选择多个元素语法返回值返回一个数组得到的是一个伪数组有长度有索引号的数组但是没有等数组方法想要得到里面的每一个对象则需要遍历的方式获得其他获取元素的方法操作元素内容对象属性获取元素内容最简单的方法是使用属性属性可用于获取或替换元素的内容属性可用于获取或改变任何元素包括和下面的例子改变了的元素的内容在上面的例子中是方法而是属性方法访问元素最常用的方法是使用元素的在上面的例子中方法使用来查找元素验证约束验证方法属性描述如果元素包含有效数据则返回设置元素的属性方法约束验证属性属性描述包含与输入元素有效性相关的布尔属性包含当有效性为时浏览器将显示的消息指示是否将验证元素有效性属性元素的有效性属性包含许多与数据有效性相关的属性属性描述如果设置了自定义有效性消息则设置为如果元素的值与其属性不匹配则设置为如果元素的值大于其属性则设置为如果元素的值小于其属性则设置为如果元素的值对其属性无效则设置为如果元素的值超过其属性则设置为如果元素的值对其属性无效则设置为如果元素具有属性没有值则设置为如果元素的值有效则设置为属性如果输入字段中的数字大于元素的属性则显示一条消息验证请输入一个数字然后单击确定确定如果数字大于输入的属性则会显示错误消息输入没问题属性如果输入字段中的数字小于元素的属性则显示一条消息验证请输入一个数字然后单击确定确定如果数字小于输入的属性则会显示错误消息输入没问题提供了访问对象的简单方法对象包含用户访问过的网站所有浏览器都支持方法方法加载列表中的前一个这与单击浏览器中的后退箭头相同后退方法方法从历史列表中加载一个特定的后退两页对象属性属性描述返回历史列表中的数量对象获取浏览器历史列表长度浏览器列表长度是对象方法方法描述加载历史列表中的上一个加载历史列表中的下一个从历史列表中加载特定的是一种用于在浏览器中存储和检索数据的简单语法他非常容易使用实例对象对象提供对特定网站的本地存储的访问它允许您存储读取添加修改和删除该域的数据项存储的数据没有到期日期并且在浏览器关闭时不会被删除这些数据将在几天几周和几年内均可用方法方法将数据项存储在中它接受一个名称和一个值作为参数实例对象对象与对象相同不同之处在于对象存储会话的数据当浏览器关闭时数据会被删除实例方法方法将数据项存储在存储中它接受一个名称和一个值作为参数实例方法方法从存储中检索数据项它接受一个名称作为参数实例对象属性和方法属性方法描述返回存储中第个键的名称返回存储在对象中的数据项数返回指定的键名的值将键添加到存储中或者如果键已经存在则更新该键的值从存储中删除该键清空所有键相关页面属性描述允许在浏览器中保存键值对存储没有到期日期的数据允许在浏览器中保存键值对存储一个会话的数据是在后台运行的不会影响页面的性能什么是在页面中执行脚本时页面在脚本完成之前是无响应的是在后台运行的独立于其他脚本不会影响页面的性能你可以继续做任何你想做的事情点击选取内容等同时在后台运行开始停止创建文件现在让我们在外部中创建我们的在这里我们创建了一个重要的脚本该脚本存储在文件中上面代码的重要部分是方法用于将消息发送回页面注释通常不用于这种简单的脚本而是用于密集型任务创建对象现在我们有了文件我们需要从页面调用它以下代码行检查是否已存在如果不存在它会创建一个新的对象并运行中的代码引入你的的路径若是放在同级目录下直接使用文件名称即可然后我们可以发送和接收来自的消息向添加一个事件侦听器当发布消息时将执行事件侦听器中的代码来自的数据存储在中终止当对象被创建时它会继续监听消息即使在外部脚本完成之后直到它被终止如需终止并释放浏览器计算机资源请使用方法重用如果将变量设置为则在它终止后您可以重用以下代码和由于位于外部文件中因此他们无法访问以下对象对象对象对象接口允许浏览器向服务器发出请求不再需要实例下面的例子获取文件并显示内由于基于和因此上面的例子这么写可能更容易理解获取文件以更改此文本用于获取用户的地理位置由于这可能会损害隐私除非用户批准否则位置不可用注释地理定位对于带有的设备如智能手机最为准确所有浏览器都支持支持支持支持支持支持注释从开始将仅适用于安全上下文例如如果您的站点托管在非安全源例如上则获取用户位置的请求将不再起作用使用方法用于返回用户的位置请单击按钮以获取您的坐标试一试例子解释检查是否支持如果支持请运行方法如果没有则向用户显示一条消息如果方法成功则返回一个对象给参数中规定的函数函数输出纬度和经度上面的例子是一个非常基本的地理定位脚本没有错误处理处理错误和拒绝方法的第二个参数用于处理错误如果无法获取用户的位置它规定要运行的函数单击按钮以获取您的坐标试一试方法返回数据方法在成功时返回一个对象会始终返回纬度经度和精度属性如果可用则返回其他属性属性返回以十进制数表示的纬度始终返回以十进制数表示的经度始终返回位置精度始终返回平均海平面以上的高度以米计如果可用则返回位置的高度精度如果可用则返回从北顺时针方向的航向如果可用则返回以米秒计的速度如果可用则返回响应的日期时间如果可用则返回回调回调是作为参数传递给另一个函数的函数这种技术允许函数调用另一个函数回调函数可以在另一个函数完成后运行函数序列函数按照它们被调用的顺序执行而不是以它们被定义的顺序此例最终将显示实例实例顺序控制有时您希望更好地控制何时执行函数假设您要进行计算然后显示结果您可以调用计算器函数保存结果然后调用另一个函数来显示结果回调回调是作为参数传递给另一个函数的函数使用回调您可以通过回调调用计算器函数并在计算完成后让计算器函数运行回调实例在上面的例子中是函数的名称它作为参数传递给当您将函数作为参数传递时请记住不要使用括号正确错误异步的在上面的例子中是函数的名称它作为参数传递给在现实世界中回调最常与异步函数一起使用一个典型的例子是等待超时在使用函数时可以指定超时时执行的回调函数实例在上面的示例中被用作回调函数函数名作为参数传递给是超时前的毫秒数所以秒后会调用当您将函数作为参数传递时请记住不要使用括号正确错误若不将函数的名称作为参数传递给另一个函数您始终可以传递整个函数实例等待间隔在使用函数时可以指定每个间隔执行的回调函数实例在上面的例子中用作回调函数函数名作为参数传递给是间隔之间的毫秒数因此将每秒调用一次等待文件如果您创建函数来加载外部资源如脚本或文件则在内容完全加载之前无法使用这些内容这是使用回调的最佳时机此例加载一个文件并在文件完全加载后在网页中显示该文件指的是在加载完成时要执行的动作在上面的示例中用作回调函数函数名作为参数传递给以下是的副本生产代码是需要一些时间的代码消费代码是必须等待结果的代码是一个对象它链接生成代码和消费代码对象对象包含生产代码和对消费代码的调用语法可能需要一些时间成功时出错时必须等待一个兑现的承诺成功时的代码出错时的代码当执行代码获得结果时它应该调用两个回调之一结果调用成功出错对象属性对象支持两个属性状态和当对象工作时结果是当对象时结果是一个值当一个对象是时结果是一个错误对象结果值对象您无法访问属性和您必须使用方法来处理如何使用以下是使用的方法代码成功时代码出错时有两个参数一个是成功时的回调另一个是失败时的回调两者都是可选的因此您可以为成功或失败添加回调实例生成代码这可能需要一些时间实例为了演示的使用我们将使用上一章中的回调实例等待超时使用回调的例子等待秒毫秒让此页面发生变化渲染页面秒后将会调用函数该函数负责将输出到为的标签中使用的例子等待秒毫秒让此页面发生变化在这里使用了我们的等待文件使用回调的例子回调使用的例子在这里使用了浏览器支持也称为引入了对象下表注明了首个完全支持对象的浏览器版本年月年月年月年月年月使函数返回使函数等待语法函数前的关键字使函数返回实例等同于以下是使用的方法成功时的代码出错时的代码实例使函数返回在这里调用返回时的动作成功的回调失败的回调语法函数前的关键字使函数等待关键字只能在函数中使用基础语法实例让我们慢慢来学习如何使用它使函数返回对象等待对象等待超时请等待秒毫秒让此页面发生变化定义了一个名为的异步函数关键字表明该函数内部包含异步操作并且该函数会返回一个对象在这个异步函数内部首先创建了一个新的对象这个对象接受一个函数作为参数该函数有两个参数和它们是用于解决或拒绝的回调函数在构造函数中使用了模拟了一个异步操作即在秒毫秒后执行这意味着在秒后会被标记为已解决并传递字符串作为结果接下来这一行代码是关键这里使用了关键字来等待的结果只能在函数内部使用它会使代码暂停执行直到等待的完成或在这个例子中它会等待秒直到被解决然后将解决的值即赋给元素的从而改变页面内容等待文件概念异步的和作用是开发者的梦想因为您能够不刷新页面更新网页在页面加载后从服务器请求数据在页面加载后从服务器接收数据在后台向服务器发送数据数据交换通过可以给服务器发送请求并获取服务器响应的数据异步交互可以在不重新加载整个页面的情况下与服务器交换数据并更新部分网页的技术如搜索联想用户名是否可用的校验等等实例设置文档编码适应移动设备实例注意应为而非以匹配中的单击按钮让改变这段文本更改文本定义一个函数用于通过请求更改文本内容创建一个新的对象设置请求完成后的回调函数当请求完成且状态为成功时执行以下代码使用响应文本替换页面中为的元素的内容注是在使用对象进行请求时的一个属性这个属性包含了从服务器返回的响应文本内容初始化请求设置请求类型及异步标志表示异步发送请求什么是并非编程语言仅仅组合了浏览器内建的对象从服务器请求数据和显示或使用数据是一个令人误导的名称应用程序可能使用来传输数据但将数据作为纯文本或文本传输也同样常见允许通过与场景后面的服务器交换数据来异步更新网页这意味着可以更新网页的部分而不需要重新加载整个页面如何工作网页中发生一个事件页面加载按钮点击由创建对象对象向服务器发送请求服务器处理该请求服务器将响应发送回网页由读取响应由执行正确的动作比如更新页面对象对象是的基石创建对象定义回调函数打开对象向服务器发送请求对象所有现代浏览器都支持对象对象可用于在后台与服务器交换数据这意味着可以更新网页的部分内容而无需重新加载整个页面创建对象所有现代浏览器都有内置的对象创建对象的语法定义回调函数回调函数是作为参数传递给另一个函数的函数在这种情况下回调函数应包含响应准备就绪时要执行的代码当响应准备就绪时要做什么发送请求如需向服务器发送请求您可以使用对象的和方法实例创建对象定义回调函数您可以在这里使用数据发送请求对象方法方法描述创建新的对象取消当前请求返回头部信息返回特定的头部信息规定请求请求类型或文件位置异步或同步可选的用户名可选的密码向服务器发送请求用于请求向服务器发送请求用于请求将标签值对添加到要发送的标头对象属性属性描述定义接收到加载请求时要调用的函数定义当属性发生变化时调用的函数保存的状态请求未初始化服务器连接已建立请求已收到正在处理请求请求已完成且响应已就绪以字符串形式返回响应数据以数据返回响应数据返回请求的状态号如需完整列表请访问消息参考手册返回状态文本比如或属性使用对象时您可以定义一个回调函数以便在请求收到答复时执行请在对象的属性中定义该函数实例多个回调函数如果网站中有多个任务则应创建一个执行对象的函数并为每个任务创建一个回调函数函数调用应包含以及响应准备就绪时要调用的函数实例这里是动作这里是动作顺带一提上面的指的是什么呢其实就是如下图所示是一个对象属性属性保存的状态属性定义了一个回调函数当改变时执行该函数属性和属性保存对象的状态属性描述定义当属性改变时调用的函数保存的状态请求未初始化服务器连接已建立请求已收到正在处理请求请求已完成且响应已就绪返回请求的状态号如需完整列表请访问消息参考手册返回状态文本比如或每次改变时都会调用函数当为且为时响应就绪实例事件被触发了四次每次变化一次对象用于同服务器交换数据向服务器发送请求如需向服务器发送请求我们使用对象的和方法方法描述规定请求的类型请求的类型还是服务器文件位置异步或同步向服务器发送请求用于向服务器发送请求用于还是比更简单更快可用于大多数情况下不过请在以下情况始终使用缓存文件不是选项更新服务器上的文件或数据库向服务器发送大量数据无大小限制发送用户输入可包含未知字符比更强大更安全请求一条简单的请求实例在上面的例子中您可能会获得一个缓存的结果为了避免此情况请向添加一个唯一的实例如果您需要用方法来发送信息请向添加这些信息实例携带形式的参数请求一条简单的请求实例如需像表单那样数据请通过添加一个头部请在方法中规定您需要发送的数据实例方法描述向请求添加头部规定头部名称规定头部值服务器上的文件方法的参数是服务器上文件的地址该文件可以是任何类型的文件如和或服务器脚本文件如和它们可以在发送回响应之前在服务器执行操作异步还是如需异步发送请求方法的参数必须设置为发送异步请求对开发人员来说是一个巨大的进步服务器上执行的许多任务都非常耗时在之前此操作可能会导致应用程序挂起或停止通过异步发送不必等待服务器响应而是可以在等待服务器响应时执行其他脚本当响应就绪时处理响应属性通过对象您可以定义当请求接收到应答时所执行的函数这个函数是在对象的属性中定义的实例同步请求如需执行同步的请求请把方法中的第三个参数设置为有时用于快速测试你也会在更老的代码中看到同步请求由于代码将等待服务器完成所以不需要函数实例我们不推荐同步的因为将停止执行直到服务器响应就绪如果服务器繁忙或缓慢应用程序将挂起或停止同步正在从标准中移除但是这个过程可能需要很多年现代开发工具被鼓励对使用同步请求做出警告并且当这种情况发生时可能会抛出异常同步和异步服务器响应属性属性存留的状态属性定义当发生变化时执行的函数属性和属性存有对象的状态属性描述定义了当属性发生改变时所调用的函数保存了的状态请求未初始化服务器连接已建立请求已接收正在处理请求请求已完成且响应已就绪如需完整列表请访问消息参考手册返回状态文本例如或每当发生变化时就会调用函数当为为时响应就绪对象更改内容注释被触发五次每次都发生变化回调函数是一种作为参数被传递到另一个函数的函数如果您的网站中有多个任务那么您应该创建一个执行对象的函数以及一个供每个任务的回调函数该函数应当包含以及当响应就绪时调用的函数实例行动在这里行动在这里服务器响应属性属性描述获取字符串形式的响应数据获取数据形式的响应数据属性属性以字符串的形式返回服务器响应因此您可以这样使用它实例属性对象有一个內建的解析器属性以对象返回服务器响应使用此属性您可以把响应解析为对象实例对象服务器响应方法方法描述从服务器返回特定的头部信息从服务器返回所有头部信息方法方法返回所有来自服务器响应的头部信息实例方法方法返回来自服务器响应的特定头部信息实例可用于同文件进行交互式通信实例获取调用响应准备就绪时的函数调用回调函数艺术家曲目通过拼接字符串来完成表结构的构建应用程序本章演示使用以及的应用程序在元素中显示第一首曲子本例使用一个函数在的元素中显示第一首歌曲在曲目之间导航如需在上例中的曲目间导航请添加和函数下一首歌曲上一首歌曲下一首除非到达最后一首停下由于当时比如一共首歌当时即是最后一首这时故不再执行并且到达了最后一首歌的位置当时也就是位于第一首歌的位置时上一首是不管事的只能下一首基础语法请求方式请求地址请求参数求情用请求用回调函数',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-30 17:51:09',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/touxiang.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://newerproduct.github.io/" title="我的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" alt="我的博客"/><span class="back-menu-item-text">我的博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="鱼图床"/><span class="back-menu-item-text">鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">LiSir</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Docker%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">Docker学习<sup>1</sup></a><a href="/tags/HTML-CSS/" style="font-size: 1.05rem;">HTML,CSS<sup>1</sup></a><a href="/tags/JS/" style="font-size: 1.05rem;">JS<sup>1</sup></a><a href="/tags/JavaWeb/" style="font-size: 1.05rem;">JavaWeb<sup>1</sup></a><a href="/tags/Java%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">Java学习<sup>1</sup></a><a href="/tags/Linux-Error/" style="font-size: 1.05rem;">Linux Error<sup>1</sup></a><a href="/tags/SpringBoot%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">SpringBoot学习<sup>1</sup></a><a href="/tags/git%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">git学习<sup>1</sup></a><a href="/tags/jQuery/" style="font-size: 1.05rem;">jQuery<sup>1</sup></a><a href="/tags/java%E5%92%8Cvue%E5%BC%80%E5%8F%91%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%94%99%E8%AF%AF%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E6%94%B9%E6%AD%A3%E5%92%8C%E5%AF%B9%E4%BB%96%E4%BB%AC%E7%9A%84%E7%90%86%E8%A7%A3%E6%95%B4%E7%90%86-%E5%8F%82%E5%8A%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/" style="font-size: 1.05rem;">java和vue开发中遇到的错误以及如何改正和对他们的理解整理(参加的项目)<sup>1</sup></a><a href="/tags/js-node-js/" style="font-size: 1.05rem;">js-node.js<sup>1</sup></a><a href="/tags/jwt-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-cookie/" style="font-size: 1.05rem;">jwt,身份认证,cookie<sup>1</sup></a><a href="/tags/nginx%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">nginx学习<sup>1</sup></a><a href="/tags/npm-yarn/" style="font-size: 1.05rem;">npm,yarn<sup>1</sup></a><a href="/tags/uni-app%E6%A1%86%E6%9E%B6/" style="font-size: 1.05rem;">uni-app框架<sup>1</sup></a><a href="/tags/vue-js/" style="font-size: 1.05rem;">vue.js<sup>1</sup></a><a href="/tags/vue-js%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">vue.js前置知识<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF-web-%E6%A1%86%E6%9E%B6/" style="font-size: 1.05rem;">前端,web,框架<sup>1</sup></a><a href="/tags/%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%EF%BC%8C%E6%A8%A1%E5%9D%97/" style="font-size: 1.05rem;">打包工具，模块<sup>1</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-vue2-js/" style="font-size: 1.05rem;">状态管理工具(vue2.js)<sup>1</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-vue3-js/" style="font-size: 1.05rem;">状态管理工具(vue3.js)<sup>1</sup></a><a href="/tags/%E7%BB%83%E4%B9%A0%E9%A2%98%EF%BC%8C%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 1.05rem;">练习题，面试题<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url">前端开发</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/JS/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JS</span></a></span></div></div><h1 class="post-title" itemprop="name headline">JavaScript</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-07-30T09:46:48.000Z" title="发表于 2024-07-30 17:46:48">2024-07-30</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-07-30T09:51:09.621Z" title="更新于 2024-07-30 17:51:09">2024-07-30</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为张家口"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>张家口</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/default_cover.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/07/30/JavaScript/"><header><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url">前端开发</a><a href="/tags/JS/" tabindex="-1" itemprop="url">JS</a><h1 id="CrawlerTitle" itemprop="name headline">JavaScript</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">LiSir</span><time itemprop="dateCreated datePublished" datetime="2024-07-30T09:46:48.000Z" title="发表于 2024-07-30 17:46:48">2024-07-30</time><time itemprop="dateCreated datePublished" datetime="2024-07-30T09:51:09.621Z" title="更新于 2024-07-30 17:51:09">2024-07-30</time></header><h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="JS引入方式"><a href="#JS引入方式" class="headerlink" title="JS引入方式"></a>JS引入方式</h2><ul>
<li><p>内部脚本：将JS代码定义在HTML页面中</p>
<ul>
<li>JavaScript代码必须位于script标签内</li>
<li>在HTML文档中，可以再任意地方 ，放置任意数量的script</li>
<li>一般会把脚本置于body元素的底部，可以改善显示速度</li>
</ul>
</li>
<li><p>外部脚本：将JS代码定义在外部JS文件中，然后引入到HTML页面中</p>
<ul>
<li><p>外部JS文件中，只包含JS代码，不包含script标签</p>
</li>
<li><p>script标签不能够自闭合，也就是不可以写成</p>
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240503145115827.png" alt="image-20240503145115827"></p>
<h2 id="JS基础语法"><a href="#JS基础语法" class="headerlink" title="JS基础语法"></a>JS基础语法</h2><h3 id="1、书写语法"><a href="#1、书写语法" class="headerlink" title="1、书写语法"></a>1、书写语法</h3><ul>
<li><p>区分大小写：与java一样，变量名、函数名以及其他一切东西都是区分大小写的</p>
</li>
<li><p>每行结尾的分号可有可无</p>
</li>
<li><p>注释：</p>
<ul>
<li>单行注释：&#x2F;&#x2F;注释内容</li>
<li>多行注释：&#x2F;<em>注释内容</em> *&#x2F;</li>
</ul>
</li>
<li><p>大括号代表代码块：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断</span></span><br><span class="line"><span class="keyword">if</span>(count == <span class="number">3</span>)&#123;</span><br><span class="line"><span class="title function_">alert</span>(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="输出语句"><a href="#输出语句" class="headerlink" title="输出语句"></a>输出语句</h5><pre><code>* 使用**window.alert()**写入警告框
* 使用**document.write()**写入HTML输出
* 使用**console.log()**写入浏览器控制台
</code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240503151224544.png" alt="image-20240503151224544"></p>
<h4 id="2、变量"><a href="#2、变量" class="headerlink" title="2、变量"></a>2、变量</h4><ul>
<li><p><strong>JavaScript</strong> 中用 <strong>var</strong>关键字(<strong>variable</strong> 的缩写)来声明变量。</p>
<p><strong>var</strong>的特点：</p>
<ul>
<li>作用域比较大，全局变量。</li>
<li>可以重复定义同一个变量。相当于一个覆盖</li>
</ul>
</li>
<li><p><strong>JavaScript</strong> 是一门弱类型语言，变量<strong>可以存放不同类型的值</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;张三&quot;</span>;<span class="comment">//定义a的值是字符串张三</span></span><br><span class="line">a = <span class="number">20</span><span class="comment">//把值20赋值给a</span></span><br><span class="line"><span class="title function_">alert</span>(a)<span class="comment">//输出20</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>变量名需要遵循如下规则:</p>
<ul>
<li>组成字符可以是任何字母、数字、下划线(_)或美元符号($)</li>
<li>数字不能开头</li>
<li>建议使用驼峰命名(如<strong>userName</strong>)</li>
</ul>
</li>
<li><p><strong>let</strong> 关键字来定义变量。它的用法类似于 var，但是所声明的变量，只在let 关键字所在的代码块内有效，且不允许重复声明。</p>
</li>
<li><p><strong>const</strong> 关键字，用来声明一个只读的常量。一旦声明，常量的值就不能改变。</p>
</li>
</ul>
<h4 id="3、数据类型"><a href="#3、数据类型" class="headerlink" title="3、数据类型"></a>3、数据类型</h4><ul>
<li>JS中分为：<strong>原始类型</strong>和<strong>引用类型</strong>。</li>
</ul>
<h5 id="原始类型"><a href="#原始类型" class="headerlink" title="原始类型"></a>原始类型</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240503153618200.png" alt="image-20240503153618200"></p>
<h5 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h5><ul>
<li><p>算术运算符:+，-，*，&#x2F;，%，++，–</p>
</li>
<li><p>赋值运算符:&#x3D;，+&#x3D;，-&#x3D;，，&#x2F;&#x3D;,%&#x3D;</p>
</li>
<li><p>比较运算符:&gt;，&lt;，&gt;&#x3D;，&lt;&#x3D;，!&#x3D;，&#x3D;&#x3D;，**&#x3D;&#x3D;&#x3D;**</p>
<p>&#x3D;&#x3D;与&#x3D;&#x3D;&#x3D;</p>
<ul>
<li>&#x3D;&#x3D;会进行类型转换，&#x3D;&#x3D;&#x3D;不会进行类型转换。</li>
</ul>
</li>
<li><p>逻辑运算符:&amp;&amp;，||，!</p>
</li>
<li><p>三元运算符:条件表达式?true_value:false value</p>
</li>
</ul>
<p>类型转换：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622132055925.png" alt="image-20240622132055925"></p>
<ul>
<li><p>字符串类型转为数字：</p>
<ul>
<li><p>paseInt方法：<strong>这个方法能够将字符串转为数字，原理是从字符串左边开始读取，读取到不是数字的地方(如12A45他会读取到A这个为止而停下来)停下来，取该位置前面的输出。</strong></p>
<pre><code>alert(parseInt(&quot;12&quot;));//转为12
alert(parseInt(&quot;12A45&quot;));//转为12
alert(parseInt(&quot;A45&quot;));//转为NaN(not a number)
</code></pre>
</li>
</ul>
</li>
<li><p>其他类型转为boolean：</p>
<ul>
<li>Number类型：0和NaN转为false，其他均转为true。</li>
<li>String类型：空字符串转为false，其他 均转为true。</li>
<li>Null类型和undefined类型：均转为false。</li>
</ul>
</li>
<li><p>隐式转换</p>
<ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622131333679.png" alt="image-20240622131333679"></li>
</ul>
</li>
<li><p>检测数据类型</p>
<ul>
<li>typeof + 检测的名字</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622130940174.png" alt="image-20240622130940174"></li>
</ul>
</li>
</ul>
<h5 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h5><ul>
<li><p>if…else if ….else….</p>
</li>
<li><p>switch</p>
</li>
<li><p>for</p>
</li>
<li><p>while</p>
</li>
<li><p>do…while</p>
<p>值得注意的是，<strong>在JS中这些流程控制语句和我们的java是完全一致的。</strong></p>
</li>
<li><p>break和continue</p>
<ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622145759783.png" alt="image-20240622145759783"></li>
</ul>
</li>
</ul>
<h5 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h5><h3 id="3）JS函数"><a href="#3）JS函数" class="headerlink" title="3）JS函数"></a>3）JS函数</h3><h4 id="1、函数的定义"><a href="#1、函数的定义" class="headerlink" title="1、函数的定义"></a>1、函数的定义</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">functionName</span>(<span class="params">参数<span class="number">1</span>，参数<span class="number">2.</span>..</span>)&#123;</span><br><span class="line"><span class="comment">//要执行的代码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//另一种方式调用</span></span><br><span class="line"><span class="keyword">let</span> functionName = <span class="keyword">function</span>(<span class="params">参数<span class="number">1</span>，参数<span class="number">2.</span>..</span>)&#123;</span><br><span class="line">    <span class="comment">//要执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意<ul>
<li>形式参数不需要类型。因为JS是弱类型语言。</li>
<li>返回值类型也不需要定义，可以再函数内部直接使用return返回即可。</li>
</ul>
</li>
<li>调用：函数名称(实际参数列表)</li>
</ul>
<h4 id="2、匿名函数"><a href="#2、匿名函数" class="headerlink" title="2、匿名函数"></a>2、匿名函数</h4><ul>
<li><p>函数分为</p>
<ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622154237927.png" alt="image-20240622154237927"></li>
</ul>
</li>
<li><p>函数表达式</p>
<ul>
<li><pre><code class="HTML">&lt;script&gt;
    // 1.函数表达式
let fn = function (x,y)&#123;
    console.log( x + y );
&#125;
fn(1,2);

// 函数表达式 和具名函数(有名函数) 有什么不同呢？

// 1.具名函数的调用可以写到任何位置
// 2.匿名函数的函数表达式形式写法必须先声明在使用，否则会报错未声明
&lt;/script&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 立即执行函数</span><br><span class="line"></span><br><span class="line">  * ```js</span><br><span class="line">    // 1、立即执行函数</span><br><span class="line">    </span><br><span class="line">    (function(x,y)&#123;</span><br><span class="line">    </span><br><span class="line">      console.log(x+y);</span><br><span class="line">    </span><br><span class="line">    &#125;)(1,2);</span><br><span class="line">    </span><br><span class="line">    // 2、第二种 写法</span><br><span class="line">    </span><br><span class="line">    (function(x,y)&#123;</span><br><span class="line">    </span><br><span class="line">      console.log(x+y);</span><br><span class="line">    </span><br><span class="line">    &#125;(1,3));</span><br><span class="line">    </span><br><span class="line">    // 上面结构中，第二个小括号是实参，function()中的小括号传递的是形参&#123;&#125;中写入要执行的逻辑</span><br></pre></td></tr></table></figure>

* 注意：多个立即执行函数要在函数末尾用分号隔开。
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="4）JS对象"><a href="#4）JS对象" class="headerlink" title="4）JS对象"></a>4）JS对象</h3><p>定义：let 对象名 &#x3D; { }</p>
<h5 id="Array-数组对象"><a href="#Array-数组对象" class="headerlink" title="Array(数组对象)"></a>Array(数组对象)</h5><ul>
<li><p>定义：let 变量名 &#x3D; new Array(元素列表)；或者let 变量名&#x3D; [元素列表];</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定义数组</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> arr1 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//或者var arr1 = [1,2,3,4,5]</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//访问元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr1[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr1[<span class="number">1</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="comment">//特点：长度可变，类型可变</span></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span></span><br><span class="line"><span class="language-javascript">   arr[<span class="number">10</span>] = <span class="number">50</span>; </span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">10</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   arr[<span class="number">9</span>] = <span class="string">&quot;zhangsan&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">   arr[<span class="number">8</span>] = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//数组的遍历,遍历所有的元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> element = arr[i];</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(element);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;=========================&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//数组的遍历(foreach):遍历数组中有值的元素</span></span></span><br><span class="line"><span class="language-javascript">    arr.<span class="title function_">forEach</span>(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(element);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//ES6 箭头函数：(形参列表...) =&gt;&#123;函数体的内容&#125;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//push方法：添加元素到数组末尾</span></span></span><br><span class="line"><span class="language-javascript">    arr.<span class="title function_">push</span>(<span class="string">&quot;添加测试1&quot;</span>,<span class="string">&quot;添加测试2&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//删除元素splice方法:(从某个索引位置开始删除,删除元素的个数)</span></span></span><br><span class="line"><span class="language-javascript">    arr.<span class="title function_">splice</span>(<span class="number">11</span>,<span class="number">2</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="String对象"><a href="#String对象" class="headerlink" title="String对象"></a>String对象</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//String对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//方式一：</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> stringTest = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;zhangsan&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//方式二：</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> stringTest1 =<span class="string">&quot;lisi&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>String对象的<strong>属性</strong>和<strong>方法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240503165308862.png" alt="image-20240503165308862"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//String对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//方式一：</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var stringTest = new String(&quot;zhangsan&quot;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//方式二：</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> stringTest1 =<span class="string">&quot;  Hello World  &quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//获取字符串长度</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stringTest1.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//chAt方法,返回指定位置的字符</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stringTest1.<span class="title function_">charAt</span>(<span class="number">2</span>));<span class="comment">//H</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//indexOf方法，查询对应字符的索引</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stringTest1.<span class="title function_">indexOf</span>(<span class="string">&quot;H&quot;</span>)); <span class="comment">//2</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//trim方法(去除空格)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> newString = stringTest1.<span class="title function_">trim</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newString);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//substring方法，截取字符串，(前闭后开)输入两个值，开始索引和结束索引</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//这里演示截取去除空格后的字符串，将Hello截取出来</span></span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">console</span>.<span class="title function_">log</span>(newString.<span class="title function_">substring</span>(<span class="number">0</span>,<span class="number">5</span>));<span class="comment">//Hello</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="json对象"><a href="#json对象" class="headerlink" title="json对象"></a>json对象</h5><ul>
<li><p>概念: <strong>JavaScript Object Notation，JavaScript</strong>，对象标记法</p>
</li>
<li><p>JSON 是通过JavaScript 对象标记法书写的文本。</p>
</li>
<li><p>由于其语法简单，层次结构鲜明，现多用于作为<strong>数据载体</strong>，在网络中进行数据传输。</p>
</li>
</ul>
<p>数据格式：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;xiaoli&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">25</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span><span class="string">&quot;男性&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;key1&quot;</span><span class="punctuation">:</span><span class="string">&quot;value1&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240503172509557.png" alt="image-20240503172509557"></p>
<p>定义json案例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="comment">//定义json</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> jsonStr = <span class="string">&#x27;&#123;&quot;name&quot; = &quot;小李&quot;,&quot;age&quot; = 25, &quot;address&quot; = &quot;北京&quot; &#125;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//JSON字符串转为JS对象——JSON.parse()方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> jsonStrObject = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonStr);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(jsonStrObject);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//JS对象转为JS字符串——JSON.stringify()方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span>  jsObject = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(jsonStrObject);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(jsObject);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="BOM对象"><a href="#BOM对象" class="headerlink" title="BOM对象"></a>BOM对象</h5><ul>
<li>概念:<strong>Browser Object Model</strong> 浏览器对象模型，允许lavaScript与浏览器对话，lavaScript 将浏览器的各个组成部分封装为<strong>对象</strong>。</li>
</ul>
<h6 id="Window对象"><a href="#Window对象" class="headerlink" title="Window对象"></a>Window对象</h6><ul>
<li>介绍:浏览器窗口对象。</li>
<li>获取:直接使用window，其中 window.可以省略<strong>window.alert()和alert()效果一样</strong></li>
<li>属性<ul>
<li>history:对 History 对象的只读引用。请参阅 History 对象</li>
<li>location:用于窗口或框架的 Location 对象。请参阅Location 对象。</li>
<li>navigator:对 Navigator 对象的只读引用。请参阅Navigator 对象</li>
</ul>
</li>
<li>方法<ul>
<li><strong>alert()</strong>:显示带有一段消息和一个确认按钮的警告框。</li>
<li><strong>confirm()</strong>:显示带有一段消息以及确认按钮和取消按钮的对话。</li>
<li>**setlnterval():**按照指定的周期(以毫秒计)来调用函数或计算表达式。</li>
<li><strong>setTimeout()</strong>:在指定的毫秒数后调用函数或计算表达式。</li>
</ul>
</li>
</ul>
<p>示例代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//获取</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">alert</span>(<span class="string">&quot;Hello BOM&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&quot;Hello BoM window&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// confirm-对话框--确认:true ，取消:false</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> flag = <span class="title function_">confirm</span>(<span class="string">&quot;您确认删除该记录吗?&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(flag);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 定时器-setInterval -- 周期性的执行某一个函数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> i=<span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        i++;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;定时器执行了&quot;</span>+i+<span class="string">&quot;次&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,<span class="number">2000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定时器延迟指定时间执行一次:-setTimeout </span></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&quot;Js&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,<span class="number">3000</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="Location对象"><a href="#Location对象" class="headerlink" title="Location对象"></a>Location对象</h6><ul>
<li><p>介绍：地址栏对象。</p>
</li>
<li><p>获取：使用window.location获取，其中window.可以省略不写</p>
</li>
<li><p>属性：</p>
<ul>
<li><p>href：设置或返回完整的URL，如果设置URL那么他会自动跳转所设置的URL。</p>
<p>代码示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//获取当前完整的URL</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">href</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//设置URL自动跳转</span></span></span><br><span class="line"><span class="language-javascript">    location.<span class="property">href</span>=<span class="string">&quot;http://www.itcast.cn&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="DOM对象"><a href="#DOM对象" class="headerlink" title="DOM对象"></a>DOM对象</h5><ul>
<li><p>概念:<strong>Document Object Model</strong>，文档对象模型。</p>
</li>
<li><p>将标记语言的各个组成部分封装为对应的对象：</p>
<ul>
<li>Document：整个文档对象</li>
<li>Element：元素对象</li>
<li>Attribute：属性对象</li>
<li>Text：文本对象</li>
<li>Comment：注释对象</li>
</ul>
</li>
<li><p>JavaScript 通过DOM，就能够对HTML进行如下操作：</p>
<ul>
<li>改变 HTML元素的内容</li>
<li>改变 HTML元素的样式(CSS)</li>
<li>对 HTML DOM 事件作出反应</li>
<li>添加和删除 HTML元素</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240503180943024.png" alt="image-20240503180943024"></p>
<h3 id="5）JS事件监听"><a href="#5）JS事件监听" class="headerlink" title="5）JS事件监听"></a>5）JS事件监听</h3><p>事件:HTML事件是发生在HTML元素上的“事情”。比如:</p>
<ul>
<li><p>按钮被点击</p>
</li>
<li><p>鼠标移动到元素上</p>
</li>
<li><p>按下键盘按键</p>
</li>
<li><p>事件监听:JavaScript可以在事件被侦测到时 执行代码。</p>
</li>
</ul>
<h4 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h4><ul>
<li><p>方式一：通过HTML标签中的时间属性进行绑定</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;on()&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">	function on()</span><br><span class="line">    &#123;</span><br><span class="line">		alert(&#x27;我被点击了!);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>方式二：通过DOM元素属性绑定</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;button&quot;</span> <span class="attr">id</span> =<span class="string">&quot;btn1&quot;</span> <span class="attr">value</span> = <span class="string">&quot;按钮2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>).<span class="property">onclick</span> = 			<span class="keyword">function</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="language-javascript">	&#123;</span></span><br><span class="line"><span class="language-javascript">    	<span class="title function_">alert</span>(<span class="string">&quot;我被点击了！&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="常见事件"><a href="#常见事件" class="headerlink" title="常见事件"></a>常见事件</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240503184235985.png" alt="image-20240503184235985"></p>
<h3 id="6）变量"><a href="#6）变量" class="headerlink" title="6）变量"></a>6）变量</h3><p>语法：let 变量名</p>
<h4 id="6-1、变量的赋值"><a href="#6-1、变量的赋值" class="headerlink" title="6.1、变量的赋值"></a>6.1、变量的赋值</h4><p>语法：变量 &#x3D; 要赋的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age</span><br><span class="line"></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span>；</span><br><span class="line"><span class="comment">//弹出输入框prompt(&quot;请输入姓名&quot;)</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="title function_">prompt</span>(<span class="string">&quot;请输入姓名&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="6-2、var和let的区别"><a href="#6-2、var和let的区别" class="headerlink" title="6.2、var和let的区别"></a>6.2、var和let的区别</h4><p>在较旧的JavaScript，使用关键字 var 来声明变量 ，而不是 let。<br>var现在开发中一般不再使用它，只是我们可能再老版程序中看到它。<br>let 为了解决 var 的一些问题。</p>
<p>var 声明:<br><strong>可以先使用 在声明(不合理)</strong><br><strong>var 声明过的变量可以重复声明(不合理)</strong><br><strong>比如变量提升、全局变量、没有块级作用域等等</strong></p>
<h3 id="7）WebAPIS"><a href="#7）WebAPIS" class="headerlink" title="7）WebAPIS"></a>7）WebAPIS</h3><ul>
<li><p>变量声明</p>
<ul>
<li><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622165854723.png" alt="image-20240622165854723"></p>
</li>
<li><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622170552011.png" alt="image-20240622170552011"></p>
</li>
</ul>
</li>
</ul>
<h5 id="7-1、webAPI基本认识"><a href="#7-1、webAPI基本认识" class="headerlink" title="7.1、webAPI基本认识"></a>7.1、webAPI基本认识</h5><h6 id="7-1-1、作用和分类"><a href="#7-1-1、作用和分类" class="headerlink" title="7.1.1、作用和分类"></a>7.1.1、作用和分类</h6><ul>
<li><p>作用: 就是使用 JS 去操作 html和浏览器</p>
</li>
<li><p>分类:DOM(文档对象模型)、BOM(浏览器对象模型)</p>
</li>
<li><p>什么是webAPI？</p>
<p>API 指的是应用程序编程接口（<em>A</em>pplication <em>P</em>rogramming <em>I</em>nterface）。</p>
<p>Web API 是 Web 的应用程序编程接口。</p>
<p>浏览器API 可以扩展 Web 浏览器的功能。</p>
<p>服务器 API 可以扩展 Web 服务器的功能</p>
</li>
</ul>
<h6 id="7-1-2、什么是DOM"><a href="#7-1-2、什么是DOM" class="headerlink" title="7.1.2、什么是DOM"></a>7.1.2、什么是DOM</h6><ul>
<li>DOM(Document Object Model–文档对象模型)是用来呈现以及与任意 HTML 或 XML文档交互的API</li>
<li>白话文:DOM是浏览器提供的一套专门用来 操作网页内容 的功能</li>
</ul>
<h6 id="7-1-3、DOM树"><a href="#7-1-3、DOM树" class="headerlink" title="7.1.3、DOM树"></a>7.1.3、DOM树</h6><ul>
<li>DOM树是什么？<ul>
<li>将 HTML 文档以树状结构直观的表现出来，我们称之为文档树或 DOM 树</li>
<li>描述网页内容关系的名词</li>
<li>作用:文档树直观的体现了标签与标签之间的关系</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622171331061.png" alt="image-20240622171331061"></li>
</ul>
</li>
</ul>
<h6 id="7-1-4、DOM对象"><a href="#7-1-4、DOM对象" class="headerlink" title="7.1.4、DOM对象"></a>7.1.4、<code>DOM</code>对象</h6><ul>
<li>DOM对象:浏览器根据html标签生成的JS对象<ul>
<li>所有的标签属性都可以在这个对象上面找到</li>
<li>修改这个对象的属性会自动映射到标签身上</li>
</ul>
</li>
<li>DOM核心思想<ul>
<li>把网页内容当做对象来处理</li>
</ul>
</li>
<li><code>doument</code>对象<ul>
<li>是 DOM 里提供的一个对象</li>
<li>所以它提供的属性和方法都是<em><strong>用来访问和操作网页内容的</strong></em><br>例:document.write()</li>
<li>网页所有内容都在document里面</li>
</ul>
</li>
</ul>
<h5 id="7-2、获取DOM对象"><a href="#7-2、获取DOM对象" class="headerlink" title="7.2、获取DOM对象"></a>7.2、获取DOM对象</h5><h6 id="7-2-1、根据CSS选择器来获取DOM元素"><a href="#7-2-1、根据CSS选择器来获取DOM元素" class="headerlink" title="7.2.1、根据CSS选择器来获取DOM元素"></a>7.2.1、根据CSS选择器来获取DOM元素</h6><ul>
<li><p>选择匹配的<strong>第一个元素</strong></p>
</li>
<li><p>语法</p>
<ul>
<li><pre><code class="javascript">document.querySelector(&#39;css选择器&#39;)

// 获取匹配的第一个元素(通过标签元素和类名来进行选择)
  const firstObj = document.querySelector(&#39;div&#39;)
  const firstObj2 = document.querySelector(&quot;.test&quot;)
  console.log(firstObj);
  console.log(firstObj2);

const nav = document.querySelector(&quot;#nav&quot;)
console.log(nav);

const li = document.querySelector(&quot;ul li:first-child&quot;)
console.log(li);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * 参数：包含一个或多个有效的CSS选择器字符串</span><br><span class="line"></span><br><span class="line">  * 返回值：CSS选择器匹配的**第一个元素**，一个HTMLElement对象</span><br><span class="line"></span><br><span class="line">* 选择多个元素</span><br><span class="line"></span><br><span class="line">* 语法：</span><br><span class="line"></span><br><span class="line">  ```javascript</span><br><span class="line">  const lis = document.querySelectorAll(&quot;ul li&quot;)</span><br><span class="line">  console.log(lis);</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>返回值：返回一个数组</p>
<ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622173913182.png" alt="image-20240622173913182"></li>
<li>得到的是一个伪数组有长度有索引号的数组，但是没有 pop()push()等数组方法，想要得到里面的每一个对象，则需要遍历(for)的方式获得。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="7-2-2、其他获取DOM元素的方法"><a href="#7-2-2、其他获取DOM元素的方法" class="headerlink" title="7.2.2、其他获取DOM元素的方法"></a>7.2.2、其他获取DOM元素的方法</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240622174536995.png" alt="image-20240622174536995"></p>
<h5 id="7-3、操作元素内容"><a href="#7-3、操作元素内容" class="headerlink" title="7.3、操作元素内容"></a>7.3、操作元素内容</h5><h6 id="7-3-2、对象-innerHtml属性"><a href="#7-3-2、对象-innerHtml属性" class="headerlink" title="7.3.2、对象.innerHtml属性"></a>7.3.2、对象.innerHtml属性</h6><p>获取元素内容最简单的方法是使用 <code>innerHTML</code> 属性。<code>innerHTML</code> 属性可用于获取或替换 HTML 元素的内容。<code>innerHTML</code> 属性可用于获取或改变任何 HTML 元素，包括 <code>&lt;html&gt;</code> 和 <code>&lt;body&gt;</code>。</p>
<p>下面的例子改变了 id&#x3D;”demo” 的 </p><p> 元素的内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;Hello World!&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>  在上面的例子中，<strong>getElementById</strong> 是方法，而 <strong>innerHTML</strong> 是属性。</p>
<h6 id="7-3-3、getElementById-方法"><a href="#7-3-3、getElementById-方法" class="headerlink" title="7.3.3、getElementById 方法"></a>7.3.3、getElementById 方法</h6><p>访问 HTML 元素最常用的方法是使用元素的 id。</p>
<p>在上面的例子中，<code>getElementById</code> 方法使用 id&#x3D;”demo” 来查找元素。</p>
<h5 id="7-4、JavaScript-验证-API"><a href="#7-4、JavaScript-验证-API" class="headerlink" title="7.4、JavaScript 验证 API"></a>7.4、JavaScript 验证 API</h5><h6 id="约束验证-DOM-方法"><a href="#约束验证-DOM-方法" class="headerlink" title="约束验证 DOM 方法"></a>约束验证 DOM 方法</h6><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">checkValidity()</td>
<td align="left">如果 input 元素包含有效数据，则返回 true。</td>
</tr>
<tr>
<td align="left">setCustomValidity()</td>
<td align="left">设置 input 元素的 validationMessage 属性。</td>
</tr>
</tbody></table>
<p>checkValidity() 方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;id1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">min</span>=<span class="string">&quot;100&quot;</span> <span class="attr">max</span>=<span class="string">&quot;300&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction()&quot;</span>&gt;</span>OK<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> inpObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;id1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (!inpObj.<span class="title function_">checkValidity</span>()) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = inpObj.<span class="property">validationMessage</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125; </span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="约束验证-DOM-属性"><a href="#约束验证-DOM-属性" class="headerlink" title="约束验证 DOM 属性"></a>约束验证 DOM 属性</h6><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">validity</td>
<td align="left">包含与输入元素有效性相关的布尔属性。</td>
</tr>
<tr>
<td align="left">validationMessage</td>
<td align="left">包含当有效性为 false 时浏览器将显示的消息。</td>
</tr>
<tr>
<td align="left">willValidate</td>
<td align="left">指示是否将验证 input 元素。</td>
</tr>
</tbody></table>
<h6 id="有效性属性"><a href="#有效性属性" class="headerlink" title="有效性属性"></a>有效性属性</h6><p>input 元素的有效性属性包含许多与数据有效性相关的属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">customError</td>
<td align="left">如果设置了自定义有效性消息，则设置为 true。</td>
</tr>
<tr>
<td align="left">patternMismatch</td>
<td align="left">如果元素的值与其 pattern 属性不匹配，则设置为 true。</td>
</tr>
<tr>
<td align="left">rangeOverflow</td>
<td align="left">如果元素的值大于其 max 属性，则设置为 true。</td>
</tr>
<tr>
<td align="left">rangeUnderflow</td>
<td align="left">如果元素的值小于其 min 属性，则设置为 true。</td>
</tr>
<tr>
<td align="left">stepMismatch</td>
<td align="left">如果元素的值对其 step 属性无效，则设置为 true。</td>
</tr>
<tr>
<td align="left">tooLong</td>
<td align="left">如果元素的值超过其 maxLength 属性，则设置为 true。</td>
</tr>
<tr>
<td align="left">typeMismatch</td>
<td align="left">如果元素的值对其 type 属性无效，则设置为 true。</td>
</tr>
<tr>
<td align="left">valueMissing</td>
<td align="left">如果元素（具有 required 属性）没有值，则设置为 true。</td>
</tr>
<tr>
<td align="left">valid</td>
<td align="left">如果元素的值有效，则设置为 true。</td>
</tr>
</tbody></table>
<p>rangeOverflow 属性</p>
<p>如果输入字段中的数字大于 100（input 元素的 <code>max</code> 属性），则显示一条消息：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>JavaScript 验证<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>请输入一个数字，然后单击“确定”：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;id1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">max</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction()&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>如果数字大于 100（输入的 max 属性），则会显示错误消息。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> text;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;id1&quot;</span>).<span class="property">validity</span>.<span class="property">rangeOverflow</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    text = <span class="string">&quot;Value too large&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    text = <span class="string">&quot;输入没问题&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125; </span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = text;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>rangeUnderflow 属性</p>
<p>如果输入字段中的数字小于 100（input 元素的 <code>min</code> 属性），则显示一条消息：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>JavaScript 验证<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>请输入一个数字，然后单击“确定”：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;id1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">min</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction()&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>如果数字小于 100（输入的 min 属性），则会显示错误消息。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> text;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;id1&quot;</span>).<span class="property">validity</span>.<span class="property">rangeUnderflow</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    text = <span class="string">&quot;Value too small&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    text = <span class="string">&quot;输入没问题&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125; </span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = text;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="7-5、Web-History-API"><a href="#7-5、Web-History-API" class="headerlink" title="7.5、Web History API"></a>7.5、Web History API</h5><p>Web History API 提供了访问 windows.history 对象的简单方法。</p>
<p>window.history 对象包含用户访问过的 URL（网站）。</p>
<p>所有浏览器都支持 Web History API：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240625130902822.png" alt="image-20240625130902822"></p>
<h6 id="History-back-方法"><a href="#History-back-方法" class="headerlink" title="History back() 方法"></a>History back() 方法</h6><p>back() 方法加载 windows.history 列表中的前一个 URL。</p>
<p>这与单击浏览器中的“后退箭头”相同。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction()&quot;</span>&gt;</span>后退<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">history</span>.<span class="title function_">back</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="History-go-方法"><a href="#History-go-方法" class="headerlink" title="History go() 方法"></a>History go() 方法</h6><p>go() 方法从历史列表中加载一个特定的 URL：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction()&quot;</span>&gt;</span>后退两页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">history</span>.<span class="title function_">go</span>(-<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="History-对象属性"><a href="#History-对象属性" class="headerlink" title="History 对象属性"></a>History 对象属性</h6><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/prop_his_length.asp">length</a></td>
<td align="left">返回历史列表中的 URL 数量。</td>
</tr>
</tbody></table>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>History对象<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;getBack()&quot;</span>&gt;</span>获取浏览器历史列表长度<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getBack</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> length = <span class="variable language_">window</span>.<span class="property">history</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#demo&quot;</span>).<span class="property">innerHTML</span> = <span class="string">`浏览器列表长度是：<span class="subst">$&#123;length&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="History-对象方法"><a href="#History-对象方法" class="headerlink" title="History 对象方法"></a>History 对象方法</h6><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/met_his_back.asp">back()</a></td>
<td align="left">加载历史列表中的上一个 URL。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/met_his_forward.asp">forward()</a></td>
<td align="left">加载历史列表中的下一个 URL。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/met_his_go.asp">go()</a></td>
<td align="left">从历史列表中加载特定的 URL。</td>
</tr>
</tbody></table>
<h5 id="7-6、Web-Storage-API"><a href="#7-6、Web-Storage-API" class="headerlink" title="7.6、Web Storage API"></a>7.6、Web Storage API</h5><p>Web Storage API 是一种用于在浏览器中存储和检索数据的简单语法。他非常容易使用：</p>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Bill Gates&quot;</span>);</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="localStorage-对象"><a href="#localStorage-对象" class="headerlink" title="localStorage 对象"></a>localStorage 对象</h6><p>localStorage 对象提供对特定网站的本地存储的访问。它允许您存储、读取、添加、修改和删除该域的数据项。存储的数据没有到期日期，并且在浏览器关闭时不会被删除。</p>
<p>这些数据将在几天、几周和几年内均可用。</p>
<p>setItem() 方法</p>
<p>localStorage.setItem() 方法将数据项存储在 storage 中。</p>
<p>它接受一个名称和一个值作为参数：</p>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Bill Gates&quot;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="sessionStorage-对象"><a href="#sessionStorage-对象" class="headerlink" title="sessionStorage 对象"></a>sessionStorage 对象</h6><p>sessionStorage 对象与 localStorage 对象相同。</p>
<p>不同之处在于 sessionStorage 对象存储会话的数据。</p>
<p><strong>当浏览器关闭时，数据会被删除。</strong></p>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>setItem() 方法</p>
<p>sessionStorage.setItem() 方法将数据项存储在存储（storage）中。</p>
<p>它接受一个名称和一个值作为参数：</p>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Bill Gates&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>getItem() 方法</p>
<p>sessionStorage.getItem() 方法从存储（storage）中检索数据项。</p>
<p>它接受一个名称作为参数：</p>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="Storage-对象属性和方法"><a href="#Storage-对象属性和方法" class="headerlink" title="Storage 对象属性和方法"></a>Storage 对象属性和方法</h6><table>
<thead>
<tr>
<th align="left">属性&#x2F;方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/met_storage_key.asp">key(n)</a></td>
<td align="left">返回存储中第 n 个键的名称。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/prop_storage_length.asp">length</a></td>
<td align="left">返回存储在 Storage 对象中的数据项数。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/met_storage_getitem.asp">getItem(keyname)</a></td>
<td align="left">返回指定的键名的值。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/met_storage_setitem.asp">setItem(keyname, value)</a></td>
<td align="left">将键添加到存储中，或者如果键已经存在，则更新该键的值。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/met_storage_removeitem.asp">removeItem(keyname)</a></td>
<td align="left">从存储中删除该键。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/met_storage_clear.asp">clear()</a></td>
<td align="left">清空所有键。</td>
</tr>
</tbody></table>
<h6 id="Web-Storage-API-相关页面"><a href="#Web-Storage-API-相关页面" class="headerlink" title="Web Storage API 相关页面"></a>Web Storage API 相关页面</h6><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/prop_win_localstorage.asp">window.localStorage</a></td>
<td align="left">允许在 Web 浏览器中保存键&#x2F;值对。存储没有到期日期的数据。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/jsref/prop_win_sessionstorage.asp">window.sessionStorage</a></td>
<td align="left">允许在 Web 浏览器中保存键&#x2F;值对。存储一个会话的数据。</td>
</tr>
</tbody></table>
<h5 id="7-7、Web-Worker-API"><a href="#7-7、Web-Worker-API" class="headerlink" title="7.7、Web Worker API"></a>7.7、Web Worker API</h5><p><strong>Web Worker 是在后台运行的 JavaScript，不会影响页面的性能。</strong></p>
<p>什么是 Web Worker？</p>
<p>在 HTML 页面中执行脚本时，页面在脚本完成之前是无响应的。</p>
<p>Web Worker 是在后台运行的 JavaScript，独立于其他脚本，不会影响页面的性能。你可以继续做任何你想做的事情：点击、选取内容等，同时 web worker 在后台运行。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>JavaScript Web Workers API<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Count numbers: <span class="tag">&lt;<span class="name">output</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">output</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;startWorker()&quot;</span>&gt;</span>开始 Worker<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;stopWorker()&quot;</span>&gt;</span>停止 Worker<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> w;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">startWorker</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span>(<span class="title function_">typeof</span>(w) == <span class="string">&quot;undefined&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    w = <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&quot;demo_workers.js&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  w.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;result&quot;</span>).<span class="property">innerHTML</span> = event.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">stopWorker</span>(<span class="params"></span>) &#123; </span></span><br><span class="line"><span class="language-javascript">  w.<span class="title function_">terminate</span>();</span></span><br><span class="line"><span class="language-javascript">  w = <span class="literal">undefined</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="创建-Web-Worker-文件"><a href="#创建-Web-Worker-文件" class="headerlink" title="创建 Web Worker 文件"></a>创建 Web Worker 文件</h6><p>现在，让我们在外部 JavaScript 中创建我们的 Web Worker。</p>
<p>在这里，我们创建了一个重要的脚本。该脚本存储在 “demo_workers.js” 文件中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">timedCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  i ++;</span><br><span class="line">  <span class="title function_">postMessage</span>(i);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="string">&quot;timedCount()&quot;</span>,<span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">timedCount</span>();</span><br></pre></td></tr></table></figure>

<p>上面代码的重要部分是 <code>postMessage()</code> 方法 - 用于将消息发送回 HTML 页面。</p>
<p><strong>注释：</strong>通常 web worker 不用于这种简单的脚本，而是用于 CPU 密集型任务。</p>
<h6 id="创建-Web-Worker-对象"><a href="#创建-Web-Worker-对象" class="headerlink" title="创建 Web Worker 对象"></a>创建 Web Worker 对象</h6><p>现在我们有了 web worker 文件，我们需要从 HTML 页面调用它。</p>
<p>以下代码行检查 worker 是否已存在，如果不存在，它会创建一个新的 web worker 对象并运行 “demo_workers.js” 中的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title function_">typeof</span>(w) == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">//引入你的workers.js的路径，若是放在同级目录下，直接使用文件名称即可。</span></span><br><span class="line">  w = <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&quot;demo_workers.js&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们可以发送和接收来自 web worker 的消息。</p>
<p>向 web worker 添加一个 “onmessage” 事件侦听器。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;result&quot;</span>).<span class="property">innerHTML</span> = event.<span class="property">data</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>当 Web Worker 发布消息时，将执行事件侦听器中的代码。来自 Web Worker 的数据存储在 event.data 中。</p>
<h6 id="终止-Web-Worker"><a href="#终止-Web-Worker" class="headerlink" title="终止 Web Worker"></a>终止 Web Worker</h6><p>当 web worker 对象被创建时，它会继续监听消息（即使在外部脚本完成之后）直到它被终止。</p>
<p>如需终止 web worker，并释放浏览器&#x2F;计算机资源，请使用 <code>terminate()</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w.<span class="title function_">terminate</span>();</span><br></pre></td></tr></table></figure>

<h6 id="重用-Web-Worker"><a href="#重用-Web-Worker" class="headerlink" title="重用 Web Worker"></a>重用 Web Worker</h6><p>如果将 worker 变量设置为 undefined，则在它终止后，您可以重用以下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>

<h6 id="Web-Worker-和-DOM"><a href="#Web-Worker-和-DOM" class="headerlink" title="Web Worker 和 DOM"></a>Web Worker 和 DOM</h6><p>由于 Web Worker 位于外部文件中，因此他们无法访问以下 JavaScript 对象：</p>
<ul>
<li>window 对象</li>
<li>document 对象</li>
<li>parent 对象</li>
</ul>
<h5 id="7-8、JavaScript-Fetch-API"><a href="#7-8、JavaScript-Fetch-API" class="headerlink" title="7.8、JavaScript Fetch API"></a>7.8、JavaScript Fetch API</h5><p><strong>Fetch API 接口允许 Web 浏览器向 Web 服务器发出 HTTP 请求。</strong></p>
<p>*<strong>不再需要 XMLHttpRequest。</strong></p>
<h6 id="Fetch-API-实例"><a href="#Fetch-API-实例" class="headerlink" title="Fetch API 实例"></a>Fetch API 实例</h6><p>下面的例子获取文件并显示内</p>
<p>由于 Fetch 基于 async 和 await，因此上面的例子这么写可能更容易理解：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>获取文件以更改此文本。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">getText</span>(<span class="string">&quot;/demo/js/fetch_info.txt&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getText</span>(<span class="params">file</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> myObject = <span class="keyword">await</span> <span class="title function_">fetch</span>(file);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> myText = <span class="keyword">await</span> myObject.<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = myText;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240625163254429.png" alt="image-20240625163254429"></p>
<h5 id="7-9、Web-Geolocation-API"><a href="#7-9、Web-Geolocation-API" class="headerlink" title="7.9、Web Geolocation API"></a>7.9、Web Geolocation API</h5><p>HTML Geolocation API 用于获取用户的地理位置。</p>
<p>由于这可能会损害隐私，除非用户批准，否则位置不可用。</p>
<p><strong>注释：</strong>地理定位对于带有 GPS 的设备（如智能手机）最为准确。</p>
<p>所有浏览器都支持 Geolocation API：</p>
<table>
<thead>
<tr>
<th align="center">Chrome</th>
<th align="center">IE</th>
<th align="center">Firefox</th>
<th align="center">Safari</th>
<th align="center">Opera</th>
</tr>
</thead>
<tbody><tr>
<td align="center">支持</td>
<td align="center">支持</td>
<td align="center">支持</td>
<td align="center">支持</td>
<td align="center">支持</td>
</tr>
</tbody></table>
<p><strong>注释：</strong>从 Chrome 50 开始，Geolocation API 将仅适用于安全上下文，例如 HTTPS。如果您的站点托管在非安全源（例如 HTTP）上，则获取用户位置的请求将不再起作用。</p>
<h6 id="使用-Geolocation-API"><a href="#使用-Geolocation-API" class="headerlink" title="使用 Geolocation API"></a>使用 Geolocation API</h6><p><code>getCurrentPosition()</code> 方法用于返回用户的位置。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>JavaScript Geolocation API<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>请单击按钮以获取您的坐标。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;getLocation()&quot;</span>&gt;</span>试一试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> x = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getLocation</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (navigator.<span class="property">geolocation</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    navigator.<span class="property">geolocation</span>.<span class="title function_">getCurrentPosition</span>(showPosition);</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123; </span></span><br><span class="line"><span class="language-javascript">    x.<span class="property">innerHTML</span> = <span class="string">&quot;Geolocation is not supported by this browser.&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">showPosition</span>(<span class="params">position</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  x.<span class="property">innerHTML</span> = <span class="string">&quot;Latitude: &quot;</span> + position.<span class="property">coords</span>.<span class="property">latitude</span> + </span></span><br><span class="line"><span class="language-javascript">  <span class="string">&quot;&lt;br&gt;Longitude: &quot;</span> + position.<span class="property">coords</span>.<span class="property">longitude</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>例子解释：</p>
<ol>
<li>检查是否支持 Geolocation</li>
<li>如果支持，请运行 getCurrentPosition() 方法。如果没有，则向用户显示一条消息</li>
<li>如果 getCurrentPosition() 方法成功，则返回一个 coordinates 对象给参数 (showPosition) 中规定的函数</li>
<li>showPosition() 函数输出纬度和经度</li>
</ol>
<p>上面的例子是一个非常基本的地理定位脚本，没有错误处理。</p>
<h6 id="处理错误和拒绝"><a href="#处理错误和拒绝" class="headerlink" title="处理错误和拒绝"></a>处理错误和拒绝</h6><p><code>getCurrentPosition()</code> 方法的第二个参数用于处理错误。如果无法获取用户的位置，它规定要运行的函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>JavaScript Geolocation API<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>单击按钮以获取您的坐标。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;getLocation()&quot;</span>&gt;</span>试一试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> x = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getLocation</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (navigator.<span class="property">geolocation</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    navigator.<span class="property">geolocation</span>.<span class="title function_">getCurrentPosition</span>(showPosition, showError);</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123; </span></span><br><span class="line"><span class="language-javascript">    x.<span class="property">innerHTML</span> = <span class="string">&quot;Geolocation is not supported by this browser.&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">showPosition</span>(<span class="params">position</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  x.<span class="property">innerHTML</span> = <span class="string">&quot;Latitude: &quot;</span> + position.<span class="property">coords</span>.<span class="property">latitude</span> + </span></span><br><span class="line"><span class="language-javascript">  <span class="string">&quot;&lt;br&gt;Longitude: &quot;</span> + position.<span class="property">coords</span>.<span class="property">longitude</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">showError</span>(<span class="params">error</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">switch</span>(error.<span class="property">code</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">case</span> error.<span class="property">PERMISSION_DENIED</span>:</span></span><br><span class="line"><span class="language-javascript">      x.<span class="property">innerHTML</span> = <span class="string">&quot;User denied the request for Geolocation.&quot;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">case</span> error.<span class="property">POSITION_UNAVAILABLE</span>:</span></span><br><span class="line"><span class="language-javascript">      x.<span class="property">innerHTML</span> = <span class="string">&quot;Location information is unavailable.&quot;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">case</span> error.<span class="property">TIMEOUT</span>:</span></span><br><span class="line"><span class="language-javascript">      x.<span class="property">innerHTML</span> = <span class="string">&quot;The request to get user location timed out.&quot;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">case</span> error.<span class="property">UNKNOWN_ERROR</span>:</span></span><br><span class="line"><span class="language-javascript">      x.<span class="property">innerHTML</span> = <span class="string">&quot;An unknown error occurred.&quot;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="getCurrentPosition-方法-返回数据"><a href="#getCurrentPosition-方法-返回数据" class="headerlink" title="getCurrentPosition() 方法 - 返回数据"></a>getCurrentPosition() 方法 - 返回数据</h6><p><code>getCurrentPosition()</code> 方法在成功时返回一个对象。会始终返回纬度、经度和精度属性。如果可用，则返回其他属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">返回</th>
</tr>
</thead>
<tbody><tr>
<td align="left">coords.latitude</td>
<td align="left">以十进制数表示的纬度（始终返回）。</td>
</tr>
<tr>
<td align="left">coords.longitude</td>
<td align="left">以十进制数表示的经度（始终返回）。</td>
</tr>
<tr>
<td align="left">coords.accuracy</td>
<td align="left">位置精度（始终返回）。</td>
</tr>
<tr>
<td align="left">coords.altitude</td>
<td align="left">平均海平面以上的高度（以米计）（如果可用则返回）。</td>
</tr>
<tr>
<td align="left">coords.altitudeAccuracy</td>
<td align="left">位置的高度精度（如果可用则返回）。</td>
</tr>
<tr>
<td align="left">coords.heading</td>
<td align="left">从北顺时针方向的航向（如果可用则返回）。</td>
</tr>
<tr>
<td align="left">coords.speed</td>
<td align="left">以米&#x2F;秒计的速度（如果可用则返回）。</td>
</tr>
<tr>
<td align="left">timestamp</td>
<td align="left">响应的日期&#x2F;时间（如果可用则返回）。</td>
</tr>
</tbody></table>
<h2 id="JS-ASYNC"><a href="#JS-ASYNC" class="headerlink" title="JS ASYNC"></a>JS ASYNC</h2><h3 id="JavaScript-回调"><a href="#JavaScript-回调" class="headerlink" title="JavaScript 回调"></a>JavaScript 回调</h3><p>“I will call back later!”</p>
<p>回调 (callback) 是作为参数传递给另一个函数的函数</p>
<p>这种技术允许函数调用另一个函数</p>
<p>回调函数可以在另一个函数完成后运行</p>
<h4 id="函数序列"><a href="#函数序列" class="headerlink" title="函数序列"></a>函数序列</h4><p>JavaScript 函数按照它们被调用的顺序执行。而不是以它们被定义的顺序。</p>
<p>此例最终将显示 “Goodbye”：</p>
<h5 id="实例1"><a href="#实例1" class="headerlink" title="实例1"></a>实例1</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFirst</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">myDisplayer</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mySecond</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">myDisplayer</span>(<span class="string">&quot;Goodbye&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">myFirst</span>();</span><br><span class="line"><span class="title function_">mySecond</span>();</span><br></pre></td></tr></table></figure>

<h5 id="实例2"><a href="#实例2" class="headerlink" title="实例2"></a>实例2</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFirst</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">myDisplayer</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mySecond</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">myDisplayer</span>(<span class="string">&quot;Goodbye&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">mySecond</span>();</span><br><span class="line"><span class="title function_">myFirst</span>();</span><br></pre></td></tr></table></figure>

<h4 id="顺序控制"><a href="#顺序控制" class="headerlink" title="顺序控制"></a>顺序控制</h4><p>有时您希望更好地控制何时执行函数。</p>
<p>假设您要进行计算，然后显示结果。</p>
<p>您可以调用计算器函数 (<code>myCalculator</code>)，保存结果，然后调用另一个函数 (<code>myDisplayer</code>) 来显示结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myDisplayer</span>(<span class="params">some</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = some;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myCalculator</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = num1 + num2;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">myCalculator</span>(<span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line"><span class="title function_">myDisplayer</span>(result);</span><br></pre></td></tr></table></figure>

<h4 id="JavaScript-回调-1"><a href="#JavaScript-回调-1" class="headerlink" title="JavaScript 回调"></a>JavaScript 回调</h4><p>回调是作为参数传递给另一个函数的函数。</p>
<p>使用回调，您可以通过回调调用计算器函数（<code>myCalculator</code>），并在计算完成后让计算器函数运行回调：</p>
<h5 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myDisplayer</span>(<span class="params">some</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = some;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myCalculator</span>(<span class="params">num1, num2, myCallback</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = num1 + num2;</span><br><span class="line">  <span class="title function_">myCallback</span>(sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">myCalculator</span>(<span class="number">5</span>, <span class="number">5</span>, myDisplayer);</span><br></pre></td></tr></table></figure>

<p>在上面的例子中， <code>myDisplayer</code> 是函数的名称。</p>
<p>它作为参数传递给 <code>myCalculator()</code>。</p>
<p>当您将函数作为参数传递时，请记住不要使用括号。</p>
<p>正确：myCalculator(5, 5, myDisplayer);</p>
<p>错误：myCalculator(5, 5, myDisplayer());</p>
<h3 id="异步的-JavaScript"><a href="#异步的-JavaScript" class="headerlink" title="异步的 JavaScript"></a>异步的 JavaScript</h3><p>在上面的例子中，<code>myDisplayer</code> 是函数的名称。</p>
<p>它作为参数传递给 <code>myCalculator()</code>。</p>
<p>在现实世界中，回调最常与异步函数一起使用。</p>
<p>一个典型的例子是 JavaScript <code>setTimeout()</code>。</p>
<h4 id="等待超时"><a href="#等待超时" class="headerlink" title="等待超时"></a>等待超时</h4><p>在使用 JavaScript 函数 <code>setTimeout()</code> 时，可以指定超时时执行的回调函数：</p>
<h5 id="实例1-1"><a href="#实例1-1" class="headerlink" title="实例1"></a>实例1</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(myFunction, <span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;I love You !!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的示例中，<code>myFunction</code> 被用作回调。</p>
<p>函数（函数名）作为参数传递给 <code>setTimeout()</code>。</p>
<p>3000 是超时前的毫秒数，所以 3 秒后会调用 <code>myFunction()</code>。</p>
<p>当您将函数作为参数传递时，请记住不要使用括号。</p>
<p>正确：setTimeout(myFunction, 3000);</p>
<p>错误：setTimeout(myFunction(), 3000);</p>
<p>若不将函数的名称作为参数传递给另一个函数，您始终可以传递整个函数：</p>
<h5 id="实例2-1"><a href="#实例2-1" class="headerlink" title="实例2"></a>实例2</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="title function_">myFunction</span>(<span class="string">&quot;I love You !!!&quot;</span>); &#125;, <span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="等待间隔"><a href="#等待间隔" class="headerlink" title="等待间隔"></a>等待间隔</h3><p>在使用 JavaScript 函数 <code>setInterval()</code> 时，可以指定每个间隔执行的回调函数：</p>
<h5 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(myFunction, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span>=</span><br><span class="line">  d.<span class="title function_">getHours</span>() + <span class="string">&quot;:&quot;</span> +</span><br><span class="line">  d.<span class="title function_">getMinutes</span>() + <span class="string">&quot;:&quot;</span> +</span><br><span class="line">  d.<span class="title function_">getSeconds</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的例子中，<code>myFunction</code> 用作回调。</p>
<p>函数（函数名）作为参数传递给 <code>setInterval()</code>。</p>
<p>1000 是间隔之间的毫秒数，因此 <code>myFunction()</code> 将每秒调用一次。</p>
<h3 id="等待文件"><a href="#等待文件" class="headerlink" title="等待文件"></a>等待文件</h3><p>如果您创建函数来加载外部资源（如脚本或文件），则在内容完全加载之前无法使用这些内容。</p>
<p>这是使用回调的最佳时机。</p>
<p>此例加载一个 HTML 文件 (<code>mycar.html</code>)，并在文件完全加载后在网页中显示该 HTML 文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myDisplayer</span>(<span class="params">some</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = some;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getFile</span>(<span class="params">myCallback</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> req = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">  req.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&quot;mycar.html&quot;</span>);</span><br><span class="line">    <span class="comment">//req.onload指的是在加载完成时要执行的动作</span></span><br><span class="line">  req.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="title function_">myCallback</span>(<span class="variable language_">this</span>.<span class="property">responseText</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">myCallback</span>(<span class="string">&quot;Error: &quot;</span> + req.<span class="property">status</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  req.<span class="title function_">send</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getFile</span>(myDisplayer);</span><br></pre></td></tr></table></figure>

<p>在上面的示例中，<code>myDisplayer</code> 用作回调。</p>
<p>函数（函数名）作为参数传递给 <code>getFile()</code>。</p>
<p>以下是 <code>mycar.html</code> 的副本：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img_car.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Nice car&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>A car is a wheeled, self-powered motor vehicle used for transportation.</span><br><span class="line">Most definitions of the term specify that cars are designed to run primarily on roads, to have seating for one to eight people, to typically have four wheels.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>(Wikipedia)<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="JavaScript-Promise"><a href="#JavaScript-Promise" class="headerlink" title="JavaScript Promise"></a>JavaScript Promise</h3><p>“I Promise a Result!”</p>
<p>“Producing code（生产代码）” 是需要一些时间的代码</p>
<p>“Consuming code（消费代码）” 是必须等待结果的代码</p>
<p>Promise 是一个 JavaScript 对象，它链接生成代码和消费代码</p>
<h4 id="JavaScript-Promise-对象"><a href="#JavaScript-Promise-对象" class="headerlink" title="JavaScript Promise 对象"></a>JavaScript Promise 对象</h4><p>JavaScript Promise 对象包含生产代码和对消费代码的调用：</p>
<h5 id="Promise-语法"><a href="#Promise-语法" class="headerlink" title="Promise 语法"></a>Promise 语法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">myResolve, myReject</span>) &#123;</span><br><span class="line"><span class="comment">// &quot;Producing Code&quot;（可能需要一些时间）</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">myResolve</span>(); <span class="comment">// 成功时</span></span><br><span class="line">  <span class="title function_">myReject</span>();  <span class="comment">// 出错时</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;Consuming Code&quot; （必须等待一个兑现的承诺）</span></span><br><span class="line">myPromise.<span class="title function_">then</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">value</span>) &#123; <span class="comment">/* 成功时的代码 */</span> &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123; <span class="comment">/* 出错时的代码 */</span> &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>当执行代码获得结果时，它应该调用两个回调之一：</p>
<table>
<thead>
<tr>
<th align="left">结果</th>
<th align="left">调用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">成功</td>
<td align="left">myResolve(result value)</td>
</tr>
<tr>
<td align="left">出错</td>
<td align="left">myReject(error object)</td>
</tr>
</tbody></table>
<h5 id="Promise-对象属性"><a href="#Promise-对象属性" class="headerlink" title="Promise 对象属性"></a>Promise 对象属性</h5><p>Promise 对象支持两个属性：<em>state</em>(状态) 和 <em>result</em>。</p>
<p>当 Promise 对象 “pending”（工作）时，结果是 undefined。</p>
<p>当 Promise 对象 “fulfilled” 时，结果是一个值。</p>
<p>当一个 Promise 对象是 “rejected” 时，结果是一个错误对象。</p>
<table>
<thead>
<tr>
<th align="left">myPromise.state</th>
<th align="left">myPromise.result</th>
</tr>
</thead>
<tbody><tr>
<td align="left">“pending”</td>
<td align="left">undefined</td>
</tr>
<tr>
<td align="left">“fulfilled”</td>
<td align="left">结果值</td>
</tr>
<tr>
<td align="left">“rejected”</td>
<td align="left">error 对象</td>
</tr>
</tbody></table>
<p>您无法访问 Promise 属性 state 和 result。</p>
<p>您必须使用 Promise 方法来处理 Promise。</p>
<h5 id="如何使用-Promise"><a href="#如何使用-Promise" class="headerlink" title="如何使用 Promise"></a>如何使用 Promise</h5><p>以下是使用 Promise 的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myPromise.<span class="title function_">then</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">value</span>) &#123; <span class="comment">/* 代码成功时 */</span> &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123; <span class="comment">/* 代码出错时 */</span> &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>Promise.then() 有两个参数，一个是成功时的回调，另一个是失败时的回调。</p>
<p>两者都是可选的，因此您可以为成功或失败添加回调。</p>
<h6 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myDisplayer</span>(<span class="params">some</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = some;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">myResolve, myReject</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成代码（这可能需要一些时间）</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="title function_">myResolve</span>(<span class="string">&quot;OK&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">myReject</span>(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">myPromise.<span class="title function_">then</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">value</span>) &#123;<span class="title function_">myDisplayer</span>(value);&#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;<span class="title function_">myDisplayer</span>(error);&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="JavaScript-Promise-实例"><a href="#JavaScript-Promise-实例" class="headerlink" title="JavaScript Promise 实例"></a>JavaScript Promise 实例</h5><p>为了演示 Promise 的使用，我们将使用上一章中的回调实例：</p>
<h6 id="等待超时-1"><a href="#等待超时-1" class="headerlink" title="等待超时"></a>等待超时</h6><ul>
<li><p>使用回调的例子 </p>
<ul>
<li><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;

&lt;h1&gt;JavaScript SetTimeout()&lt;/h1&gt;

&lt;p&gt;等待 3 秒（3000 毫秒）让此页面发生变化。&lt;/p&gt;

&lt;h1 id=&quot;demo&quot;&gt;&lt;/h1&gt;

&lt;script&gt;
    //渲染页面3秒后将会调用myFunction函数
setTimeout(function() &#123; myFunction(&quot;I love You !!!&quot;); &#125;, 3000);
//该函数负责将I love You !!!输出到id为demo的&lt;H1&gt;标签中
function myFunction(value) &#123;
  document.getElementById(&quot;demo&quot;).innerHTML = value;
&#125;
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 使用Promise的例子</span><br><span class="line"></span><br><span class="line">  * ```html</span><br><span class="line">    &lt;!DOCTYPE html&gt;</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;h1&gt;JavaScript Promise&lt;/h1&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;p&gt;等待 3 秒（3000 毫秒）让此页面发生变化。&lt;/p&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;h1 id=&quot;demo&quot;&gt;&lt;/h1&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //在这里使用了我们的Promise</span><br><span class="line">    const myPromise = new Promise(function(myResolve, myReject) &#123;</span><br><span class="line">      setTimeout(function()&#123; myResolve(&quot;I love You !!&quot;); &#125;, 3000);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    myPromise.then(function(value) &#123;</span><br><span class="line">      document.getElementById(&quot;demo&quot;).innerHTML = value;</span><br><span class="line">    &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<h6 id="等待文件-1"><a href="#等待文件-1" class="headerlink" title="等待文件"></a>等待文件</h6><ul>
<li><p>使用回调的例子</p>
<ul>
<li><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;

&lt;h1&gt;JavaScript 回调&lt;/h1&gt;

&lt;p id=&quot;demo&quot;&gt;&lt;/p&gt;

&lt;script&gt;
function myDisplayer(some) &#123;
  document.getElementById(&quot;demo&quot;).innerHTML = some;
&#125;

function getFile(myCallback) &#123;
  let req = new XMLHttpRequest();
  req.open(&#39;GET&#39;, &quot;/demo/js/mycar.html&quot;);
  req.onload = function() &#123;
    if (req.status == 200) &#123;
      myCallback(this.responseText);
    &#125; else &#123;
      myCallback(&quot;Error: &quot; + req.status);
    &#125;
  &#125;
  req.send();
&#125;

getFile(myDisplayer); 
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 使用Promise的例子 </span><br><span class="line"></span><br><span class="line">  * ```html</span><br><span class="line">    &lt;!DOCTYPE html&gt;</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;h1&gt;JavaScript Promise&lt;/h1&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;p id=&quot;demo&quot;&gt;&lt;/p&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    function myDisplayer(some) &#123;</span><br><span class="line">      document.getElementById(&quot;demo&quot;).innerHTML = some;</span><br><span class="line">    &#125;</span><br><span class="line">    //在这里使用了promise</span><br><span class="line">    let myPromise = new Promise(function(myResolve, myReject) &#123;</span><br><span class="line">      let req = new XMLHttpRequest();</span><br><span class="line">      req.open(&#x27;GET&#x27;, &quot;/demo/js/mycar.html&quot;);</span><br><span class="line">      req.onload = function() &#123;</span><br><span class="line">        if (req.status == 200) &#123;</span><br><span class="line">          myResolve(req.response);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          myReject(&quot;File not Found&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      req.send();</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    myPromise.then(</span><br><span class="line">      function(value) &#123;myDisplayer(value);&#125;,</span><br><span class="line">      function(error) &#123;myDisplayer(error);&#125;</span><br><span class="line">    );</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<h6 id="浏览器支持"><a href="#浏览器支持" class="headerlink" title="浏览器支持"></a>浏览器支持</h6><p>ECMAScript 2015，也称为 ES6，引入了 JavaScript Promise 对象。</p>
<p>下表注明了首个完全支持 Promise 对象的浏览器版本：</p>
<table>
<thead>
<tr>
<th align="center">Chrome</th>
<th align="center">IE</th>
<th align="center">Firefox</th>
<th align="center">Safari</th>
<th align="center">Opera</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Chrome 33</td>
<td align="center">Edge 12</td>
<td align="center">Firefox 29</td>
<td align="center">Safari 7.1</td>
<td align="center">Opera 20</td>
</tr>
<tr>
<td align="center">2014 年 2 月</td>
<td align="center">2015 年 7 月</td>
<td align="center">2014 年 4 月</td>
<td align="center">2014 年 9 月</td>
<td align="center">2014 年 3 月</td>
</tr>
</tbody></table>
<h3 id="JavaScript-Async"><a href="#JavaScript-Async" class="headerlink" title="JavaScript Async"></a>JavaScript Async</h3><p>“async and await make promises easier to write”</p>
<p><em>async</em> 使函数返回 Promise</p>
<p><em>await</em> 使函数等待 Promise</p>
<h4 id="Async-语法"><a href="#Async-语法" class="headerlink" title="Async 语法"></a>Async 语法</h4><p>函数前的关键字 <code>async</code> 使函数返回 promise：</p>
<h5 id="实例1-2"><a href="#实例1-2" class="headerlink" title="实例1"></a>实例1</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>等同于：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下是使用 Promise 的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">myFunction</span>().<span class="title function_">then</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">value</span>) &#123; <span class="comment">/* 成功时的代码 */</span> &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123; <span class="comment">/* 出错时的代码 */</span> &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="实例2-2"><a href="#实例2-2" class="headerlink" title="实例2"></a>实例2</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>JavaScript async / await<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">myDisplayer</span>(<span class="params">some</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = some;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//async 使函数返回promise</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;<span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//在这里调用promise返回时的动作</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">myFunction</span>().<span class="title function_">then</span>(</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span>(<span class="params">value</span>) &#123;<span class="title function_">myDisplayer</span>(value);&#125;, <span class="comment">//成功的回调</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;<span class="title function_">myDisplayer</span>(error);&#125; <span class="comment">//失败的回调</span></span></span><br><span class="line"><span class="language-javascript">);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Await-语法"><a href="#Await-语法" class="headerlink" title="Await 语法"></a>Await 语法</h3><p>函数前的关键字 <code>await</code> 使函数等待 promise：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value = <span class="keyword">await</span> promise;</span><br></pre></td></tr></table></figure>

<p><code>await</code> 关键字只能在 <code>async</code> 函数中使用。</p>
<h4 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h4><h5 id="实例1-3"><a href="#实例1-3" class="headerlink" title="实例1"></a>实例1</h5><p>让我们慢慢来学习如何使用它。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JavaScript async / await<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//使函数myDisplay返回Promise对象</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myDisplay</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">myResolve, myReject</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">myResolve</span>(<span class="string">&quot;I love You !!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//等待Promise对象</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="keyword">await</span> myPromise;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">myDisplay</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="等待超时-2"><a href="#等待超时-2" class="headerlink" title="等待超时"></a>等待超时</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>JavaScript async / await<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>请等待 3 秒（3000 毫秒）让此页面发生变化。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- async function myDisplay()：定义了一个名为myDisplay的异步函数。关键字async表明该函数内部包含异步操作，并且该函数会返回一个Promise对象。</span></span><br><span class="line"><span class="comment">在这个异步函数内部，首先创建了一个新的Promise对象myPromise。这个Promise对象接受一个函数作为参数，该函数有两个参数：myResolve和myReject，它们是用于解决（resolve）或拒绝（reject）Promise的回调函数。</span></span><br><span class="line"><span class="comment">在Promise构造函数中，使用了setTimeout模拟了一个异步操作，即在3秒（3000毫秒）后执行myResolve(&quot;I love You !!&quot;)。这意味着在3秒后，Promise会被标记为已解决（fulfilled），并传递字符串&quot;I love You !!&quot;作为结果。</span></span><br><span class="line"><span class="comment">接下来，document.getElementById(&quot;demo&quot;).innerHTML = await myPromise; 这一行代码是关键。这里使用了await关键字来等待myPromise的结果。await只能在async函数内部使用，它会使代码暂停执行，直到等待的Promise完成（resolve或reject）。在这个例子中，它会等待3秒，直到myPromise被解决，然后将解决的值（即&quot;I love You !!&quot;）赋给&lt;h1 id=&quot;demo&quot;&gt;元素的innerHTML，从而改变页面内容。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myDisplay</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">myResolve, myReject</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="title function_">myResolve</span>(<span class="string">&quot;I love You !!&quot;</span>); &#125;, <span class="number">3000</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="keyword">await</span> myPromise;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">myDisplay</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="等待文件-2"><a href="#等待文件-2" class="headerlink" title="等待文件"></a>等待文件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JavaScript async / await<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getFile</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">myResolve, myReject</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> req = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">    req.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&quot;/demo/js/mycar.html&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    req.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (req.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">myResolve</span>(req.<span class="property">response</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">myResolve</span>(<span class="string">&quot;File not Found&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    req.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="keyword">await</span> myPromise;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">getFile</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><ul>
<li>概念:Asynchronous JavaScript And XML，异步的JavaScript和XML。</li>
<li>作用:<ul>
<li>AJAX 是开发者的梦想，因为您能够：<ul>
<li>不刷新页面更新网页</li>
<li>在页面加载后从服务器请求数据</li>
<li>在页面加载后从服务器接收数据</li>
<li>在后台向服务器发送数据</li>
</ul>
</li>
<li>数据交换:通过Ajax可以给服务器发送请求，并获取服务器响应的数据。</li>
<li>异步交互:可以在不重新加载整个页面的情况下，与服务器交换数据并更新部分网页的技术，如:搜索联想、用户名是否可用的校验等等。</li>
</ul>
</li>
</ul>
<h3 id="Ajax实例"><a href="#Ajax实例" class="headerlink" title="Ajax实例"></a>Ajax实例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span> <span class="comment">&lt;!-- 设置文档编码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span> <span class="comment">&lt;!-- 适应移动设备 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax实例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span> <span class="comment">&lt;!-- 注意：应为id=&quot;demo&quot;而非class=&quot;demo&quot;以匹配JS中的getElementById --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>单击按钮，让Ajax改变这段文本<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;changeEdit()&quot;</span>&gt;</span>更改文本<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 定义一个函数，用于通过Ajax请求更改文本内容</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">changeEdit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 创建一个新的XMLHttpRequest对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 设置请求完成后的回调函数</span></span></span><br><span class="line"><span class="language-javascript">            xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 当请求完成（readyState=4）且状态为成功（status=200）时，执行以下代码</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 使用响应文本替换页面中id为&quot;demo&quot;的元素的内容,注：this.responseText是在使用XMLHttpRequest对象进行Ajax请求时的一个属性。这个属性包含了从服务器返回的响应文本内容。</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 初始化请求，设置请求类型、URL及异步标志（true表示异步）</span></span></span><br><span class="line"><span class="language-javascript">            xhttp.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;ajax_info.txt&#x27;</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 发送请求</span></span></span><br><span class="line"><span class="language-javascript">            xhttp.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240625165526714.png" alt="image-20240625165526714"></p>
<h3 id="什么是-AJAX？"><a href="#什么是-AJAX？" class="headerlink" title="什么是 AJAX？"></a>什么是 AJAX？</h3><p>AJAX &#x3D; <em>A</em>synchronous <em>J</em>avaScript <em>A</em>nd <em>X</em>ML.</p>
<p>AJAX 并非编程语言。</p>
<p>AJAX 仅仅组合了：</p>
<ul>
<li>浏览器内建的 XMLHttpRequest 对象（从 web 服务器请求数据）</li>
<li>JavaScript 和 HTML DOM（显示或使用数据）</li>
</ul>
<p>Ajax 是一个令人误导的名称。Ajax 应用程序可能使用 XML 来传输数据，但将数据作为纯文本或 JSON 文本传输也同样常见。</p>
<p>Ajax 允许通过与场景后面的 Web 服务器交换数据来异步更新网页。这意味着可以更新网页的部分，而不需要重新加载整个页面。</p>
<h3 id="AJAX-如何工作"><a href="#AJAX-如何工作" class="headerlink" title="AJAX 如何工作"></a>AJAX 如何工作</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/ajax.gif" alt="AJAX"></p>
<ol>
<li>网页中发生一个事件（页面加载、按钮点击）</li>
<li>由 JavaScript 创建 XMLHttpRequest 对象</li>
<li>XMLHttpRequest 对象向 web 服务器发送请求</li>
<li>服务器处理该请求</li>
<li>服务器将响应发送回网页</li>
<li>由 JavaScript 读取响应</li>
<li>由 JavaScript 执行正确的动作（比如更新页面）</li>
</ol>
<h3 id="AJAX-XMLHttpRequest-对象"><a href="#AJAX-XMLHttpRequest-对象" class="headerlink" title="AJAX - XMLHttpRequest 对象"></a>AJAX - XMLHttpRequest 对象</h3><h4 id="XMLHttpRequest-对象是-AJAX-的基石。"><a href="#XMLHttpRequest-对象是-AJAX-的基石。" class="headerlink" title="XMLHttpRequest 对象是 AJAX 的基石。"></a><strong>XMLHttpRequest 对象是 AJAX 的基石。</strong></h4><ol>
<li>创建 XMLHttpRequest 对象</li>
<li>定义回调函数</li>
<li>打开 XMLHttpRequest 对象</li>
<li>向服务器发送请求</li>
</ol>
<h4 id="XMLHttpRequest-对象"><a href="#XMLHttpRequest-对象" class="headerlink" title="XMLHttpRequest 对象"></a>XMLHttpRequest 对象</h4><p>所有现代浏览器都支持 <em>XMLHttpRequest 对象</em>。</p>
<p>XMLHttpRequest 对象可用于在后台与 Web 服务器交换数据。这意味着可以更新网页的部分内容，而无需重新加载整个页面。</p>
<h5 id="创建-XMLHttpRequest-对象"><a href="#创建-XMLHttpRequest-对象" class="headerlink" title="创建 XMLHttpRequest 对象"></a>创建 XMLHttpRequest 对象</h5><p>所有现代浏览器（Chrome、Firefox、IE、Edge、Safari、Opera）都有内置的 <em>XMLHttpRequest 对象</em>。</p>
<p>创建 XMLHttpRequest 对象的语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">variable = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br></pre></td></tr></table></figure>

<h5 id="定义回调函数"><a href="#定义回调函数" class="headerlink" title="定义回调函数"></a>定义回调函数</h5><p>回调函数是作为参数传递给另一个函数的函数。</p>
<p>在这种情况下，回调函数应包含响应准备就绪时要执行的代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 当响应准备就绪时要做什么</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h5><p>如需向服务器发送请求，您可以使用 XMLHttpRequest 对象的 <code>open()</code> 和 <code>send()</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<h5 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 XMLHttpRequest 对象</span></span><br><span class="line"><span class="keyword">const</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义回调函数</span></span><br><span class="line">xhttp.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 您可以在这里使用数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送请求</span></span><br><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<h4 id="XMLHttpRequest-对象方法"><a href="#XMLHttpRequest-对象方法" class="headerlink" title="XMLHttpRequest 对象方法"></a>XMLHttpRequest 对象方法</h4><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">new XMLHttpRequest()</td>
<td align="left">创建新的 XMLHttpRequest 对象。</td>
</tr>
<tr>
<td align="left">abort()</td>
<td align="left">取消当前请求。</td>
</tr>
<tr>
<td align="left">getAllResponseHeaders()</td>
<td align="left">返回头部信息。</td>
</tr>
<tr>
<td align="left">getResponseHeader()</td>
<td align="left">返回特定的头部信息。</td>
</tr>
<tr>
<td align="left">open(<em>method</em>, <em>url</em>, <em>async</em>, <em>user</em>, <em>psw</em>)</td>
<td align="left">规定请求。<em>method</em>：请求类型 GET 或 POST<em>url</em>：文件位置<em>async</em>：true（异步）或 false（同步）<em>user</em>：可选的用户名<em>psw</em>：可选的密码</td>
</tr>
<tr>
<td align="left">send()</td>
<td align="left">向服务器发送请求，用于 GET 请求。</td>
</tr>
<tr>
<td align="left">send(string)</td>
<td align="left">向服务器发送请求，用于 POST 请求。</td>
</tr>
<tr>
<td align="left">setRequestHeader()</td>
<td align="left">将标签&#x2F;值对添加到要发送的标头。</td>
</tr>
</tbody></table>
<h4 id="XMLHttpRequest-对象属性"><a href="#XMLHttpRequest-对象属性" class="headerlink" title="XMLHttpRequest 对象属性"></a>XMLHttpRequest 对象属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">onload</td>
<td align="left">定义接收到（加载）请求时要调用的函数。</td>
</tr>
<tr>
<td align="left">onreadystatechange</td>
<td align="left">定义当 readyState 属性发生变化时调用的函数。</td>
</tr>
<tr>
<td align="left">readyState</td>
<td align="left">保存 XMLHttpRequest 的状态。0：请求未初始化1：服务器连接已建立2：请求已收到3：正在处理请求4：请求已完成且响应已就绪</td>
</tr>
<tr>
<td align="left">responseText</td>
<td align="left">以字符串形式返回响应数据。</td>
</tr>
<tr>
<td align="left">responseXML</td>
<td align="left">以 XML 数据返回响应数据。</td>
</tr>
<tr>
<td align="left">status</td>
<td align="left">返回请求的状态号200: “OK”403: “Forbidden”404: “Not Found”如需完整列表请访问 <a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tags/html_ref_httpmessages.asp">Http 消息参考手册</a></td>
</tr>
<tr>
<td align="left">statusText</td>
<td align="left">返回状态文本（比如 “OK” 或 “Not Found”）</td>
</tr>
</tbody></table>
<h5 id="onload-属性"><a href="#onload-属性" class="headerlink" title="onload 属性"></a>onload 属性</h5><p>使用 XMLHttpRequest 对象时，您可以定义一个回调函数，以便在请求收到答复时执行。</p>
<p>请在 XMLHttpRequest 对象的 <code>onload</code> 属性中定义该函数：</p>
<h6 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">responseText</span>;</span><br><span class="line">&#125;</span><br><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<h5 id="多个回调函数"><a href="#多个回调函数" class="headerlink" title="多个回调函数"></a>多个回调函数</h5><p>如果网站中有多个 AJAX 任务，则应创建一个执行 XMLHttpRequest 对象的函数，并为每个 AJAX 任务创建一个回调函数。</p>
<p>函数调用应包含 URL 以及响应准备就绪时要调用的函数。</p>
<h6 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">loadDoc</span>(<span class="string">&quot;url-1&quot;</span>, myFunction1);</span><br><span class="line"></span><br><span class="line"><span class="title function_">loadDoc</span>(<span class="string">&quot;url-2&quot;</span>, myFunction2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadDoc</span>(<span class="params">url, cFunction</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">  xhttp.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;<span class="title function_">cFunction</span>(<span class="variable language_">this</span>);&#125;</span><br><span class="line">  xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, url);</span><br><span class="line">  xhttp.<span class="title function_">send</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction1</span>(<span class="params">xhttp</span>) &#123;</span><br><span class="line">  <span class="comment">// 这里是动作</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction2</span>(<span class="params">xhttp</span>) &#123;</span><br><span class="line">  <span class="comment">// 这里是动作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>顺带一提，上面的this指的是什么呢？其实this就是如下图所示，是一个XMLHttpRequest对象</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240625171203531.png" alt="image-20240625171203531"></p>
<h5 id="onreadystatechange-属性"><a href="#onreadystatechange-属性" class="headerlink" title="onreadystatechange 属性"></a>onreadystatechange 属性</h5><p><code>readyState</code> 属性保存 XMLHttpRequest 的状态。</p>
<p><code>onreadystatechange</code> 属性定义了一个回调函数，当 readyState 改变时执行该函数。</p>
<p><code>status</code> 属性和 <code>statusText</code> 属性保存 XMLHttpRequest 对象的状态。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">onreadystatechange</td>
<td align="left">定义当 readyState 属性改变时调用的函数。</td>
</tr>
<tr>
<td align="left">readyState</td>
<td align="left">保存 XMLHttpRequest 的状态。0：请求未初始化1：服务器连接已建立2：请求已收到3：正在处理请求4：请求已完成且响应已就绪</td>
</tr>
<tr>
<td align="left">status</td>
<td align="left">返回请求的状态号200: “OK”403: “Forbidden”404: “Not Found”如需完整列表请访问 <a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tags/html_ref_httpmessages.asp">Http 消息参考手册</a></td>
</tr>
<tr>
<td align="left">statusText</td>
<td align="left">返回状态文本（比如 “OK” 或 “Not Found”）。</td>
</tr>
</tbody></table>
<p>每次 readyState 改变时都会调用 onreadystatechange 函数。</p>
<p>当 readyState 为 <code>4</code> 且 status 为 <code>200</code> 时，响应就绪：</p>
<h6 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadDoc</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">  xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> =</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">responseText</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>);</span><br><span class="line">  xhttp.<span class="title function_">send</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>onreadystatechange 事件被触发了四次（1-4），每次 readyState 变化一次。</p>
<h4 id="XMLHttpRequest-对象用于同服务器交换数据。"><a href="#XMLHttpRequest-对象用于同服务器交换数据。" class="headerlink" title="XMLHttpRequest 对象用于同服务器交换数据。"></a><strong>XMLHttpRequest 对象用于同服务器交换数据。</strong></h4><h5 id="向服务器发送请求"><a href="#向服务器发送请求" class="headerlink" title="向服务器发送请求"></a>向服务器发送请求</h5><p>如需向服务器发送请求，我们使用 XMLHttpRequest 对象的 <code>open()</code> 和 <code>send()</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">open(<em>method</em>, <em>url</em>, <em>async</em>)</td>
<td align="left">规定请求的类型<em>method</em>：请求的类型：GET 还是 POST<em>url</em>：服务器（文件）位置<em>async</em>：true（异步）或 false（同步）</td>
</tr>
<tr>
<td align="left">send()</td>
<td align="left">向服务器发送请求（用于 GET）</td>
</tr>
<tr>
<td align="left">send(<em>string</em>)</td>
<td align="left">向服务器发送请求（用于 POST）</td>
</tr>
</tbody></table>
<h5 id="GET-还是-POST？"><a href="#GET-还是-POST？" class="headerlink" title="GET 还是 POST？"></a>GET 还是 POST？</h5><p>GET 比 POST 更简单更快，可用于大多数情况下。</p>
<p>不过，请在以下情况始终使用 POST：</p>
<ul>
<li>缓存文件不是选项（更新服务器上的文件或数据库）</li>
<li>向服务器发送大量数据（POST 无大小限制）</li>
<li>发送用户输入（可包含未知字符），POST 比 GET 更强大更安全</li>
</ul>
<h5 id="GET-请求"><a href="#GET-请求" class="headerlink" title="GET 请求"></a>GET 请求</h5><p>一条简单的 GET 请求：</p>
<h6 id="实例1-4"><a href="#实例1-4" class="headerlink" title="实例1"></a>实例1</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;demo_get.asp&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<p>在上面的例子中，您可能会获得一个缓存的结果。为了避免此情况，请向 URL 添加一个唯一的 ID：</p>
<h6 id="实例2-3"><a href="#实例2-3" class="headerlink" title="实例2"></a>实例2</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;demo_get.asp?t=&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>(), <span class="literal">true</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<p>如果您需要用 GET 方法来发送信息，请向 URL 添加这些信息：</p>
<h6 id="实例3"><a href="#实例3" class="headerlink" title="实例3"></a>实例3</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//携带query形式的参数</span></span><br><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;demo_get2.asp?fname=Bill&amp;lname=Gates&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<h5 id="POST-请求"><a href="#POST-请求" class="headerlink" title="POST 请求"></a>POST 请求</h5><p>一条简单的 POST 请求：</p>
<h6 id="实例1-5"><a href="#实例1-5" class="headerlink" title="实例1"></a>实例1</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;demo_post.asp&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<p>如需像 HTML 表单那样 POST 数据，请通过 <code>setRequestHeader()</code> 添加一个 HTTP 头部。请在 <code>send()</code> 方法中规定您需要发送的数据：</p>
<h6 id="实例2-4"><a href="#实例2-4" class="headerlink" title="实例2"></a>实例2</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;ajax_test.asp&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">xhttp.<span class="title function_">setRequestHeader</span>(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>(<span class="string">&quot;fname=Bill&amp;lname=Gates&quot;</span>);</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">setRequestHeader(<em>header</em>, <em>value</em>)</td>
<td align="left">向请求添加 HTTP 头部<em>header</em>：规定头部名称<em>value</em>：规定头部值</td>
</tr>
</tbody></table>
<h4 id="url-服务器上的文件"><a href="#url-服务器上的文件" class="headerlink" title="url - 服务器上的文件"></a><em>url</em> - 服务器上的文件</h4><p>open() 方法的 <em>url</em> 参数，是服务器上文件的地址：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_test.asp&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<p>该文件可以是任何类型的文件，如 .txt 和 .xml，或服务器脚本文件，如 .asp 和 .php（它们可以在发送回响应之前在服务器执行操作）。</p>
<h4 id="异步-true-还是-false？"><a href="#异步-true-还是-false？" class="headerlink" title="异步 - true 还是 false？"></a>异步 - true 还是 false？</h4><p>如需异步发送请求，<code>open()</code> 方法的 <em>async</em> 参数必须设置为 <code>true</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_test.asp&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<p>发送异步请求对 web 开发人员来说是一个巨大的进步。服务器上执行的许多任务都非常耗时。在 AJAX 之前，此操作可能会导致应用程序挂起或停止。</p>
<p>通过异步发送，JavaScript 不必等待服务器响应，而是可以：</p>
<ul>
<li>在等待服务器响应时执行其他脚本</li>
<li>当响应就绪时处理响应</li>
</ul>
<h4 id="onreadystatechange-属性-1"><a href="#onreadystatechange-属性-1" class="headerlink" title="onreadystatechange 属性"></a>onreadystatechange 属性</h4><p>通过 XMLHttpRequest 对象，您可以定义当请求接收到应答时所执行的函数。</p>
<p>这个函数是在 XMLHttpResponse 对象的 <code>onreadystatechange</code> 属性中定义的：</p>
<h5 id="实例-7"><a href="#实例-7" class="headerlink" title="实例"></a>实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">responseText</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<h4 id="同步请求"><a href="#同步请求" class="headerlink" title="同步请求"></a>同步请求</h4><p>如需执行同步的请求，请把 <code>open()</code> 方法中的第三个参数设置为 <code>false</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>有时 async &#x3D; false 用于快速测试。你也会在更老的 JavaScript 代码中看到同步请求。</p>
<p>由于代码将等待服务器完成，所以不需要 onreadystatechange 函数：</p>
<h5 id="实例-8"><a href="#实例-8" class="headerlink" title="实例"></a>实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>();</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = xhttp.<span class="property">responseText</span>;</span><br></pre></td></tr></table></figure>

<p>我们不推荐同步的 XMLHttpRequest (async &#x3D; false)，因为 JavaScript 将停止执行直到服务器响应就绪。如果服务器繁忙或缓慢，应用程序将挂起或停止。</p>
<p>同步 XMLHttpRequest 正在从 Web 标准中移除，但是这个过程可能需要很多年。</p>
<p>现代开发工具被鼓励对使用同步请求做出警告，并且当这种情况发生时，可能会抛出 InvalidAccessError 异常。</p>
<p>同步和异步：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240504154717543.png" alt="image-20240504154717543"></p>
<h3 id="AJAX-服务器响应"><a href="#AJAX-服务器响应" class="headerlink" title="AJAX - 服务器响应"></a>AJAX - 服务器响应</h3><h4 id="onreadystatechange-属性-2"><a href="#onreadystatechange-属性-2" class="headerlink" title="onreadystatechange 属性"></a>onreadystatechange 属性</h4><p><code>readyState</code> 属性存留 XMLHttpRequest 的状态。</p>
<p><code>onreadystatechange</code> 属性定义当 readyState 发生变化时执行的函数。</p>
<p><code>status</code> 属性和 <code>statusText</code> 属性存有 XMLHttpRequest 对象的状态。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">onreadystatechange</td>
<td align="left">定义了当 readyState 属性发生改变时所调用的函数。</td>
</tr>
<tr>
<td align="left">readyState</td>
<td align="left">保存了 XMLHttpRequest 的状态。0: 请求未初始化1: 服务器连接已建立2: 请求已接收3: 正在处理请求4: 请求已完成且响应已就绪</td>
</tr>
<tr>
<td align="left">status</td>
<td align="left">200: “OK”403: “Forbidden”404: “Page not found”如需完整列表，请访问 <a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tags/html_ref_httpmessages.asp">Http 消息参考手册</a></td>
</tr>
<tr>
<td align="left">statusText</td>
<td align="left">返回状态文本（例如 “OK” 或 “Not Found”）</td>
</tr>
</tbody></table>
<p><em>每当</em> readyState 发生变化时就会调用 onreadystatechange 函数。当 <code>readyState</code> 为 <code>4</code>，<code>status</code> 为 <code>200</code> 时，响应就绪：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>XMLHttpRequest 对象<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;loadDoc()&quot;</span>&gt;</span>更改内容<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">loadDoc</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">  xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> =</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript">  xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;/demo/js/ajax_info.txt&quot;</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">  xhttp.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注释：</strong><code>onreadystatechange</code> 被触发五次（0-4），每次 <code>readyState</code> 都发生变化。</p>
<p>回调函数是一种作为参数被传递到另一个函数的函数。</p>
<p>如果您的网站中有多个 AJAX 任务，那么您应该创建一个执行 XMLHttpRequest 对象的函数，以及一个供每个 AJAX 任务的回调函数。</p>
<p>该函数应当包含 URL 以及当响应就绪时调用的函数。</p>
<h5 id="实例-9"><a href="#实例-9" class="headerlink" title="实例"></a>实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">loadDoc</span>(<span class="string">&quot;url-1&quot;</span>, myFunction1);</span><br><span class="line"></span><br><span class="line"><span class="title function_">loadDoc</span>(<span class="string">&quot;url-2&quot;</span>, myFunction2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadDoc</span>(<span class="params">url, cFunction</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> xhttp;</span><br><span class="line">  xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">  xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="title function_">cFunction</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, url, <span class="literal">true</span>);</span><br><span class="line">  xhttp.<span class="title function_">send</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction1</span>(<span class="params">xhttp</span>) &#123;</span><br><span class="line">  <span class="comment">// 行动在这里</span></span><br><span class="line"> &#125; </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction2</span>(<span class="params">xhttp</span>) &#123;</span><br><span class="line">  <span class="comment">// 行动在这里</span></span><br><span class="line"> &#125; </span><br></pre></td></tr></table></figure>

<h4 id="服务器响应属性"><a href="#服务器响应属性" class="headerlink" title="服务器响应属性"></a>服务器响应属性</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">responseText</td>
<td align="left">获取字符串形式的响应数据</td>
</tr>
<tr>
<td align="left">responseXML</td>
<td align="left">获取 XML 数据形式的响应数据</td>
</tr>
</tbody></table>
<h5 id="responseText-属性"><a href="#responseText-属性" class="headerlink" title="responseText 属性"></a>responseText 属性</h5><p><code>responseText</code> 属性以 JavaScript 字符串的形式返回服务器响应，因此您可以这样使用它：</p>
<h6 id="实例-10"><a href="#实例-10" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = xhttp.<span class="property">responseText</span>;</span><br></pre></td></tr></table></figure>

<h5 id="responseXML-属性"><a href="#responseXML-属性" class="headerlink" title="responseXML 属性"></a>responseXML 属性</h5><p>XML HttpRequest 对象有一个內建的 XML 解析器。</p>
<p><code>ResponseXML</code> 属性以 XML DOM 对象返回服务器响应。</p>
<p>使用此属性，您可以把响应<em>解析</em>为 XML DOM 对象：</p>
<h6 id="实例-11"><a href="#实例-11" class="headerlink" title="实例"></a>实例</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>XMLHttpRequest 对象<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> xhttp, xmlDoc, txt, x, i;</span></span><br><span class="line"><span class="language-javascript">xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    xmlDoc = <span class="variable language_">this</span>.<span class="property">responseXML</span>;</span></span><br><span class="line"><span class="language-javascript">    txt = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    x = xmlDoc.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;ARTIST&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; x.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">      txt = txt + x[i].<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">nodeValue</span> + <span class="string">&quot;&lt;br&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = txt;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;music_list.xml&quot;</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">xhttp.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240625174125862.png" alt="image-20240625174125862"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240625174147547.png" alt="image-20240625174147547"></p>
<h3 id="服务器响应方法"><a href="#服务器响应方法" class="headerlink" title="服务器响应方法"></a>服务器响应方法</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">getResponseHeader()</td>
<td align="left">从服务器返回特定的头部信息</td>
</tr>
<tr>
<td align="left">getAllResponseHeaders()</td>
<td align="left">从服务器返回所有头部信息</td>
</tr>
</tbody></table>
<h4 id="getAllResponseHeaders-方法"><a href="#getAllResponseHeaders-方法" class="headerlink" title="getAllResponseHeaders() 方法"></a>getAllResponseHeaders() 方法</h4><p><code>getAllResponseHeaders()</code> 方法返回所有来自服务器响应的头部信息。</p>
<h5 id="实例-12"><a href="#实例-12" class="headerlink" title="实例"></a>实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="title function_">getAllResponseHeaders</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="getResponseHeader-方法"><a href="#getResponseHeader-方法" class="headerlink" title="getResponseHeader() 方法"></a>getResponseHeader() 方法</h4><p><code>getResponseHeader()</code> 方法返回来自服务器响应的特定头部信息。</p>
<h5 id="实例-13"><a href="#实例-13" class="headerlink" title="实例"></a>实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="title function_">getResponseHeader</span>(<span class="string">&quot;Last-Modified&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">xhttp.<span class="title function_">send</span>(); </span><br></pre></td></tr></table></figure>

<h3 id="AJAX-可用于同-XML-文件进行交互式通信。"><a href="#AJAX-可用于同-XML-文件进行交互式通信。" class="headerlink" title="AJAX 可用于同 XML 文件进行交互式通信。"></a><strong>AJAX 可用于同 XML 文件进行交互式通信。</strong></h3><p>实例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;loadDoc()&quot;</span>&gt;</span>获取CD<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> loadDoc = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//调用响应准备就绪时的函数</span></span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> ==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//调用回调函数</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">MyFunction</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&#x27;music_list.xml&#x27;</span>,<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="title function_">send</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">MyFunction</span>(<span class="params">xml</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> i;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xml);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> xmlDoc = xml.<span class="property">responseXML</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xmlDoc);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> table = <span class="string">&#x27;&lt;tr&gt;&lt;th&gt;艺术家&lt;/th&gt;&lt;th&gt;曲目&lt;/th&gt;&lt;/tr&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> x = xmlDoc.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;TRACK&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; x.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//通过拼接字符串来完成表结构的构建</span></span></span><br><span class="line"><span class="language-javascript">        table += <span class="string">&#x27;&lt;tr&gt;&lt;td&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">       x[i].<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;ARTIST&quot;</span>)[<span class="number">0</span>].<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">nodeValue</span> + <span class="string">&#x27;&lt;/td&gt;&lt;td&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">        x[i].<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;TITLE&#x27;</span>)[<span class="number">0</span>].<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">nodeValue</span> +<span class="string">&#x27;&lt;/td&gt;&lt;/tr&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#demo&quot;</span>).<span class="property">innerHTML</span> = table;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240625181731222.png" alt="image-20240625181731222"></p>
<h4 id="XML-应用程序"><a href="#XML-应用程序" class="headerlink" title="XML 应用程序"></a>XML 应用程序</h4><p><strong>本章演示使用 XML、HTTP、DOM 以及 JavaScript 的 HTML 应用程序。</strong></p>
<h5 id="在-HTML-div-元素中显示第一首曲子"><a href="#在-HTML-div-元素中显示第一首曲子" class="headerlink" title="在 HTML div 元素中显示第一首曲子"></a>在 HTML div 元素中显示第一首曲子</h5><p>本例使用一个函数在 id&#x3D;”displayMUSIC” 的 HTML 元素中显示第一首歌曲：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>displayMusic<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">displayMusic</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">displayMusic</span>(<span class="params">i</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">MyFunction</span>(<span class="variable language_">this</span>,i)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="title function_">open</span>(<span class="string">&#x27;Get&#x27;</span>,<span class="string">&#x27;music_list.xml&#x27;</span>,<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="title function_">send</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">function</span>  <span class="title function_">MyFunction</span>(<span class="params">xml,i</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> ul = <span class="string">&#x27;&lt;ul&gt;&lt;/ul&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> responseObj = xml.<span class="property">responseXML</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> x = responseObj.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;TRACK&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span></span><br><span class="line"><span class="language-javascript">        ul =    ul+ <span class="string">&#x27;&lt;li&gt;&#x27;</span> + x[i].<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;TITLE&#x27;</span>)[<span class="number">0</span>].<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">nodeValue</span> + <span class="string">&#x27;&lt;/li&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&#x27;&lt;li&gt;&#x27;</span> + x[i].<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;ARTIST&#x27;</span>)[<span class="number">0</span>].<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">nodeValue</span> + <span class="string">&#x27;&lt;/li&gt;&#x27;</span> </span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = ul;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x[i].<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;TITLE&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">   &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JavaScript/image-20240625185731110.png" alt="image-20240625185731110"></p>
<h5 id="在曲目之间导航"><a href="#在曲目之间导航" class="headerlink" title="在曲目之间导航"></a>在曲目之间导航</h5><p>如需在上例中的曲目间导航，请添加 next() 和 previous() 函数：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>displayMusic<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;next()&quot;</span>&gt;</span>下一首歌曲<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;previous()&quot;</span>&gt;</span>上一首歌曲<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> i = <span class="number">0</span>, len;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">displayMusic</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">displayMusic</span>(<span class="params">i</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> xhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">MyFunction</span>(<span class="variable language_">this</span>,i)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="title function_">open</span>(<span class="string">&#x27;Get&#x27;</span>,<span class="string">&#x27;music_list.xml&#x27;</span>,<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript">        xhttp.<span class="title function_">send</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">function</span>  <span class="title function_">MyFunction</span>(<span class="params">xml,i</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> ul = <span class="string">&#x27;&lt;ul&gt;&lt;/ul&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> responseObj = xml.<span class="property">responseXML</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> x = responseObj.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;TRACK&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        len = x.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span></span><br><span class="line"><span class="language-javascript">        ul =    ul+ <span class="string">&#x27;&lt;li&gt;&#x27;</span> + x[i].<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;TITLE&#x27;</span>)[<span class="number">0</span>].<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">nodeValue</span> + <span class="string">&#x27;&lt;/li&gt;&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&#x27;&lt;li&gt;&#x27;</span> + x[i].<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;ARTIST&#x27;</span>)[<span class="number">0</span>].<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">nodeValue</span> + <span class="string">&#x27;&lt;/li&gt;&#x27;</span> </span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>).<span class="property">innerHTML</span> = ul;</span></span><br><span class="line"><span class="language-javascript">   &#125;</span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">function</span> <span class="title function_">next</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//下一首，除非到达最后一首停下，由于len =x.length，当 i = len-1时，比如一共8首歌，当i=7时，即是最后一首，这时7 = 8-1故不再执行，并且到达了最后一首歌的位置</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span>(i &lt; len -<span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        i++;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">displayMusic</span>(i)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   &#125;</span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">function</span> <span class="title function_">previous</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">     <span class="comment">//当i=0时，也就是位于第一首歌的位置时，上一首是不管事的只能下一首</span></span></span><br><span class="line"><span class="language-javascript">    i--;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">displayMusic</span>(i)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">   &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h3><p>基础语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="comment">//请求方式</span></span><br><span class="line">    <span class="attr">method</span>:</span><br><span class="line">    <span class="comment">//请求地址</span></span><br><span class="line">    <span class="attr">url</span>:</span><br><span class="line">    <span class="comment">//请求参数</span></span><br><span class="line">    <span class="attr">data</span>:&#123;<span class="comment">/*post求情用data*/</span>&#125;</span><br><span class="line">    <span class="attr">params</span>:&#123;<span class="comment">/*get请求用params*/</span>&#125;</span><br><span class="line">    <span class="comment">//回调函数</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">loh</span>(res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">LiSir</div><div class="post-copyright__author_desc">心怀远方</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/07/30/JavaScript/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/07/30/JavaScript/')">JavaScript</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/07/30/JavaScript/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=JavaScript&amp;url=http://example.com/2024/07/30/JavaScript/&amp;pic=/img/default_cover.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">LiSir</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/JS/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JS<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/default_cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2024/07/26/uni-app%E6%A1%86%E6%9E%B6%E4%B9%8B%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">uni-app框架之网易云音乐</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript"><span class="toc-number">1.</span> <span class="toc-text">JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JS%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">JS引入方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JS%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">JS基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E4%B9%A6%E5%86%99%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">1、书写语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.2.1.0.1.</span> <span class="toc-text">输出语句</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">2、变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">3、数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.1.2.1.</span> <span class="toc-text">原始类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.2.1.2.2.</span> <span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">1.2.1.2.3.</span> <span class="toc-text">流程控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F"><span class="toc-number">1.2.1.2.4.</span> <span class="toc-text">冒泡排序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89JS%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">3）JS函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">1、函数的定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2、匿名函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%89JS%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.</span> <span class="toc-text">4）JS对象</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Array-%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.0.1.</span> <span class="toc-text">Array(数组对象)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#String%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.0.2.</span> <span class="toc-text">String对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#json%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.0.3.</span> <span class="toc-text">json对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BOM%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.0.4.</span> <span class="toc-text">BOM对象</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Window%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.0.4.1.</span> <span class="toc-text">Window对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Location%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.0.4.2.</span> <span class="toc-text">Location对象</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DOM%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.0.5.</span> <span class="toc-text">DOM对象</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%89JS%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="toc-number">1.2.4.</span> <span class="toc-text">5）JS事件监听</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">常见事件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%BC%89%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.5.</span> <span class="toc-text">6）变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1%E3%80%81%E5%8F%98%E9%87%8F%E7%9A%84%E8%B5%8B%E5%80%BC"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">6.1、变量的赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2%E3%80%81var%E5%92%8Clet%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">6.2、var和let的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%EF%BC%89WebAPIS"><span class="toc-number">1.2.6.</span> <span class="toc-text">7）WebAPIS</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-1%E3%80%81webAPI%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%86"><span class="toc-number">1.2.6.0.1.</span> <span class="toc-text">7.1、webAPI基本认识</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#7-1-1%E3%80%81%E4%BD%9C%E7%94%A8%E5%92%8C%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.6.0.1.1.</span> <span class="toc-text">7.1.1、作用和分类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-1-2%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFDOM"><span class="toc-number">1.2.6.0.1.2.</span> <span class="toc-text">7.1.2、什么是DOM</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-1-3%E3%80%81DOM%E6%A0%91"><span class="toc-number">1.2.6.0.1.3.</span> <span class="toc-text">7.1.3、DOM树</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-1-4%E3%80%81DOM%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.6.0.1.4.</span> <span class="toc-text">7.1.4、DOM对象</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2%E3%80%81%E8%8E%B7%E5%8F%96DOM%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.6.0.2.</span> <span class="toc-text">7.2、获取DOM对象</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#7-2-1%E3%80%81%E6%A0%B9%E6%8D%AECSS%E9%80%89%E6%8B%A9%E5%99%A8%E6%9D%A5%E8%8E%B7%E5%8F%96DOM%E5%85%83%E7%B4%A0"><span class="toc-number">1.2.6.0.2.1.</span> <span class="toc-text">7.2.1、根据CSS选择器来获取DOM元素</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-2-2%E3%80%81%E5%85%B6%E4%BB%96%E8%8E%B7%E5%8F%96DOM%E5%85%83%E7%B4%A0%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.6.0.2.2.</span> <span class="toc-text">7.2.2、其他获取DOM元素的方法</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-3%E3%80%81%E6%93%8D%E4%BD%9C%E5%85%83%E7%B4%A0%E5%86%85%E5%AE%B9"><span class="toc-number">1.2.6.0.3.</span> <span class="toc-text">7.3、操作元素内容</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#7-3-2%E3%80%81%E5%AF%B9%E8%B1%A1-innerHtml%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.6.0.3.1.</span> <span class="toc-text">7.3.2、对象.innerHtml属性</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-3-3%E3%80%81getElementById-%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.6.0.3.2.</span> <span class="toc-text">7.3.3、getElementById 方法</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4%E3%80%81JavaScript-%E9%AA%8C%E8%AF%81-API"><span class="toc-number">1.2.6.0.4.</span> <span class="toc-text">7.4、JavaScript 验证 API</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E9%AA%8C%E8%AF%81-DOM-%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.6.0.4.1.</span> <span class="toc-text">约束验证 DOM 方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E9%AA%8C%E8%AF%81-DOM-%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.6.0.4.2.</span> <span class="toc-text">约束验证 DOM 属性</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%89%E6%95%88%E6%80%A7%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.6.0.4.3.</span> <span class="toc-text">有效性属性</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-5%E3%80%81Web-History-API"><span class="toc-number">1.2.6.0.5.</span> <span class="toc-text">7.5、Web History API</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#History-back-%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.6.0.5.1.</span> <span class="toc-text">History back() 方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#History-go-%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.6.0.5.2.</span> <span class="toc-text">History go() 方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#History-%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.6.0.5.3.</span> <span class="toc-text">History 对象属性</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#History-%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.6.0.5.4.</span> <span class="toc-text">History 对象方法</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-6%E3%80%81Web-Storage-API"><span class="toc-number">1.2.6.0.6.</span> <span class="toc-text">7.6、Web Storage API</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#localStorage-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.6.0.6.1.</span> <span class="toc-text">localStorage 对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#sessionStorage-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.6.0.6.2.</span> <span class="toc-text">sessionStorage 对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Storage-%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.6.0.6.3.</span> <span class="toc-text">Storage 对象属性和方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Web-Storage-API-%E7%9B%B8%E5%85%B3%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.2.6.0.6.4.</span> <span class="toc-text">Web Storage API 相关页面</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-7%E3%80%81Web-Worker-API"><span class="toc-number">1.2.6.0.7.</span> <span class="toc-text">7.7、Web Worker API</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Web-Worker-%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.6.0.7.1.</span> <span class="toc-text">创建 Web Worker 文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Web-Worker-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.6.0.7.2.</span> <span class="toc-text">创建 Web Worker 对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BB%88%E6%AD%A2-Web-Worker"><span class="toc-number">1.2.6.0.7.3.</span> <span class="toc-text">终止 Web Worker</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%87%8D%E7%94%A8-Web-Worker"><span class="toc-number">1.2.6.0.7.4.</span> <span class="toc-text">重用 Web Worker</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Web-Worker-%E5%92%8C-DOM"><span class="toc-number">1.2.6.0.7.5.</span> <span class="toc-text">Web Worker 和 DOM</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-8%E3%80%81JavaScript-Fetch-API"><span class="toc-number">1.2.6.0.8.</span> <span class="toc-text">7.8、JavaScript Fetch API</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Fetch-API-%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.2.6.0.8.1.</span> <span class="toc-text">Fetch API 实例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-9%E3%80%81Web-Geolocation-API"><span class="toc-number">1.2.6.0.9.</span> <span class="toc-text">7.9、Web Geolocation API</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Geolocation-API"><span class="toc-number">1.2.6.0.9.1.</span> <span class="toc-text">使用 Geolocation API</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%E5%92%8C%E6%8B%92%E7%BB%9D"><span class="toc-number">1.2.6.0.9.2.</span> <span class="toc-text">处理错误和拒绝</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#getCurrentPosition-%E6%96%B9%E6%B3%95-%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.6.0.9.3.</span> <span class="toc-text">getCurrentPosition() 方法 - 返回数据</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JS-ASYNC"><span class="toc-number">1.3.</span> <span class="toc-text">JS ASYNC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript-%E5%9B%9E%E8%B0%83"><span class="toc-number">1.3.1.</span> <span class="toc-text">JavaScript 回调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BA%8F%E5%88%97"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">函数序列</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B1"><span class="toc-number">1.3.1.1.1.</span> <span class="toc-text">实例1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B2"><span class="toc-number">1.3.1.1.2.</span> <span class="toc-text">实例2</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%BA%E5%BA%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">顺序控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript-%E5%9B%9E%E8%B0%83-1"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">JavaScript 回调</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.3.1.3.1.</span> <span class="toc-text">实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%9A%84-JavaScript"><span class="toc-number">1.3.2.</span> <span class="toc-text">异步的 JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E8%B6%85%E6%97%B6"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">等待超时</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B1-1"><span class="toc-number">1.3.2.1.1.</span> <span class="toc-text">实例1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B2-1"><span class="toc-number">1.3.2.1.2.</span> <span class="toc-text">实例2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E9%97%B4%E9%9A%94"><span class="toc-number">1.3.3.</span> <span class="toc-text">等待间隔</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-1"><span class="toc-number">1.3.3.0.1.</span> <span class="toc-text">实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.4.</span> <span class="toc-text">等待文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript-Promise"><span class="toc-number">1.3.5.</span> <span class="toc-text">JavaScript Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript-Promise-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">JavaScript Promise 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Promise-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.5.1.1.</span> <span class="toc-text">Promise 语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Promise-%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="toc-number">1.3.5.1.2.</span> <span class="toc-text">Promise 对象属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-Promise"><span class="toc-number">1.3.5.1.3.</span> <span class="toc-text">如何使用 Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-2"><span class="toc-number">1.3.5.1.3.1.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JavaScript-Promise-%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.3.5.1.4.</span> <span class="toc-text">JavaScript Promise 实例</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E8%B6%85%E6%97%B6-1"><span class="toc-number">1.3.5.1.4.1.</span> <span class="toc-text">等待超时</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E6%96%87%E4%BB%B6-1"><span class="toc-number">1.3.5.1.4.2.</span> <span class="toc-text">等待文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%AF%E6%8C%81"><span class="toc-number">1.3.5.1.4.3.</span> <span class="toc-text">浏览器支持</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript-Async"><span class="toc-number">1.3.6.</span> <span class="toc-text">JavaScript Async</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Async-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">Async 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B1-2"><span class="toc-number">1.3.6.1.1.</span> <span class="toc-text">实例1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B2-2"><span class="toc-number">1.3.6.1.2.</span> <span class="toc-text">实例2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Await-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.7.</span> <span class="toc-text">Await 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B1-3"><span class="toc-number">1.3.7.1.1.</span> <span class="toc-text">实例1</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E8%B6%85%E6%97%B6-2"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">等待超时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E6%96%87%E4%BB%B6-2"><span class="toc-number">1.3.7.3.</span> <span class="toc-text">等待文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ajax"><span class="toc-number">1.4.</span> <span class="toc-text">Ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Ajax%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.4.1.</span> <span class="toc-text">Ajax实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-AJAX%EF%BC%9F"><span class="toc-number">1.4.2.</span> <span class="toc-text">什么是 AJAX？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AJAX-%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.4.3.</span> <span class="toc-text">AJAX 如何工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AJAX-XMLHttpRequest-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.4.</span> <span class="toc-text">AJAX - XMLHttpRequest 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#XMLHttpRequest-%E5%AF%B9%E8%B1%A1%E6%98%AF-AJAX-%E7%9A%84%E5%9F%BA%E7%9F%B3%E3%80%82"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">XMLHttpRequest 对象是 AJAX 的基石。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XMLHttpRequest-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">XMLHttpRequest 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-XMLHttpRequest-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.4.2.1.</span> <span class="toc-text">创建 XMLHttpRequest 对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.4.2.2.</span> <span class="toc-text">定义回调函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="toc-number">1.4.4.2.3.</span> <span class="toc-text">发送请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-3"><span class="toc-number">1.4.4.2.4.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XMLHttpRequest-%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.4.3.</span> <span class="toc-text">XMLHttpRequest 对象方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XMLHttpRequest-%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.4.4.</span> <span class="toc-text">XMLHttpRequest 对象属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#onload-%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.4.4.1.</span> <span class="toc-text">onload 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-4"><span class="toc-number">1.4.4.4.1.1.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.4.4.2.</span> <span class="toc-text">多个回调函数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-5"><span class="toc-number">1.4.4.4.2.1.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onreadystatechange-%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.4.4.3.</span> <span class="toc-text">onreadystatechange 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-6"><span class="toc-number">1.4.4.4.3.1.</span> <span class="toc-text">实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XMLHttpRequest-%E5%AF%B9%E8%B1%A1%E7%94%A8%E4%BA%8E%E5%90%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BA%A4%E6%8D%A2%E6%95%B0%E6%8D%AE%E3%80%82"><span class="toc-number">1.4.4.5.</span> <span class="toc-text">XMLHttpRequest 对象用于同服务器交换数据。</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="toc-number">1.4.4.5.1.</span> <span class="toc-text">向服务器发送请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#GET-%E8%BF%98%E6%98%AF-POST%EF%BC%9F"><span class="toc-number">1.4.4.5.2.</span> <span class="toc-text">GET 还是 POST？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#GET-%E8%AF%B7%E6%B1%82"><span class="toc-number">1.4.4.5.3.</span> <span class="toc-text">GET 请求</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B1-4"><span class="toc-number">1.4.4.5.3.1.</span> <span class="toc-text">实例1</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B2-3"><span class="toc-number">1.4.4.5.3.2.</span> <span class="toc-text">实例2</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B3"><span class="toc-number">1.4.4.5.3.3.</span> <span class="toc-text">实例3</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#POST-%E8%AF%B7%E6%B1%82"><span class="toc-number">1.4.4.5.4.</span> <span class="toc-text">POST 请求</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B1-5"><span class="toc-number">1.4.4.5.4.1.</span> <span class="toc-text">实例1</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B2-4"><span class="toc-number">1.4.4.5.4.2.</span> <span class="toc-text">实例2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#url-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.4.6.</span> <span class="toc-text">url - 服务器上的文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5-true-%E8%BF%98%E6%98%AF-false%EF%BC%9F"><span class="toc-number">1.4.4.7.</span> <span class="toc-text">异步 - true 还是 false？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#onreadystatechange-%E5%B1%9E%E6%80%A7-1"><span class="toc-number">1.4.4.8.</span> <span class="toc-text">onreadystatechange 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-7"><span class="toc-number">1.4.4.8.1.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E8%AF%B7%E6%B1%82"><span class="toc-number">1.4.4.9.</span> <span class="toc-text">同步请求</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-8"><span class="toc-number">1.4.4.9.1.</span> <span class="toc-text">实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AJAX-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94"><span class="toc-number">1.4.5.</span> <span class="toc-text">AJAX - 服务器响应</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#onreadystatechange-%E5%B1%9E%E6%80%A7-2"><span class="toc-number">1.4.5.1.</span> <span class="toc-text">onreadystatechange 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-9"><span class="toc-number">1.4.5.1.1.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.5.2.</span> <span class="toc-text">服务器响应属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#responseText-%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.5.2.1.</span> <span class="toc-text">responseText 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-10"><span class="toc-number">1.4.5.2.1.1.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#responseXML-%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.5.2.2.</span> <span class="toc-text">responseXML 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-11"><span class="toc-number">1.4.5.2.2.1.</span> <span class="toc-text">实例</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.6.</span> <span class="toc-text">服务器响应方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#getAllResponseHeaders-%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.6.1.</span> <span class="toc-text">getAllResponseHeaders() 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-12"><span class="toc-number">1.4.6.1.1.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getResponseHeader-%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.6.2.</span> <span class="toc-text">getResponseHeader() 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-13"><span class="toc-number">1.4.6.2.1.</span> <span class="toc-text">实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AJAX-%E5%8F%AF%E7%94%A8%E4%BA%8E%E5%90%8C-XML-%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%80%9A%E4%BF%A1%E3%80%82"><span class="toc-number">1.4.7.</span> <span class="toc-text">AJAX 可用于同 XML 文件进行交互式通信。</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#XML-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.4.7.1.</span> <span class="toc-text">XML 应用程序</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8-HTML-div-%E5%85%83%E7%B4%A0%E4%B8%AD%E6%98%BE%E7%A4%BA%E7%AC%AC%E4%B8%80%E9%A6%96%E6%9B%B2%E5%AD%90"><span class="toc-number">1.4.7.1.1.</span> <span class="toc-text">在 HTML div 元素中显示第一首曲子</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E6%9B%B2%E7%9B%AE%E4%B9%8B%E9%97%B4%E5%AF%BC%E8%88%AA"><span class="toc-number">1.4.7.1.2.</span> <span class="toc-text">在曲目之间导航</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Axios"><span class="toc-number">1.4.8.</span> <span class="toc-text">Axios</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/30/JavaScript/" title="JavaScript">JavaScript</a><time datetime="2024-07-30T09:46:48.000Z" title="发表于 2024-07-30 17:46:48">2024-07-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/26/uni-app%E6%A1%86%E6%9E%B6%E4%B9%8B%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90/" title="uni-app框架之网易云音乐">uni-app框架之网易云音乐</a><time datetime="2024-07-26T09:29:13.000Z" title="发表于 2024-07-26 17:29:13">2024-07-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/22/Pinia%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" title="Pinia状态管理工具">Pinia状态管理工具</a><time datetime="2024-07-22T06:11:34.000Z" title="发表于 2024-07-22 14:11:34">2024-07-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/21/HTML5+CSS3/" title="HTML5+CSS3+JS">HTML5+CSS3+JS</a><time datetime="2024-07-21T10:50:51.000Z" title="发表于 2024-07-21 18:50:51">2024-07-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/17/Vuex/" title="Vuex">Vuex</a><time datetime="2024-07-17T10:18:47.000Z" title="发表于 2024-07-17 18:18:47">2024-07-17</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="LiSir" target="_blank">LiSir</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">1</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://newerproduct.github.io/" title="我的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" alt="我的博客"/><span class="back-menu-item-text">我的博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="鱼图床"/><span class="back-menu-item-text">鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Docker%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">Docker学习<sup>1</sup></a><a href="/tags/HTML-CSS/" style="font-size: 0.88rem;">HTML,CSS<sup>1</sup></a><a href="/tags/JS/" style="font-size: 0.88rem;">JS<sup>1</sup></a><a href="/tags/JavaWeb/" style="font-size: 0.88rem;">JavaWeb<sup>1</sup></a><a href="/tags/Java%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">Java学习<sup>1</sup></a><a href="/tags/Linux-Error/" style="font-size: 0.88rem;">Linux Error<sup>1</sup></a><a href="/tags/SpringBoot%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">SpringBoot学习<sup>1</sup></a><a href="/tags/git%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">git学习<sup>1</sup></a><a href="/tags/jQuery/" style="font-size: 0.88rem;">jQuery<sup>1</sup></a><a href="/tags/java%E5%92%8Cvue%E5%BC%80%E5%8F%91%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%94%99%E8%AF%AF%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E6%94%B9%E6%AD%A3%E5%92%8C%E5%AF%B9%E4%BB%96%E4%BB%AC%E7%9A%84%E7%90%86%E8%A7%A3%E6%95%B4%E7%90%86-%E5%8F%82%E5%8A%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/" style="font-size: 0.88rem;">java和vue开发中遇到的错误以及如何改正和对他们的理解整理(参加的项目)<sup>1</sup></a><a href="/tags/js-node-js/" style="font-size: 0.88rem;">js-node.js<sup>1</sup></a><a href="/tags/jwt-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-cookie/" style="font-size: 0.88rem;">jwt,身份认证,cookie<sup>1</sup></a><a href="/tags/nginx%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">nginx学习<sup>1</sup></a><a href="/tags/npm-yarn/" style="font-size: 0.88rem;">npm,yarn<sup>1</sup></a><a href="/tags/uni-app%E6%A1%86%E6%9E%B6/" style="font-size: 0.88rem;">uni-app框架<sup>1</sup></a><a href="/tags/vue-js/" style="font-size: 0.88rem;">vue.js<sup>1</sup></a><a href="/tags/vue-js%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">vue.js前置知识<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF-web-%E6%A1%86%E6%9E%B6/" style="font-size: 0.88rem;">前端,web,框架<sup>1</sup></a><a href="/tags/%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%EF%BC%8C%E6%A8%A1%E5%9D%97/" style="font-size: 0.88rem;">打包工具，模块<sup>1</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-vue2-js/" style="font-size: 0.88rem;">状态管理工具(vue2.js)<sup>1</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-vue3-js/" style="font-size: 0.88rem;">状态管理工具(vue3.js)<sup>1</sup></a><a href="/tags/%E7%BB%83%E4%B9%A0%E9%A2%98%EF%BC%8C%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 0.88rem;">练习题，面试题<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 LiSir 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>
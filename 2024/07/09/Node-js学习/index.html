<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Node.js学习 | LiSir</title><meta name="keywords" content="js-node.js"><meta name="author" content="LiSir,zewei4703@gmail.com"><meta name="copyright" content="LiSir"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Node.js学习"><meta name="application-name" content="Node.js学习"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Node.js学习"><meta property="og:url" content="http://example.com/2024/07/09/Node-js%E5%AD%A6%E4%B9%A0/index.html"><meta property="og:site_name" content="LiSir"><meta property="og:description" content="Node与终端Node.js就是一款应用程序，是一款软件，可以运行JavaScrpt 在终端用node命令去运行文件，比如有一个名为1.js的文件 那么打开终端 1node 1.js   Buffer（缓冲器）概念Buffer 是一个类似于数组的 对象 ，用于表示固定长度的字节序列 Buffer 本"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://example.com/img/default_cover.jpg"><meta property="article:author" content="LiSir"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://example.com/img/default_cover.jpg"><meta name="description" content="Node与终端Node.js就是一款应用程序，是一款软件，可以运行JavaScrpt 在终端用node命令去运行文件，比如有一个名为1.js的文件 那么打开终端 1node 1.js   Buffer（缓冲器）概念Buffer 是一个类似于数组的 对象 ，用于表示固定长度的字节序列 Buffer 本"><link rel="shortcut icon" href="/img/touxiang.jpg"><link rel="canonical" href="http://example.com/2024/07/09/Node-js%E5%AD%A6%E4%B9%A0/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: LiSir","link":"链接: ","source":"来源: LiSir","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'LiSir',
  title: 'Node.js学习',
  postAI: '',
  pageFillDescription: 'Node与终端, Buffer（缓冲器）, 概念, 特点, 使用, 创建 Buffer, Buffer 与字符串的转化, Buffer 的读写, fs 模块, 文件写入, writeFile 异步写入, writeFileSync 同步写入, appendFile x2F appendFileSync 追加写入, createWriteStream 流式写入, 写入文件的场景, 文件读取, readFile 异步读取, readFileSync 同步读取, createReadStream 流式读取, 读取文件应用场景, 文件移动与重命名, 文件删除, 文件夹操作, mkdir 创建文件夹, readdir 读取文件夹, rmdir 删除文件夹, 查看资源状态, 相对路径问题, __dirname, 练习, 编写一个 JS 文件实现复制文件的功能, 文件重命名, , , , 案例：考试成绩整理, 案例—时钟案例, path模块, http模块, 概念, 请求报文的组成, HTTP 的请求行, HTTP 请求头, HTTP 的请求体, 响应报文的组成, 创建 HTTP 服务, 操作步骤, 测试, 注意事项, 浏览器查看 HTTP 报文, 查看请求行与请求头, 查看请求体, 查看 URL 查询字符串, 查看响应行与响应头, 查看响应体, 获取 HTTP 请求报文, 练习, 设置 HTTP 响应报文, 练习, 网页资源的基本加载过程, 静态资源服务, 网站根目录或静态资源目录, 网页中的 URL, 绝对路径, 相对路径, 网页中使用 URL 的场景小结, 设置资源类型（mime类型）, GET 和 POST 请求场景小结, GET和POST请求的区别, 3.Node模块化, 1.模块化的基本概念, 1.1什么是模块化？, 1.2模块化规范, 2.Node.js中的模块化, 2.1Node.js中模块的分类, 2.2加载模块, 2.3模块的作用域, 2.4向外共享模块作用域中的成员, 2.4.1共享成员的注意点, 2.4.2exports对象, 2.4.3exports和module.exports的使用误区, 2.5Node.js中的模块化规范与终端就是一款应用程序是一款软件可以运行在终端用命令去运行文件比如有一个名为的文件那么打开终端缓冲器概念是一个类似于数组的对象用于表示固定长度的字节序列本质是一段内存空间专门用来处理二进制数据特点大小固定且无法调整性能较好可以直接对计算机内存进行操作每个元素的大小为字节使用创建中创建的方式主要如下几种创建了一个长度为字节的相当于申请了字节的内存空间每个字节的值为结果为创建了一个长度为字节的中可能存在旧数据可能会影响执行结果所以叫但是效率比高通过字符串创建通过数组创建与字符串的转化我们可以借助方法将转为字符串注意默认是按照编码方式进行转换的的读写可以直接通过的方式对数据进行处理读取修改查看字符串结果注意如果修改的数值超过则超过位数据会被舍弃一个的字符一般占个字节模块全称为称之为文件系统是中的内置模块可以对计算机中的磁盘进行操作本章节会介绍如下几个操作文件写入文件读取文件移动与重命名文件删除文件夹操作查看资源状态文件写入文件写入就是将数据保存到文件中我们可以使用如下几个方法来实现该效果方法说明异步写入同步写入追加写入流式写入异步写入语法参数说明文件名待写入的数据选项设置可选写入回调返回值代码示例是环境中的全局变量用来导入模块将三人行必有我师焉写入到当前文件夹下的座右铭文件中座右铭三人行必有我师焉如果写入失败则回调函数调用时会传入错误对象如写入成功会传入写入成功同步写入语法参数与大体一致只是没有参数返回值代码示例座右铭三人行必有我师焉中的磁盘操作是由其他线程完成的结果的处理有两种模式同步处理主线程会等待其线程的执行结果然后再继续执行主线程的代码效率较低异步处理主线程不会等待其线程的执行结果直接执行后续的主线程代码效率较好追加写入作用是在文件尾部追加内容语法与语法完全相同语法返回值二者都为实例代码座右铭则其善者而从之其不善者而改之追加成功座右铭温故而知新可以为师矣流式写入语法参数说明文件路径选项配置可选返回值代码示例观书有感写入数据到流半亩方塘一鉴开天光云影共徘徊问渠那得清如许为有源头活水来关闭写入流表明已没有数据要被写入可写流程序打开一个文件是需要消耗资源的流式写入可以减少打开关闭文件的次数流式写入方式适用于大文件写入或者频繁写入的场景适合于写入频率较低的场景写入文件的场景文件写入在计算机中是一个非常常见的操作下面的场景都用到了文件写入下载文件安装软件保存程序日志如编辑器保存文件视频录制当需要持久化保存数据的时候应该想到文件写入文件读取文件读取顾名思义就是通过程序从文件中取出其中的数据我们可以使用如下几种方式方法说明异步读取同步读取流式读取异步读取语法参数说明文件路径选项配置回调函数返回值代码示例导入模块座右铭座右铭同步读取语法参数说明文件路径选项配置返回值代码示例座右铭座右铭流式读取语法参数说明文件路径选项配置可选返回值代码示例创建读取流对象观书有感每次取出数据后执行一次回调绑定一个事件块儿大块儿读取完毕后执行回调可选事件读取完毕读取文件应用场景电脑开机程序运行编辑器打开文件查看图片播放视频播放音乐查看日志上传文件查看聊天记录文件移动与重命名在中我们可以使用或来移动或重命名文件或文件夹语法参数说明文件当前的路径文件新的路径操作后的回调代码示例观书有感论语观书有感移动完成座右铭论语我的座右铭注如果还是移动到当前路径但是修改了名字就是重命名了文件删除在中我们可以使用或来删除文件语法参数说明文件路径操作后的回调代码示例删除成功调用方法同步论语删除失败删除成功文件夹操作借助的能力我们可以对文件夹进行创建读取删除等操作方法说明创建文件夹读取文件夹删除文件夹创建文件夹在中我们可以使用或来创建文件夹语法参数说明文件夹路径选项配置可选操作后的回调示例代码异步创建文件夹制作文件夹创建成功递归异步创建递归创建成功递归同步创建文件夹读取文件夹在中我们可以使用或来读取文件夹语法参数说明文件夹路径选项配置可选操作后的回调示例代码异步读取论语同步读取论语删除文件夹在中我们可以使用或来删除文件夹语法参数说明文件夹路径选项配置可选操作后的回调示例代码异步删除文件夹移除删除成功异步递归删除文件夹不推荐递归删除同步递归删除文件夹建议使用删除成功查看资源状态在中我们可以使用或来查看资源的详细信息语法参数说明文件夹路径选项配置可选操作后的回调示例代码异步获取状态方法缩写状态同步获取状态结果值对象结构文件体积创建时间最后修改时间检测是否为文件检测是否为文件夹相对路径问题模块对资源进行操作时路径的写法有两种相对路径座右铭当前目录下的座右铭座右铭等效于上面的写法座右铭当前目录的上一级目录中的座右铭绝对路径系统下的绝对路径系统下的绝对路径相对路径中所谓的当前目录指的是命名行的工作目录而并非是文件的所在目录所以当命名行的工作目录与文件所在目录不一致时会出现一些与类似都是环境中的全局变量保存着当前文件夹所在目录的绝对路径可以使用与文件名拼接成绝对路径代码示例模块使用模块的时候尽量使用路径转换为绝对路径这样可以避免相对路径产生的练习编写一个文件实现复制文件的功能需求复制资料文件夹下的笑看风云导入模块方式一读取文件内容资料笑看风云写入文件资料笑看风云方式二流式操作创建读取流对象资料笑看风云创建一个写入流对象资料笑看风云绑定事件理想状态下读取就写入这样消耗的内存最少实际上读取的速度大于写入的速度绑定事件文件重命名导入模块读取模块文件夹模块遍历数组判断创建新的文件名重命名模块模块案例考试成绩整理引入模块第一步获取数据并把数据整合成理想格式成绩文件读取失败原因是转换成字符串数组用不用因为会把数据变成一列不好处理使用进行拼接第二步写入数据处理后的成绩写入失败文件写入成功注意是回车和换行的组合常用于表示一行的结束并开始新的一行尤其在操作系统中的文本文件格式里广泛使用案例时钟案例案例难点匹配标签和标签的正则表达式不容易写出案例步骤创建写入文件的文件导入文件处理模块导入路径处理模块读取文件错误信息是拿着匹配的结果写入到文件中文件写入失败原因是文件写入成功创建写入文件的文件导入文件处理模块导入路径处理模块读取文件错误信息是拿着匹配的结果写入到文件中文件写入失败原因是文件写入成功创建写入文件的导入文件处理模块导入路径处理模块读取文件错误信息是拿着匹配的结果写入到文件中新文件文件写入失败原因是文件写入成功注意在新写入的文件中需要进行正则匹配然后替换已外部文件的形式引入和文件注意路径模块模块提供了操作路径的功能我们将介绍如下几个较为常用的几个说明拼接规范的绝对路径常用获取操作系统的路径分隔符解析路径并返回对象获取路径的基础名称获取路径的目录名获得路径的扩展名代码示例导入模块导入模块写入文件解决问题拼接绝对路径获取路径分隔符方法全局变量文件的绝对路径解析路径获取路径基础名称获取路径的目录名获取路径的拓展名模块概念协议中文叫超文本传输协议是一种基于的应用层通信协议这个协议详细规定了浏览器和万维网服务器之间互相通信的规则协议中主要规定了两个方面的内容客户端用来向服务器发送数据可以被称之为请求报文服务端向客户端返回数据可以被称之为响应报文报文可以简单理解为就是一堆字符串请求报文的组成请求行请求头空行请求体的请求行请求方法等请求统一资源定位器例如协议等域名端口号路径查询字符串哈希锚点链接协议版本号请求头格式头名头值常见的请求头有请求头解释主机名连接的设置保持连接关闭连接缓存控制没有缓存将网页中的请求转化为请求很少用老网站升级用户代理客户端字符串标识服务器可以通过这个标识来识别这个请求来自哪个客户端一般在端和手机端的区分设置浏览器接收的数据类型设置接收的压缩方式设置接收的语言为喜好系数满分为后面单独讲的请求体请求体内容的格式是非常灵活的可以是空请求也可以是字符串还可以是请求例如字符串手机手机响应报文的组成响应行协议版本号响应状态码还有一些状态码参考响应状态描述响应状态码和响应字符串关系是一一对应的响应头缓存控制私有的只允许客户端缓存数据链接设置设置响应体的数据类型以及字符集响应体为字符集响应体的长度单位为字节空行响应体响应体内容的类型是非常灵活的常见的类型有图片创建服务使用创建服务操作步骤导入模块创建服务对象创建服务意为请求是对请求报文的封装对象通过对象可以获得请求报文的数据意为响应是对响应报文的封装对象通过对象可以设置响应报文设置响应体返回结果是一个对象监听端口启动服务服务已经启动端口监听中里的回调函数的执行时机当接收到请求的时候就会执行测试浏览器请求对应端口注意事项命令行停止服务当服务启动后更新代码必须重启服务才能生效响应内容中文乱码的解决办法设置响应头端口号被占用关闭当前正在运行监听端口的服务使用较多修改其他端口号协议默认端口是协议的默认端口是服务开发常用端口有等如果端口被其他程序占用可以使用资源监视器找到占用端口的程序然后使用任务管理器关闭对应的程序浏览器查看报文点击步骤查看请求行与请求头查看请求体查看查询字符串查看响应行与响应头查看响应体获取请求报文含义语法重点掌握请求方法请求版本请求路径路径查询字符串请求头请求体导入模块创建服务对象获取请求的方法获取请求的只包含中的路径与查询字符串获取协议的版本号获取的请求头结果是一个对象设置响应体监听端口启动服务服务已经启动注意事项只能获取路径以及查询字符串无法获取中的域名以及协议的内容将请求信息转化成一个对象并将属性名都转化成了小写关于路径如果访问网站的时候只填写了地址或者是域名信息此时请求的路径为关于这个请求是属于浏览器自动发送的请求提取报文的请求体导入模块创建服务对象声明一个变量绑定事件绑定事件响应设置响应体监听端口启动服务服务已经启动提取报文中的路径与查询字符串导入模块导入模块创建服务对象解析使用解析的内容将属性将会设置为一个对象如下图所示为一个对象路径查询字符串监听端口启动服务服务已经启动导入模块创建服务对象实例化对象如图所示为一个对象输出路径输出查询字符串监听端口启动服务服务已经启动练习按照以下要求搭建服务请求类型方法请求地址响应体结果登录页面注册页面引入模块建立服务对象的解构赋值设置响应头信息解决中文乱码注册页面登录页面监听端口服务启动中设置响应报文作用语法设置响应状态码设置响应状态描述用的非常少设置响应头信息头名头值可以自定义设置响应体设置响应状态码响应状态的描述响应头自定义响应头设置多个同名的响应头和的两种使用情况和的结合使用响应体相对分散每一个请求在处理的时候必须要执行方法的单独使用方法响应体相对集中练习搭建服务响应一个行列的表格并且要求表格有隔行换色效果且点击单元格能高亮显示方法一导入模块创建服务对象监听端口启动服务器服务器已经启动方法二导入模块创建服务对象读取文件内容方法的参数可以是字符串也可以是监听端口启动服务器服务器已经启动网页资源的基本加载过程网页资源的加载都是循序渐进的首先获取的内容然后解析在发送其他资源的请求如图片等理解了这个内容对于后续的学习与成长有非常大的帮助静态资源服务静态资源是指内容长时间不发生改变的资源例如图片视频文件文件文件字体文件等动态资源是指内容经常更新的资源例如百度首页网易首页京东搜索列表页面等网站根目录或静态资源目录服务在哪个文件夹中寻找静态资源那个文件夹就是静态资源目录也称之为网站根目录思考中使用访问时它启动的服务中网站根目录是谁改文件的所处的文件夹网页中的网页中的主要分为两大类相对路径与绝对路径绝对路径绝对路径可靠性强而且相对容易理解在项目中运用较多形式特点直接向目标资源发送请求容易理解网站的外链会用到此形式与页面的协议拼接形成完整再发送请求大型网站用的比较多与页面的协议主机名端口拼接形成完整再发送请求中小型网站相对路径相对路径在发送请求时需要与当前页面路径进行计算得到完整后再发送请求学习阶段用的较多例如当前网页为形式最终的网页中使用的场景小结包括但不限于如下场景标签标签标签标签标签中的请求中的设置资源类型类型媒体类型通常称为或类型是一种标准用来表示文档文件或字节流的性质和格式类型结构例如服务可以设置响应头来表明响应体的类型浏览器会根据该类型决定如何处理资源下面是常见文件对应的类型对于未知的资源类型可以选择类型浏览器在遇到该类型的响应时会对响应体内容进行独立存储也就是我们常见的下载效果获取请求的方法已经路径判断请求方式以及请求路径需要响应文件中的内容需要响应文件中的内容需要响应文件中的内容响应端口正在启动中很明显上面的代码当只要有一个请求路径就需要进行判断显然这种方式不够完美那么我们需要封装获取请求的方法已经路径文件夹路径根路径拼接文件路径读取文件内容判断如果出现错误响应状态码响应文件内容端口正在启动中和请求场景小结请求的情况在地址栏直接输入访问点击链接标签引入标签引入标签引入图片标签中的为不区分大小写中的请求请求的情况标签中的为不区分大小写的请求和请求的区别和是协议请求的两种方式主要用来获取数据主要用来提交数据带参数请求是将参数缀到之后在地址栏中输入访问网站就是请求带参数请求是将参数放到请求体中请求相对安全一些因为在浏览器中参数会暴露在地址栏请求大小有限制一般为而请求则没有模块化模块化的基本概念什么是模块化遇到一个复杂问题时自顶向下逐层把系统划分成若干模块的过程模块是可组合分解更换的单元把代码进行模块化拆分的好处提高了代码的复用性提高了代码的可维护性可以实现按需加载模块化规范就是一种规则对代码进行模块化拆分与组合时需要遵守的规则中的模块化中模块的分类加载模块基础语法利用方法加载内置模块加载自定义模块加载外置模块该模块需下载后再使用在加载模块时会执行被加载模块中的代码模块的作用域只能在导入的模块内部使用但是当你通过导入的方式加入某模块时被导入模块内定义的变量无法再当前导入模块内使用比如你在模块内导入模块模块中的变量在中是无法访问的但是可以访问自身的变量向外共享模块作用域中的成员在每个自定义模块中都有一个对象在这里面存储了和当前模块有关的信息利用里面的属性来进行向外共享即可下面介绍用法基础语法属性名属性值当我向中导入自定义这里用解释模块时模块中得到的成员就是中所指向的对象打印查看共享成员的注意点对象提供了一种简化的对象对象默认情况下和指向同一个对象和的使用误区模块时得到的永远是所指向的对象中的模块化规范规范是一种模块化编程的标准最初为服务器端设计被采纳并广泛应用它的核心特点包括模块定义在中每个文件被视为一个独立的模块这意味着文件内部定义的变量函数等都是模块私有的不会污染全局作用域模块导出使用或来导出模块希望公开的接口其他模块可以访问这些导出的接口来使用该模块的功能是模块的默认导出对象而是的一个引用通常用于导出多个属性或方法模块引入通过函数来引入其他模块函数接受一个模块标识符作为参数用于加载并返回导出的模块接口模块标识符可以是相对路径或绝对路径也可以是核心模块名加载机制实现了懒加载也称为延迟加载策略即只有当使用函数时模块才会被加载和执行这样可以提高程序的运行效率因为不立即加载所有模块而是按需加载缓存机制对加载过的模块进行缓存任何后续对该模块的调用都会直接从缓存中获取模块而不是重新加载这进一步提升了程序性能当使用函数加载模块时获取到的是最终指向的那个对象无论这个指向是否在过程中被改变过简而言之尽管常用于方便地添加模块接口但真正对外暴露的是通过指定的内容',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-20 10:29:22',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/touxiang.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://newerproduct.github.io/" title="我的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" alt="我的博客"/><span class="back-menu-item-text">我的博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="鱼图床"/><span class="back-menu-item-text">鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">LiSir</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HTML-CSS/" style="font-size: 1.05rem;">HTML,CSS<sup>1</sup></a><a href="/tags/JS/" style="font-size: 1.05rem;">JS<sup>1</sup></a><a href="/tags/JavaWeb/" style="font-size: 1.05rem;">JavaWeb<sup>1</sup></a><a href="/tags/Java%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">Java学习<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 1.05rem;">TypeScript<sup>1</sup></a><a href="/tags/git%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">git学习<sup>1</sup></a><a href="/tags/jQuery/" style="font-size: 1.05rem;">jQuery<sup>1</sup></a><a href="/tags/java%E5%92%8Cvue%E5%BC%80%E5%8F%91%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%94%99%E8%AF%AF%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E6%94%B9%E6%AD%A3%E5%92%8C%E5%AF%B9%E4%BB%96%E4%BB%AC%E7%9A%84%E7%90%86%E8%A7%A3%E6%95%B4%E7%90%86-%E5%8F%82%E5%8A%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/" style="font-size: 1.05rem;">java和vue开发中遇到的错误以及如何改正和对他们的理解整理(参加的项目)<sup>1</sup></a><a href="/tags/js-node-js/" style="font-size: 1.05rem;">js-node.js<sup>1</sup></a><a href="/tags/jwt-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-cookie/" style="font-size: 1.05rem;">jwt,身份认证,cookie<sup>1</sup></a><a href="/tags/nginx%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">nginx学习<sup>1</sup></a><a href="/tags/uni-app%E6%A1%86%E6%9E%B6/" style="font-size: 1.05rem;">uni-app框架<sup>1</sup></a><a href="/tags/vue-js/" style="font-size: 1.05rem;">vue.js<sup>1</sup></a><a href="/tags/vue-js%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">vue.js前置知识<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF-web-%E6%A1%86%E6%9E%B6/" style="font-size: 1.05rem;">前端,web,框架<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/" style="font-size: 1.05rem;">开发总结<sup>1</sup></a><a href="/tags/%E6%89%8B%E6%9C%BA%EF%BC%8C%E7%A7%BB%E5%8A%A8%E7%AB%AF%EF%BC%8Cless/" style="font-size: 1.05rem;">手机，移动端，less<sup>1</sup></a><a href="/tags/%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%EF%BC%8C%E6%A8%A1%E5%9D%97/" style="font-size: 1.05rem;">打包工具，模块<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">数据结构<sup>1</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-vue2-js/" style="font-size: 1.05rem;">状态管理工具(vue2.js)<sup>1</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-vue3-js/" style="font-size: 1.05rem;">状态管理工具(vue3.js)<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url">前端开发</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/js-node-js/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>js-node.js</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Node.js学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-07-09T09:25:29.000Z" title="发表于 2024-07-09 17:25:29">2024-07-09</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-09-20T02:29:22.727Z" title="更新于 2024-09-20 10:29:22">2024-09-20</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为张家口"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>张家口</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/default_cover.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/07/09/Node-js%E5%AD%A6%E4%B9%A0/"><header><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url">前端开发</a><a href="/tags/js-node-js/" tabindex="-1" itemprop="url">js-node.js</a><h1 id="CrawlerTitle" itemprop="name headline">Node.js学习</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">LiSir</span><time itemprop="dateCreated datePublished" datetime="2024-07-09T09:25:29.000Z" title="发表于 2024-07-09 17:25:29">2024-07-09</time><time itemprop="dateCreated datePublished" datetime="2024-09-20T02:29:22.727Z" title="更新于 2024-09-20 10:29:22">2024-09-20</time></header><h1 id="Node与终端"><a href="#Node与终端" class="headerlink" title="Node与终端"></a>Node与终端</h1><p>Node.js就是一款应用程序，是一款软件，可以运行JavaScrpt</p>
<p>在终端用node命令去运行文件，比如有一个名为1.js的文件</p>
<p>那么打开终端</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node 1.js</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/image-20240709173046409.png" alt="image-20240709173046409"></p>
<h1 id="Buffer（缓冲器）"><a href="#Buffer（缓冲器）" class="headerlink" title="Buffer（缓冲器）"></a>Buffer（缓冲器）</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>Buffer 是一个类似于数组的 <code>对象</code> ，用于表示固定长度的字节序列</p>
<p>Buffer 本质是一段内存空间，专门用来处理 <code>二进制数据</code> 。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/e63bd2526bce2f0bbc003f3d0e122915459d9f2b-1726793170710-1.png" alt="image-20230320173023659"></p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ol>
<li>Buffer 大小固定且无法调整</li>
<li>Buffer 性能较好，可以直接对计算机内存进行操作</li>
<li>每个元素的大小为 1 字节（byte）</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/1f67ed9e1b8884786dafcc4deb804f96234af9f4-1726793175053-4.png" alt="image-20230320173043532"></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="创建-Buffer"><a href="#创建-Buffer" class="headerlink" title="创建 Buffer"></a>创建 Buffer</h3><p>Node.js 中创建 Buffer 的方式主要如下几种：</p>
<ol>
<li><p><code>Buffer.alloc</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建了一个长度为 10 字节的 Buffer，相当于申请了 10 字节的内存空间，每个字节的值为 0</span></span><br><span class="line"><span class="keyword">let</span> buf_1 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>) <span class="comment">//=&gt;结果为&lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Buffer.allocUnsafe</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建了一个长度为 10 字节的 Buffer，buffer 中可能存在旧数据，可能会影响执行结果，所以叫 unsafe ，但是效率比 alloc 高</span></span><br><span class="line"><span class="keyword">let</span> buf_2 = <span class="title class_">Buffer</span>.<span class="title function_">allocUnsafe</span>(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

</li>
<li><p><code>Buffer.from</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过字符串创建 Buffer</span></span><br><span class="line"><span class="keyword">let</span> buf_3 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="comment">// 通过数组创建 Buffer</span></span><br><span class="line"><span class="keyword">let</span> buf_4 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">118</span>, <span class="number">101</span>, <span class="number">121</span>, <span class="number">111</span>, <span class="number">117</span>])</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/50203eaa574024343506d2cc44922eee6e4dd32f-1726793198677-7.png" alt="image-20230321005248253"></p>
</li>
</ol>
<h3 id="Buffer-与字符串的转化"><a href="#Buffer-与字符串的转化" class="headerlink" title="Buffer 与字符串的转化"></a>Buffer 与字符串的转化</h3><blockquote>
<p>我们可以借助 <code>toString</code> 方法将 Buffer 转为字符串</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buf_4 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">118</span>, <span class="number">101</span>, <span class="number">121</span>, <span class="number">111</span>, <span class="number">117</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_4.<span class="title function_">toString</span>()) <span class="comment">//=&gt;iloveyou</span></span><br></pre></td></tr></table></figure>

<p>**注意: **<code>toString</code> 默认是按照 <code>utf-8</code> 编码方式进行转换的</p>
<h3 id="Buffer-的读写"><a href="#Buffer-的读写" class="headerlink" title="Buffer 的读写"></a>Buffer 的读写</h3><blockquote>
<p>Buffer 可以直接通过 <code>[]</code> 的方式对数据进行处理。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buf_3 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="comment">// 读取</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_3[<span class="number">1</span>]) <span class="comment">//=&gt;101</span></span><br><span class="line"><span class="comment">// 修改</span></span><br><span class="line">buf_3[<span class="number">1</span>] = <span class="number">97</span></span><br><span class="line"><span class="comment">//查看字符串结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_3.<span class="title function_">toString</span>()) <span class="comment">//=&gt;hallo</span></span><br></pre></td></tr></table></figure>

<p><strong>注意:</strong></p>
<ol>
<li>如果修改的数值超过 <code>255</code> ，则<span style="color:red">超过</span> <code>8</code> 位数据会被舍弃</li>
<li>一个 <code>utf-8</code> 的字符 <span style="color:red">一般</span> 占3个字节</li>
</ol>
<h1 id="fs-模块"><a href="#fs-模块" class="headerlink" title="fs 模块"></a>fs 模块</h1><blockquote>
<p>fs 全称为 <code>file system</code> ，称之为 <code>文件系统</code> ，是 Node.js 中的 <code>内置模块</code> ，可以对计算机中的磁盘进行操作。</p>
</blockquote>
<p>本章节会介绍如下几个操作：</p>
<ol>
<li>文件写入</li>
<li>文件读取</li>
<li>文件移动与重命名</li>
<li>文件删除</li>
<li>文件夹操作</li>
<li>查看资源状态</li>
</ol>
<h2 id="文件写入"><a href="#文件写入" class="headerlink" title="文件写入"></a>文件写入</h2><blockquote>
<p>文件写入就是将 数据 保存到 文件 中，我们可以使用如下几个方法来实现该效果</p>
</blockquote>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>writeFile</td>
<td>异步写入</td>
</tr>
<tr>
<td>writeFileSync</td>
<td>同步写入</td>
</tr>
<tr>
<td>appendFile &#x2F; appendFileSync</td>
<td>追加写入</td>
</tr>
<tr>
<td>createWriteStream</td>
<td>流式写入</td>
</tr>
</tbody></table>
<h3 id="writeFile-异步写入"><a href="#writeFile-异步写入" class="headerlink" title="writeFile 异步写入"></a>writeFile 异步写入</h3><p><strong>语法</strong>： <code>fs.writeFile(file, data[, options], callback)</code></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>file 文件名</li>
<li>data 待写入的数据</li>
<li>options 选项设置 <code>（可选）</code></li>
<li>callback 写入回调</li>
</ul>
<p><strong>返回值</strong>： <code>undefined</code></p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// require 是 Node.js 环境中的 &#x27;全局&#x27; 变量，用来导入模块</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line"></span><br><span class="line">// 将 [三人行，必有我师焉。] 写入到当前文件夹下的 [座右铭.txt] 文件中</span><br><span class="line">fs.writeFile(&#x27;./座右铭.txt&#x27;, &#x27;三人行，必有我师焉。&#x27;, err =&gt;&#123;</span><br><span class="line">    // 如果写入失败，则回调函数调用时，会传入错误对象，如写入成功，会传入 null</span><br><span class="line">    if(err)&#123;</span><br><span class="line">        console.log(err)</span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&#x27;写入成功&#x27;)  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="writeFileSync-同步写入"><a href="#writeFileSync-同步写入" class="headerlink" title="writeFileSync 同步写入"></a>writeFileSync 同步写入</h3><p><strong>语法:</strong> <code>fs.writeFileSync(file, data[, options])</code></p>
<p>参数与 <code>fs.writeFile</code> 大体一致，只是没有 callback 参数</p>
<p><strong>返回值：</strong><code>undefined</code></p>
<p>代码示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">    fs.writeFileSync(&#x27;./座右铭.txt&#x27;, &#x27;三人行，必有我师焉。&#x27;)</span><br><span class="line">&#125;catch(e)&#123;</span><br><span class="line">    console.log(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Node.js 中的磁盘操作是由其他 <code>线程</code> 完成的，结果的处理有两种模式:</p>
<ul>
<li>同步处理 JavaScript 主线程 <code>会等待</code> 其线程的执行结果，然后再继续执行主线程的代码，<code>效率较低</code></li>
<li>异步处理 JavaScript 主线程 <code>不会等待</code> 其线程的执行结果，直接执行后续的主线程代码，<code>效率较好</code></li>
</ul>
</blockquote>
<h3 id="appendFile-appendFileSync-追加写入"><a href="#appendFile-appendFileSync-追加写入" class="headerlink" title="appendFile &#x2F; appendFileSync 追加写入"></a>appendFile &#x2F; appendFileSync 追加写入</h3><blockquote>
<p><code>appendFile</code> 作用是在文件尾部追加内容，<code>appendFile</code> 语法与 <code>writeFile</code> 语法完全相同</p>
</blockquote>
<p><strong>语法</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.appendFile(file, data[, options], callback)</span><br><span class="line">fs.appendFileSync(file, data[, options])</span><br></pre></td></tr></table></figure>

<p><strong>返回值</strong>：二者都为 <code>undefined</code></p>
<p>实例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fs.append(&#x27;./座右铭.txt&#x27;, &#x27;则其善者而从之，其不善者而改之。&#x27;, err =&gt;&#123;</span><br><span class="line">    if(err) throw err</span><br><span class="line">    console.log(&#x27;追加成功&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.appendFileSync(&#x27;./座右铭.txt&#x27;,&#x27;\r\n温故而知新，可以为师矣&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="createWriteStream-流式写入"><a href="#createWriteStream-流式写入" class="headerlink" title="createWriteStream 流式写入"></a>createWriteStream 流式写入</h3><p><strong>语法</strong>：<code>fs.createWriteStream(path[, options])</code></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>path</code> 文件路径</li>
<li><code>options</code> 选项配置（ <code>可选</code> ）</li>
</ul>
<p>**返回值: **<code>Object</code></p>
<p>代码示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let ws = fs.createWriteStream(&#x27;./观书有感.txt&#x27;)</span><br><span class="line"></span><br><span class="line">//写入数据到流</span><br><span class="line">ws.write(&#x27;半亩方塘一鉴开\r\n&#x27;)</span><br><span class="line">ws.write(&#x27;天光云影共徘徊\r\n&#x27;)</span><br><span class="line">ws.write(&#x27;问渠那得清如许\r\n&#x27;)</span><br><span class="line">ws.write(&#x27;为有源头活水来\r\n&#x27;)</span><br><span class="line"></span><br><span class="line">//关闭写入流，表明已没有数据要被写入可写流</span><br><span class="line">ws.end()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>程序打开一个文件是需要消耗资源的，流式写入可以减少打开关闭文件的次数。</p>
<p>流式写入方式适用于 大文件写入或者频繁写入的场景，<code>writeFile</code>适合于 写入频率较低的场景</p>
</blockquote>
<h3 id="写入文件的场景"><a href="#写入文件的场景" class="headerlink" title="写入文件的场景"></a>写入文件的场景</h3><p><code>文件写入</code> 在计算机中是一个非常常见的操作，下面的场景都用到了文件写入</p>
<ul>
<li>下载文件</li>
<li>安装软件</li>
<li>保存程序日志，如 Git</li>
<li>编辑器保存文件</li>
<li>视频录制</li>
</ul>
<blockquote>
<p>当 需要持久化保存数据 的时候，应该想到 <code>文件写入</code></p>
</blockquote>
<h2 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h2><blockquote>
<p>文件读取顾名思义，就是通过程序从文件中取出其中的数据，我们可以使用如下几种方式：</p>
</blockquote>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>readFile</td>
<td>异步读取</td>
</tr>
<tr>
<td>readFileSync</td>
<td>同步读取</td>
</tr>
<tr>
<td>createReadStream</td>
<td>流式读取</td>
</tr>
</tbody></table>
<h3 id="readFile-异步读取"><a href="#readFile-异步读取" class="headerlink" title="readFile 异步读取"></a>readFile 异步读取</h3><p><strong>语法</strong>: <code>fs.readFile(path[, options], callback)</code></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>path 文件路径</li>
<li>options 选项配置</li>
<li>callback 回调函数</li>
</ul>
<p><strong>返 回 值 ：</strong> <code>undefined</code></p>
<p>代码示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 导入 fs 模块</span><br><span class="line"></span><br><span class="line">fs.readFile(&#x27;./座右铭.txt&#x27;, (error,data) =&gt;&#123;</span><br><span class="line">    if(err) throw err</span><br><span class="line">    console.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.readFile(&#x27;./座右铭.txt&#x27;, &#x27;uft-8&#x27;, (error,data) =&gt;&#123;</span><br><span class="line">    if(err) throw err</span><br><span class="line">    console.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="readFileSync-同步读取"><a href="#readFileSync-同步读取" class="headerlink" title="readFileSync 同步读取"></a>readFileSync 同步读取</h3><p><strong>语法：</strong><code>fs.readFileSync(path[, options])</code></p>
<p><strong>参数说明：</strong></p>
<ul>
<li>path 文件路径</li>
<li>options 选项配置</li>
</ul>
<p><strong>返 回 值 ：</strong><code>string | Buffer</code></p>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="createReadStream-流式读取"><a href="#createReadStream-流式读取" class="headerlink" title="createReadStream 流式读取"></a>createReadStream 流式读取</h3><p><strong>语法：</strong><code>fs.createReadStream(path[, options])</code></p>
<p><strong>参数说明：</strong></p>
<ul>
<li>path 文件路径</li>
<li>options 选项配置（ <code>可选</code> ）</li>
</ul>
<p><strong>返回值：</strong><code>Object</code></p>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建读取流对象</span></span><br><span class="line"><span class="keyword">let</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;./观书有感.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每次取出 64k 数据后执行一次 data 回调</span></span><br><span class="line"><span class="comment">// 绑定一个 data 事件  chunk 块儿  大块儿</span></span><br><span class="line">re.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="params">chunk</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(chunk)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(chunk.<span class="property">length</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取完毕后，执行 end 回调 (可选事件)</span></span><br><span class="line">re.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取完毕&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="读取文件应用场景"><a href="#读取文件应用场景" class="headerlink" title="读取文件应用场景"></a>读取文件应用场景</h3><ul>
<li>电脑开机</li>
<li>程序运行</li>
<li>编辑器打开文件</li>
<li>查看图片</li>
<li>播放视频</li>
<li>播放音乐</li>
<li>Git 查看日志</li>
<li>上传文件</li>
<li>查看聊天记录</li>
</ul>
<h2 id="文件移动与重命名"><a href="#文件移动与重命名" class="headerlink" title="文件移动与重命名"></a>文件移动与重命名</h2><blockquote>
<p>在 Node.js 中，我们可以使用 <code>rename</code> 或 <code>renameSync</code> 来移动或重命名 <code>文件或文件夹</code></p>
</blockquote>
<p><strong>语法：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">rename</span>(oldPath, newPath, callback)</span><br><span class="line">fs.<span class="title function_">renameSync</span>(oldPath, newPath)</span><br></pre></td></tr></table></figure>

<p><strong>参数说明：</strong></p>
<ul>
<li>oldPath 文件当前的路径</li>
<li>newPath 文件新的路径</li>
<li>callback 操作后的回调</li>
</ul>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&#x27;./观书有感.txt&#x27;</span>, <span class="string">&#x27;./论语/观书有感.txt&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;移动完成&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">renameSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;./论语/.我的座右铭.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>注</strong>: 如果还是移动到当前路径，但是修改了名字，就是重命名了</p>
<h2 id="文件删除"><a href="#文件删除" class="headerlink" title="文件删除"></a>文件删除</h2><blockquote>
<p>在 Node.js 中，我们可以使用 <code>unlink</code> 或 <code>unlinkSync</code> 来删除文件</p>
</blockquote>
<p><strong>语法:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">unlink</span>(path, callback)</span><br><span class="line">fs.<span class="title function_">unlinkSync</span>(path)</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>path 文件路径</li>
<li>callback 操作后的回调</li>
</ul>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">unlink</span>(<span class="string">&#x27;./test.txt&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">unlinkSync</span>(<span class="string">&#x27;./test2.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用 rm 方法  14.4   同步 rmSync</span></span><br><span class="line">fs.<span class="title function_">rm</span>(<span class="string">&#x27;./论语.txt&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除失败&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="文件夹操作"><a href="#文件夹操作" class="headerlink" title="文件夹操作"></a>文件夹操作</h2><blockquote>
<p>借助 Node.js 的能力，我们可以对文件夹进行 <code>创建</code> 、<code>读取</code> 、<code>删除</code> 等操作</p>
</blockquote>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>mkdir &#x2F; mkdirSync</td>
<td>创建文件夹</td>
</tr>
<tr>
<td>readdir &#x2F; readdirSync</td>
<td>读取文件夹</td>
</tr>
<tr>
<td>rmdir &#x2F; rmdirSync</td>
<td>删除文件夹</td>
</tr>
</tbody></table>
<h3 id="mkdir-创建文件夹"><a href="#mkdir-创建文件夹" class="headerlink" title="mkdir 创建文件夹"></a>mkdir 创建文件夹</h3><blockquote>
<p>在 Node.js 中，我们可以使用 <code>mkdir</code> 或 <code>mkdirSync</code> 来创建文件夹</p>
</blockquote>
<p><strong>语法</strong>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">mkdir</span>(path[, options], callback)</span><br><span class="line">fs.<span class="title function_">mkdirSync</span>(path[, options])</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>path 文件夹路径</li>
<li>options 选项配置（ <code>可选</code> ）</li>
<li>callback 操作后的回调</li>
</ul>
<p>示例代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步创建文件夹  mk  make  制作   dir  directory  文件夹</span></span><br><span class="line">fs.<span class="title function_">mkdir</span>(<span class="string">&#x27;./page&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;创建成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归异步创建</span></span><br><span class="line">fs.<span class="title function_">mkdir</span>(<span class="string">&#x27;./1/2/3&#x27;</span>, &#123;<span class="attr">recursive</span>: <span class="literal">true</span>&#125;, <span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;递归创建成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归同步创建文件夹</span></span><br><span class="line">fs.<span class="title function_">mkdirSync</span>(<span class="string">&#x27;./x/y/z&#x27;</span>, &#123;<span class="attr">recursive</span>: <span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="readdir-读取文件夹"><a href="#readdir-读取文件夹" class="headerlink" title="readdir 读取文件夹"></a>readdir 读取文件夹</h3><blockquote>
<p>在 Node.js 中，我们可以使用 <code>readdir</code> 或 <code>readdirSync</code> 来读取文件夹</p>
</blockquote>
<p><strong>语法：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">readdir</span>(path[, options], callback)</span><br><span class="line">fs.<span class="title function_">readdirSync</span>(path[, options])</span><br></pre></td></tr></table></figure>

<p><strong>参数说明：</strong></p>
<ul>
<li>path 文件夹路径</li>
<li>options 选项配置（ <code>可选</code> ）</li>
<li>callback 操作后的回调</li>
</ul>
<p>示例代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步读取</span></span><br><span class="line">fs.<span class="title function_">readdir</span>(<span class="string">&#x27;./论语&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 同步读取 </span></span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readdirSync</span>(<span class="string">&#x27;./论语&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br></pre></td></tr></table></figure>

<h3 id="rmdir-删除文件夹"><a href="#rmdir-删除文件夹" class="headerlink" title="rmdir 删除文件夹"></a>rmdir 删除文件夹</h3><blockquote>
<p>在 Node.js 中，我们可以使用 <code>rmdir</code> 或 <code>rmdirSync</code> 来删除文件夹</p>
</blockquote>
<p><strong>语法</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">rmdir</span>(path[, options], callback)</span><br><span class="line">fs.<span class="title function_">redirSync</span>(path[, options])</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>path 文件夹路径</li>
<li>options 选项配置（ 可选 ）</li>
<li>callback 操作后的回调</li>
</ul>
<p>示例代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步删除文件夹  rm  remove 移除</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(<span class="string">&#x27;./page&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//异步递归删除文件夹  不推荐</span></span><br><span class="line"><span class="comment">//=&gt;DeprecationWarning: In future versions of Node.js, fs.rmdir(path, &#123; recursive: true &#125;) will be removed. Use fs.rm(path, &#123; recursive: true &#125;) instead</span></span><br><span class="line">fs.<span class="title function_">rmdirSync</span>(<span class="string">&#x27;./1&#x27;</span>, &#123;<span class="attr">recursive</span>: <span class="literal">true</span>&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123; </span><br><span class="line">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;递归删除&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//同步递归删除文件夹</span></span><br><span class="line">fs.<span class="title function_">rmdirSync</span>(<span class="string">&#x27;./x&#x27;</span>, &#123;<span class="attr">recursive</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 建议使用</span></span><br><span class="line">fs.<span class="title function_">rm</span>(<span class="string">&#x27;./a&#x27;</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="查看资源状态"><a href="#查看资源状态" class="headerlink" title="查看资源状态"></a>查看资源状态</h2><blockquote>
<p>在 Node.js 中，我们可以使用 <code>stat</code> 或 <code>statSync</code> 来查看资源的详细信息</p>
</blockquote>
<p><strong>语法</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">stat</span>(path[, options], callback)</span><br><span class="line">fs.<span class="title function_">statSync</span>(path[, options])</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>path 文件夹路径</li>
<li>options 选项配置（ 可选 ）</li>
<li>callback 操作后的回调</li>
</ul>
<p>示例代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步获取状态</span></span><br><span class="line"><span class="comment">// stat  方法  status 缩写 状态</span></span><br><span class="line">fs.<span class="title function_">stat</span>(<span class="string">&#x27;/data.txt&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 同步获取状态</span></span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">statSync</span>(<span class="string">&#x27;./data.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/3d5f0b54415a2949c04dcbc49a0452e7ec91899b.png" alt="image-20230321144242912"></p>
<p><strong>结果值对象结构</strong>：</p>
<ul>
<li>size 文件体积</li>
<li>birthtime 创建时间</li>
<li>mtime 最后修改时间</li>
<li>isFile 检测是否为文件</li>
<li>isDirectory 检测是否为文件夹</li>
<li>….</li>
</ul>
<h2 id="相对路径问题"><a href="#相对路径问题" class="headerlink" title="相对路径问题"></a>相对路径问题</h2><p>fs 模块对资源进行操作时，路径的写法有两种：</p>
<ul>
<li>相对路径<ul>
<li><code>./座右铭.txt</code> 当前目录下的 座右铭.txt</li>
<li><code>座右铭.txt</code> 等效于上面的写法</li>
<li><code>../座右铭.txt</code> 当前目录的上一级目录中的 座右铭.txt</li>
</ul>
</li>
<li>绝对路径<ul>
<li><code>D:/Program Files</code> windows 系统下的绝对路径</li>
<li><code>/user/bin</code> Linux 系统下的绝对路径</li>
</ul>
</li>
</ul>
<blockquote>
<p>相对路径中所谓的 <code>当前目录</code> ，指的是 <code>命名行的工作目录</code> ，而并非是文件的所在目录</p>
<p>所以当命名行的工作目录与文件所在目录不一致时，会出现一些 Bug</p>
</blockquote>
<h2 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a>__dirname</h2><p><code>__dirname</code> 与 <code>require</code> 类似，都是 Node.js 环境中的 ‘全局’ 变量</p>
<p><code>__dirname</code> 保存着 当前文件夹所在目录的绝对路径，可以使用 <code>__dirname</code> 与文件名拼接成绝对路径</p>
<p>代码示例:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;__dirname + &#x27;/data.txt&#x27;  === &#x27;D:\\Desktop\\Node\\code\\03-fs模块/data.txt&#x27;</span></span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/data.txt&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data) </span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用 fs 模块的时候，尽量使用 <code>__dirname</code> 路径转换为绝对路径，这样可以避免相对路径产生的 Bug</p>
</blockquote>
<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><h3 id="编写一个-JS-文件，实现复制文件的功能"><a href="#编写一个-JS-文件，实现复制文件的功能" class="headerlink" title="编写一个 JS 文件，实现复制文件的功能"></a>编写一个 JS 文件，实现复制文件的功能</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> *  需求:</span></span><br><span class="line"><span class="comment"> *    复制  资料文件夹下的  [笑看风云.mp4]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 导入 fs 模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">// 方式一  readFile</span></span><br><span class="line"><span class="comment">// 读取文件内容</span></span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./资料/笑看风云.mp4&#x27;</span>)</span><br><span class="line"><span class="comment">// 写入文件</span></span><br><span class="line">fs.<span class="title function_">writeFileSync</span>(<span class="string">&#x27;./资料/笑看风云2.mp4&#x27;</span>, data)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二 流式操作</span></span><br><span class="line"><span class="comment">// 创建读取流对象</span></span><br><span class="line"><span class="keyword">const</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;./资料/笑看风云.mp4&#x27;</span>)</span><br><span class="line"><span class="comment">// 创建一个写入流对象</span></span><br><span class="line"><span class="keyword">const</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;./资料/笑看风云3.mp4&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定data事件</span></span><br><span class="line"><span class="comment">// 理想状态下，读取 64k 就写入 64 k，这样消耗的内存最少，实际上读取的速度大于写入的速度</span></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="params">chunk</span> =&gt;</span> &#123;</span><br><span class="line">   ws.<span class="title function_">write</span>(chunk)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//  绑定data事件 ==== rs.pipe(ws)</span></span><br></pre></td></tr></table></figure>

<h3 id="文件重命名"><a href="#文件重命名" class="headerlink" title="文件重命名"></a>文件重命名</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入 fs 模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取 03-fs模块 文件夹</span></span><br><span class="line"><span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(<span class="string">&#x27;../03-fs模块&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历数组</span></span><br><span class="line">files.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 判断</span></span><br><span class="line">  <span class="keyword">let</span> [num, name] = item.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (num &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    num = <span class="string">&#x27;0&#x27;</span> + num</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 创建新的文件名</span></span><br><span class="line">  <span class="keyword">let</span> newName = num + <span class="string">&#x27;-&#x27;</span> + name</span><br><span class="line">  <span class="comment">// 重命名</span></span><br><span class="line">  fs.<span class="title function_">renameSync</span>(<span class="string">`../03-fs模块/<span class="subst">$&#123;item&#125;</span>`</span>, <span class="string">`../03-fs模块/<span class="subst">$&#123;newName&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>









<h4 id><a href="#" class="headerlink" title></a></h4><h3 id="-1"><a href="#-1" class="headerlink" title></a></h3><h4 id="-2"><a href="#-2" class="headerlink" title></a></h4><h3 id="案例：考试成绩整理"><a href="#案例：考试成绩整理" class="headerlink" title="案例：考试成绩整理"></a>案例：考试成绩整理</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/image-20240709194922754.png" alt="image-20240709194922754"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入fs模块</span></span><br><span class="line"><span class="keyword">const</span> &#123; log &#125; = <span class="built_in">require</span>(<span class="string">&#x27;console&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> oldArr = []</span><br><span class="line"><span class="keyword">let</span> newArr = []</span><br><span class="line"><span class="comment">//第一步获取数据并把数据整合成理想格式 K : V</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./成绩.txt&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>,<span class="keyword">function</span>(<span class="params">err,fileData</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件读取失败，原因是：&quot;</span>+err.<span class="property">message</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(fileData);</span><br><span class="line">    <span class="comment">//转换成字符串数组</span></span><br><span class="line">    oldArr = fileData.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="comment">//用foreach不用for因为for会把数据变成一列不好处理</span></span><br><span class="line">    oldArr.<span class="title function_">forEach</span>(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">     newArr.<span class="title function_">push</span>(element.<span class="title function_">replace</span>(<span class="string">&#x27;=&#x27;</span>,<span class="string">&#x27;：&#x27;</span>))</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//使用\r\n进行拼接</span></span><br><span class="line">    <span class="keyword">let</span> newStr = newArr.<span class="title function_">join</span>(<span class="string">&#x27;\r\n&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newStr);</span><br><span class="line">    <span class="comment">//第二步写入数据</span></span><br><span class="line">    fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;./处理后的成绩.txt&#x27;</span>,<span class="string">`<span class="subst">$&#123;newStr&#125;</span>`</span>,<span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入失败&#x27;</span>+err.<span class="property">message</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件写入成功&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>注意：<code>\r\n</code> 是回车（Carriage Return, <code>\r</code>）和换行（Line Feed, <code>\n</code>）的组合，常用于表示一行的结束并开始新的一行，尤其在Windows操作系统中的文本文件格式里广泛使用</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/image-20240709211908703.png" alt="image-20240709211908703"></p>
<h2 id="案例—时钟案例"><a href="#案例—时钟案例" class="headerlink" title="案例—时钟案例"></a>案例—时钟案例</h2><p>案例难点：匹配script标签和style标签的正则表达式不容易写出</p>
<p>案例步骤：</p>
<p>1.创建写入CSS文件的js文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入文件处理模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//导入路径处理模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取index文件</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./index.html&#x27;</span>),<span class="string">&#x27;utf-8&#x27;</span>,<span class="keyword">function</span>(<span class="params">err,dataStr</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息是&#x27;</span>+ err.<span class="property">message</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// console.log(dataStr);</span></span><br><span class="line">  <span class="keyword">let</span> newCSS =  dataStr.<span class="title function_">match</span>(<span class="regexp">/&lt;style&gt;[\s\S]*&lt;\/style&gt;/</span>)</span><br><span class="line">  <span class="comment">//拿着匹配的结果，写入到css文件中</span></span><br><span class="line">  fs.<span class="title function_">writeFile</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./css/new.css&#x27;</span>),<span class="string">`<span class="subst">$&#123;newCSS&#125;</span>`</span>,<span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件写入失败，原因是:&quot;</span>+err.<span class="property">message</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件写入成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>2.创建写入JS文件的JS文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入文件处理模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//导入路径处理模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取index文件</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./index.html&#x27;</span>),<span class="string">&#x27;utf-8&#x27;</span>,<span class="keyword">function</span>(<span class="params">err,dataStr</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息是&#x27;</span>+ err.<span class="property">message</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// console.log(dataStr);</span></span><br><span class="line">  <span class="keyword">let</span> newJS =  dataStr.<span class="title function_">match</span>(<span class="regexp">/&lt;script&gt;[\s\S]*&lt;\/script&gt;/</span>)</span><br><span class="line">  <span class="comment">//拿着匹配的结果，写入到css文件中</span></span><br><span class="line">  fs.<span class="title function_">writeFile</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./js/new.js&#x27;</span>),<span class="string">`<span class="subst">$&#123;newJS&#125;</span>`</span>,<span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件写入失败，原因是:&quot;</span>+err.<span class="property">message</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件写入成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>3.创建写入HTML文件的js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入文件处理模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//导入路径处理模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> regpStyle = <span class="regexp">/&lt;style&gt;[\s\S]*&lt;\/style&gt;/</span></span><br><span class="line"><span class="keyword">let</span> regpJS=<span class="regexp">/&lt;script&gt;[\s\S]*&lt;\/script&gt;/</span></span><br><span class="line"><span class="comment">//读取index文件</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./index.html&#x27;</span>),<span class="string">&#x27;utf-8&#x27;</span>,<span class="keyword">function</span>(<span class="params">err,dataStr</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误信息是&#x27;</span>+ err.<span class="property">message</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// console.log(dataStr);</span></span><br><span class="line">  <span class="keyword">let</span> newHTML =  dataStr.<span class="title function_">replace</span>(regpStyle,<span class="string">&#x27;&lt;link rel=&quot;stylesheet&quot; href=&quot;../css/new.css&quot;/&gt;&#x27;</span>)</span><br><span class="line">  .<span class="title function_">replace</span>(regpJS,<span class="string">&#x27;&lt;script src=&quot;../js/new.js&quot;&gt;&lt;/script&gt;&#x27;</span>)</span><br><span class="line">  <span class="comment">//拿着匹配的结果，写入到css文件中</span></span><br><span class="line">  fs.<span class="title function_">writeFile</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./新HTML文件/index.html&#x27;</span>),<span class="string">`<span class="subst">$&#123;newHTML&#125;</span>`</span>,<span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件写入失败，原因是:&quot;</span>+err.<span class="property">message</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件写入成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意：在新写入的HTML文件中，需要进行正则匹配然后替换，已外部文件的形式引入CSS和JS文件，注意路径</p>
<h1 id="path模块"><a href="#path模块" class="headerlink" title="path模块"></a>path模块</h1><blockquote>
<p><code>path</code> 模块提供了 <code>操作路径</code> 的功能，我们将介绍如下几个较为常用的几个 API：</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>API</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>path.resolve</td>
<td>拼接规范的绝对路径 <code>常用</code></td>
</tr>
<tr>
<td>path.sep</td>
<td>获取操作系统的路径分隔符</td>
</tr>
<tr>
<td>path.parse</td>
<td>解析路径并返回对象</td>
</tr>
<tr>
<td>path.basename</td>
<td>获取路径的基础名称</td>
</tr>
<tr>
<td>path.dirname</td>
<td>获取路径的目录名</td>
</tr>
<tr>
<td>path.extname</td>
<td>获得路径的扩展名</td>
</tr>
</tbody></table>
<p>代码示例：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 fs 模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">// 导入 path 模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写入文件</span></span><br><span class="line"><span class="comment">// fs.writeFileSync(__dirname + &#x27;/index.html&#x27;, &#x27;love&#x27;)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(__dirname + <span class="string">&#x27;/index.html&#x27;</span>) <span class="comment">//=&gt;D:\Desktop\Node\code\04-path/index.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// resolve 解决问题  拼接绝对路径</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./index.html&#x27;</span>)) <span class="comment">//=&gt;D:\Desktop\Node\code\04-path\index.html</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;index.html&#x27;</span>)) <span class="comment">//=&gt;D:\Desktop\Node\code\04-path\index.html</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;/index.html&#x27;</span>, <span class="string">&#x27;./test&#x27;</span>)) <span class="comment">//=&gt;D:\index.html\test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// sep 获取路径分隔符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="property">sep</span>) <span class="comment">//=&gt; window \  linux /</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// parse 方法  __filename  &#x27;全局变量&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(__filename) <span class="comment">//=&gt;文件的绝对路径 //=&gt;D:\Desktop\Node\code\04-path\01-path.js</span></span><br><span class="line"><span class="comment">// 解析路径</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;D:\\Desktop\\Node\\code\\04-path\\01-path.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">parse</span>(str))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径基础名称</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">basename</span>(pathname))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径的目录名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">dirname</span>(pathname))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径的拓展名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">extname</span>(pathname))</span><br></pre></td></tr></table></figure>

<h1 id="http模块"><a href="#http模块" class="headerlink" title="http模块"></a>http模块</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><blockquote>
<p>HTTP（hypertext transport protocol）协议；中文叫 <span style="color:red">超文本传输协议</span></p>
</blockquote>
<p>是一种基于TCP&#x2F;IP的应用层通信协议</p>
<p>这个协议详细规定了 <code>浏览器</code> 和 万维网 <code>服务器</code> 之间互相通信的规则</p>
<p>协议中主要规定了两个方面的内容:</p>
<ul>
<li><p>客户端：用来向服务器发送数据，可以被称之为 <span style="color:red">请求报文</span></p>
</li>
<li><p>服务端：向客户端返回数据，可以被称之为 <span style="color:red">响应报文</span></p>
</li>
</ul>
<blockquote>
<p>报文：可以简单理解为就是一堆字符串</p>
</blockquote>
<h2 id="请求报文的组成"><a href="#请求报文的组成" class="headerlink" title="请求报文的组成"></a>请求报文的组成</h2><ul>
<li>请求行</li>
<li>请求头</li>
<li>空行</li>
<li>请求体</li>
</ul>
<h2 id="HTTP-的请求行"><a href="#HTTP-的请求行" class="headerlink" title="HTTP 的请求行"></a><strong>HTTP</strong> 的请求行</h2><ul>
<li><p>请求方法（get、post、put、delete等）</p>
</li>
<li><p>请求 URL（统一资源定位器）</p>
<p>例如：<a target="_blank" rel="noopener" href="http://www.baidu.com/index.html?a=100&b=200#logo">http://www.baidu.com/index.html?a=100&amp;b=200#logo</a></p>
<ul>
<li>http:          协议 (https、ftp、ssh等)</li>
<li><a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a>  域名</li>
<li>80             端口号</li>
<li>&#x2F;index.html     路径</li>
<li>a&#x3D;100&amp;b&#x3D;200     查询字符串</li>
<li>#logo           哈希 (锚点链接)</li>
</ul>
</li>
<li><p>HTTP协议版本号</p>
</li>
</ul>
<h2 id="HTTP-请求头"><a href="#HTTP-请求头" class="headerlink" title="HTTP 请求头"></a>HTTP 请求头</h2><p>格式：『头名：头值』</p>
<p>常见的请求头有：</p>
<table>
<thead>
<tr>
<th>请求头</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>Host</td>
<td>主机名</td>
</tr>
<tr>
<td>Connection</td>
<td>连接的设置 keep-alive（保持连接）；close（关闭连接）</td>
</tr>
<tr>
<td>Cache-Control</td>
<td>缓存控制 max-age &#x3D; 0 （没有缓存）</td>
</tr>
<tr>
<td>Upgrade-Insecure-Requests</td>
<td>将网页中的http请求转化为 https 请求（很少用）老网站升级</td>
</tr>
<tr>
<td>User-Agent</td>
<td>用户代理，客户端字符串标识，服务器可以通过这个标识来识别这个请求来自哪个客户端 ，一般在PC端和手机端的区分</td>
</tr>
<tr>
<td>Accept</td>
<td>设置浏览器接收的数据类型</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>设置接收的压缩方式</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>设置接收的语言 q&#x3D;0.7 为喜好系数，满分为1</td>
</tr>
<tr>
<td>Cookie</td>
<td>后面单独讲</td>
</tr>
</tbody></table>
<h2 id="HTTP-的请求体"><a href="#HTTP-的请求体" class="headerlink" title="HTTP 的请求体"></a>HTTP 的请求体</h2><p>请求体内容的格式是非常灵活的，</p>
<p>（可以是空）&#x3D;&#x3D;&gt; GET请求，</p>
<p>（也可以是字符串，还可以是JSON）&#x3D;&#x3D;&#x3D;&gt; POST请求</p>
<p>例如：</p>
<ul>
<li><p>字符串：keywords&#x3D;手机&amp;price&#x3D;2000</p>
</li>
<li><p>JSON：{“keywords”:”手机”,”price”:2000}</p>
</li>
</ul>
<h2 id="响应报文的组成"><a href="#响应报文的组成" class="headerlink" title="响应报文的组成"></a>响应报文的组成</h2><ul>
<li><p>响应行:  <code>HTTP/1.1 200 OK</code></p>
<ul>
<li><p>HTTP&#x2F;1.1：HTTP协议版本号</p>
</li>
<li><p>200：响应状态码 404 Not Found 500 Internal Server Error</p>
<p>还有一些状态码，参考：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status</a></p>
<p>OK：响应状态描述</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>响应状态码 和 响应字符串 关系是 一一对应 的。</p>
</blockquote>
<ul>
<li><p>响应头</p>
<ul>
<li><code>Cache-Control</code>: 缓存控制 private 私有的，只允许客户端缓存数据</li>
<li><code>Connection</code>: 链接设置</li>
<li><code>Content-Type:text/html;charset=utf-8</code>: 设置响应体的数据类型以及字符集,响应体为html，字符集utf-8</li>
<li><code>Content-Length</code>: 响应体的长度，单位为字节</li>
</ul>
</li>
<li><p>空行 </p>
</li>
<li><p>响应体</p>
<p>响应体内容的类型是非常灵活的，常见的类型有 HTML、CSS、JS、图片、JSON</p>
</li>
</ul>
<h2 id="创建-HTTP-服务"><a href="#创建-HTTP-服务" class="headerlink" title="创建 HTTP 服务"></a>创建 <strong>HTTP</strong> 服务</h2><p>使用 nodejs 创建 HTTP 服务</p>
<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建服务对象 create 创建 server 服务</span></span><br><span class="line"><span class="comment">// request 意为请求. 是对请求报文的封装对象, 通过 request 对象可以获得请求报文的数据</span></span><br><span class="line"><span class="comment">// response 意为响应. 是对响应报文的封装对象, 通过 response 对象可以设置响应报文</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123; 		</span><br><span class="line">    <span class="comment">// 设置响应体</span></span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello HTTP server&#x27;</span>);</span><br><span class="line">&#125;);  <span class="comment">//=&gt;返回结果是一个对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 监听端口, 启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口 9000 监听中...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>http.createServer</code> 里的回调函数的执行时机： <span style="color:red">当接收到 HTTP 请求的时候，就会执行</span></p>
</blockquote>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>浏览器请求对应端口</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//127.0.0.1:9000</span></span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li><p>命令行 <code>ctrl + c</code> 停止服务</p>
</li>
<li><p>当服务启动后，更新代码 <span style="color:red">必须重启服务才能生效</span></p>
</li>
<li><p>响应内容中文乱码的解决办法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置响应头</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>,<span class="string">&#x27;text/html;charset=utf-8&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>端口号被占用</p>
<p><code>Error: listen EADDRINUSE: address already in use :::9000</code></p>
<p>1）关闭当前正在运行监听端口的服务 （ <span style="color:red">使用较多</span> ）</p>
<p>2）修改其他端口号</p>
</li>
<li><p><code>HTTP</code> 协议<span style="color:red">默认端口</span>是 <code>80</code> 。<code>HTTPS</code> 协议的<span style="color:red">默认端口</span>是 <code>443</code>, HTTP 服务开发常用端口有 <code>3000</code>，<code>8080</code>，<code>8090</code>，<code>9000</code> 等</p>
</li>
</ol>
<blockquote>
<p>如果端口被其他程序占用，可以使用 <span style="color:red">资源监视器</span> 找到占用端口的程序，然后使用 <span style="color:red">任务管理器</span> 关闭对应的程序</p>
</blockquote>
<h2 id="浏览器查看-HTTP-报文"><a href="#浏览器查看-HTTP-报文" class="headerlink" title="浏览器查看 HTTP 报文"></a>浏览器查看 HTTP 报文</h2><p>点击步骤</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/5e43303dea39359bd3514518f3d5517efac21bd2.jpg" alt="04_HTTP协议"></p>
<h3 id="查看请求行与请求头"><a href="#查看请求行与请求头" class="headerlink" title="查看请求行与请求头"></a>查看请求行与请求头</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/e5062ab2d8edc132beddd35d7cd40c83a8b81c87.jpg" alt="04_HTTP协议"></p>
<h3 id="查看请求体"><a href="#查看请求体" class="headerlink" title="查看请求体"></a>查看请求体</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/e421f0e1e84c5ec43bcc56f7856c1f7b623b69a5.jpg" alt="8-2"></p>
<h3 id="查看-URL-查询字符串"><a href="#查看-URL-查询字符串" class="headerlink" title="查看 URL 查询字符串"></a>查看 <strong>URL</strong> 查询字符串</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/9373dc9437fa52b90d195ed8d76f10e346c8e9e3.jpg" alt="8-3"></p>
<h3 id="查看响应行与响应头"><a href="#查看响应行与响应头" class="headerlink" title="查看响应行与响应头"></a>查看响应行与响应头</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/a553bc93e90d1721bfc27fc960edeeea2eb7ea90.jpg" alt="8-4"></p>
<h3 id="查看响应体"><a href="#查看响应体" class="headerlink" title="查看响应体"></a>查看响应体</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/a9440ee4a416d06a8f28be8f524c685ccac4c68d.jpg" alt="8-5"></p>
<h2 id="获取-HTTP-请求报文"><a href="#获取-HTTP-请求报文" class="headerlink" title="获取 HTTP 请求报文"></a>获取 HTTP 请求报文</h2><table>
<thead>
<tr>
<th align="left">含义</th>
<th align="left">语法</th>
<th align="left">重点掌握</th>
</tr>
</thead>
<tbody><tr>
<td align="left">请求方法</td>
<td align="left"><code>request.method</code></td>
<td align="left">*****</td>
</tr>
<tr>
<td align="left">请求版本</td>
<td align="left">request.httpVersion</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">请求路径</td>
<td align="left"><code>request.url</code></td>
<td align="left">*****</td>
</tr>
<tr>
<td align="left">URL 路径</td>
<td align="left"><code>require(&#39;url&#39;).parse(request.url).pathname</code></td>
<td align="left">*****</td>
</tr>
<tr>
<td align="left">URL 查询字符串</td>
<td align="left"><code>require(&#39;url&#39;).parse(request.url,  true).query</code></td>
<td align="left">*****</td>
</tr>
<tr>
<td align="left">请求头</td>
<td align="left"><code>request.headers</code></td>
<td align="left">*****</td>
</tr>
<tr>
<td align="left">请求体</td>
<td align="left">request.on(‘data’, function(chunk){})<br>request.on(‘end’, function(){})</td>
<td align="left"></td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 获取请求的方法</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">method</span>)  <span class="comment">//=&gt;GET</span></span><br><span class="line">  <span class="comment">// 获取请求的 url</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">url</span>)  <span class="comment">// 只包含 url 中的 路径 与查询字符串</span></span><br><span class="line">  <span class="comment">// 获取 http 协议的版本号</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">httpVersion</span>)  <span class="comment">//=&gt; 1.1</span></span><br><span class="line">  <span class="comment">// 获取 http 的请求头</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">headers</span>) <span class="comment">//=&gt;结果是一个对象</span></span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&#x27;http&#x27;</span>) <span class="comment">//=&gt;设置响应体</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 监听端口，启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>注意事项：</strong> </p>
<ol>
<li><code>request.url</code> 只能获取路径以及查询字符串，无法获取 URL 中的域名以及协议的内容</li>
<li><code>request.headers</code> 将请求信息转化成一个对象，并将属性名都转化成了『小写』</li>
<li>关于路径：如果访问网站的时候，只填写了 IP 地址或者是域名信息，此时请求的路径为『 <code>/</code> 』</li>
<li>关于 <code>favicon.ico</code>：这个请求是属于浏览器自动发送的请求</li>
</ol>
<p>提取 http 报文的请求体</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. 声明一个变量</span></span><br><span class="line">  <span class="keyword">let</span> body = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="comment">// 2. 绑定 data 事件</span></span><br><span class="line">  request.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="params">chunk</span> =&gt;</span> &#123;</span><br><span class="line">    body += chunk</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 3. 绑定 end 事件</span></span><br><span class="line">  request.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(body)  <span class="comment">//=&gt;&#x27;username=111&amp;password=111&#x27;</span></span><br><span class="line">    <span class="comment">// 响应</span></span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello Http&#x27;</span>) <span class="comment">//=&gt;设置响应体 </span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 监听端口，启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>提取 http 报文中 url的路径 与 查询字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="comment">// 1. 导入 url 模块</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 2. 解析 request.url</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">url</span>)   <span class="comment">//=&gt;/search?keyword=h5</span></span><br><span class="line">  <span class="comment">// 使用 parse 解析 request.url 的内容</span></span><br><span class="line">  <span class="comment">// true 将 query 属性将会设置为一个 对象</span></span><br><span class="line">  <span class="keyword">let</span> res = url.<span class="title function_">parse</span>(request.<span class="property">url</span>, <span class="literal">true</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)  <span class="comment">// 如下图所示，为一个对象</span></span><br><span class="line">  <span class="comment">// 路径</span></span><br><span class="line">  <span class="keyword">let</span> pathname = res.<span class="property">pathname</span></span><br><span class="line">  <span class="comment">// 查询字符串</span></span><br><span class="line">  <span class="keyword">let</span> keyword = res.<span class="property">query</span>.<span class="property">keyword</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(keyword)   <span class="comment">//=&gt;h5</span></span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口，启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/3960e1c84da383ba7dda53b627e1dc68384f2e49.png" alt="image-20230322162535711"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 实例化 url 对象</span></span><br><span class="line">  <span class="comment">// let url = new URL(&#x27;/search?a=100&amp;b=200&#x27;,&#x27;http://127.0.0.1:9000&#x27;)</span></span><br><span class="line">  <span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>, <span class="string">&#x27;http://127.0.0.1&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(url)  <span class="comment">//=&gt;如图所示，为一个对象</span></span><br><span class="line">  <span class="comment">// 输出路径</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(url.<span class="property">pathname</span>)  <span class="comment">//=&gt;/search</span></span><br><span class="line">  <span class="comment">// 输出 keyword 查询字符串</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(url.<span class="property">searchParams</span>.<span class="title function_">get</span>(<span class="string">&#x27;a&#x27;</span>))  <span class="comment">//=&gt; 100</span></span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&#x27;url new&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口，启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/67ddb914c3ae4e0444a8a1fdab0fa2b58d0e3065.png" alt="image-20230322162034273"></p>
<h3 id="练习-1"><a href="#练习-1" class="headerlink" title="练习"></a>练习</h3><p>按照以下要求搭建 HTTP 服务</p>
<table>
<thead>
<tr>
<th>请求类型**(<strong>方法</strong>)**</th>
<th>请求地址</th>
<th>响应体结果</th>
</tr>
</thead>
<tbody><tr>
<td>get</td>
<td>&#x2F;login</td>
<td>登录页面</td>
</tr>
<tr>
<td>get</td>
<td>&#x2F;reg</td>
<td>注册页面</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、引入http模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、建立服务</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123; </span><br><span class="line">    <span class="keyword">let</span> &#123;url, method&#125; = request; <span class="comment">//对象的解构赋值</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置响应头信息</span></span><br><span class="line">	<span class="comment">//解决中文乱码</span></span><br><span class="line">	response.<span class="title function_">setHeader</span>(<span class="string">&quot;Content-Type&quot;</span>,<span class="string">&quot;text/html;charset=utf-8&quot;</span>) </span><br><span class="line">    <span class="keyword">if</span>(url == <span class="string">&quot;/register&quot;</span> &amp;&amp; method == <span class="string">&quot;GET&quot;</span>)&#123;</span><br><span class="line">		response.<span class="title function_">end</span>(<span class="string">&quot;注册页面&quot;</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(url==<span class="string">&quot;/login&quot;</span> &amp;&amp; method == <span class="string">&quot;GET&quot;</span>)&#123;</span><br><span class="line">		response.<span class="title function_">end</span>(<span class="string">&quot;登录页面&quot;</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		response.<span class="title function_">end</span>(<span class="string">&quot;&lt;h1&gt;404 Not Found&lt;/h1&gt;&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、监听端口</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务启动中....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="设置-HTTP-响应报文"><a href="#设置-HTTP-响应报文" class="headerlink" title="设置 HTTP 响应报文"></a>设置 <strong>HTTP</strong> 响应报文</h2><table>
<thead>
<tr>
<th>作用</th>
<th>语法</th>
</tr>
</thead>
<tbody><tr>
<td>设置响应状态码</td>
<td>response.statusCode</td>
</tr>
<tr>
<td>设置响应状态描述</td>
<td>response.statusMessage （ 用的非常少 ）</td>
</tr>
<tr>
<td>设置响应头信息</td>
<td>response.setHeader(‘头名’, ‘头值’)  (<code>可以自定义</code>)</td>
</tr>
<tr>
<td>设置响应体</td>
<td>response.write(‘xx’)<br>response.end(‘xxx’)</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 设置响应状态码</span></span><br><span class="line">response.<span class="property">statusCode</span> = <span class="number">203</span></span><br><span class="line"><span class="comment">// 2. 响应状态的描述</span></span><br><span class="line">response.<span class="property">statusMessage</span> = <span class="string">&#x27;i love you&#x27;</span></span><br><span class="line"><span class="comment">// 3. 响应头</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line"><span class="comment">// 自定义响应头</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&#x27;myHeader&#x27;</span>, <span class="string">&#x27;test test&#x27;</span>)</span><br><span class="line"><span class="comment">// 设置多个同名的响应头</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&#x27;test&#x27;</span>, [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// write 和 end 的两种使用情况：</span></span><br><span class="line"><span class="comment">// 1. write 和 end 的结合使用 响应体相对分散</span></span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">end</span>(); <span class="comment">//每一个请求，在处理的时候必须要执行 end 方法的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 单独使用 end 方法 响应体相对集中</span></span><br><span class="line">response.<span class="title function_">end</span>(<span class="string">&#x27;xxx&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="练习-2"><a href="#练习-2" class="headerlink" title="练习"></a>练习</h3><p>搭建 HTTP 服务，响应一个 4 行 3 列的表格，并且要求表格有 <code>隔行换色效果</code> ，且 <code>点击</code> 单元格能 <code>高亮显示</code></p>
<p><strong>方法一</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">    &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">      &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;title&gt;Document&lt;/title&gt;</span></span><br><span class="line"><span class="string">      &lt;style&gt;</span></span><br><span class="line"><span class="string">        td &#123;</span></span><br><span class="line"><span class="string">          padding: 20px 40px;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        table tr:nth-child(odd) &#123;</span></span><br><span class="line"><span class="string">          background-color: #aef;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        table tr:nth-child(even) &#123;</span></span><br><span class="line"><span class="string">          background-color: #fcb;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        table,</span></span><br><span class="line"><span class="string">        td &#123;</span></span><br><span class="line"><span class="string">          border-collapse: collapse;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">      &lt;table border=&quot;1&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">      &lt;/table&gt;</span></span><br><span class="line"><span class="string">      &lt;script&gt;</span></span><br><span class="line"><span class="string">        const tds = document.querySelectorAll(&#x27;td&#x27;)</span></span><br><span class="line"><span class="string">        tds.forEach(item =&gt; &#123;</span></span><br><span class="line"><span class="string">          item.addEventListener(&#x27;click&#x27;, function () &#123;</span></span><br><span class="line"><span class="string">            this.style.backgroundColor = &#x27;#000&#x27;</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">      &lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口，启动服务器</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器已经启动...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>方法二</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">  <span class="comment">// 读取文件内容</span></span><br><span class="line">  <span class="keyword">let</span> html = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/table.html&#x27;</span>)</span><br><span class="line">  <span class="comment">// end 方法的参数可以是字符串也可以是Buffer</span></span><br><span class="line">  response.<span class="title function_">end</span>(html)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口，启动服务器</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器已经启动...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>table.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child</span>(odd) &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: <span class="number">#aef</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child</span>(even) &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: <span class="number">#fcb</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">table</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> tds = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;td&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    tds.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      item.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;#000&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="网页资源的基本加载过程"><a href="#网页资源的基本加载过程" class="headerlink" title="网页资源的基本加载过程"></a>网页资源的基本加载过程</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/929cb3e9fb5f89c7589ee9a7cd93e767ae1a1bc9.jpg" alt="04_HTTP协议"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/01b27104af8ecfe88afc6f70450cc04682d95f31.jpg" alt="2"></p>
<p>网页资源的加载都是循序渐进的，首先获取 HTML 的内容， 然后解析 HTML 在发送其他资源的请求，如 CSS，Javascript，图片等。<span style="color:red">理解了这个内容对于后续的学习与成长有非常大的帮助</span></p>
<h2 id="静态资源服务"><a href="#静态资源服务" class="headerlink" title="静态资源服务"></a>静态资源服务</h2><p><code>静态资源</code> 是指 <span style="color:red">内容长时间不发生改变的资源</span> ，例如图片，视频，CSS 文件，JS文件，HTML文件，字体文件等</p>
<p><code>动态资源</code> 是指 <span style="color:red">内容经常更新的资源</span> ，例如百度首页，网易首页，京东搜索列表页面等</p>
<h3 id="网站根目录或静态资源目录"><a href="#网站根目录或静态资源目录" class="headerlink" title="网站根目录或静态资源目录"></a>网站根目录或静态资源目录</h3><p>HTTP 服务在哪个文件夹中寻找静态资源，那个文件夹就是 <span style="color:red">静态资源目录</span> ，也称之为 <span style="color:red">网站根目录</span></p>
<blockquote>
<p>思考：vscode 中使用 live-server 访问 HTML 时， 它启动的服务中网站根目录是谁？</p>
<ul>
<li>改文件的所处的文件夹</li>
</ul>
</blockquote>
<h3 id="网页中的-URL"><a href="#网页中的-URL" class="headerlink" title="网页中的 URL"></a>网页中的 <strong>URL</strong></h3><p>网页中的 URL 主要分为两大类：<code>相对路径</code> 与 <code>绝对路径</code></p>
<h4 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h4><p>绝对路径可靠性强，而且相对容易理解，在项目中运用较多</p>
<table>
<thead>
<tr>
<th>形式</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="http://atguigu.com/web">http://atguigu.com/w eb</a></td>
<td>直接向目标资源发送请求，容易理解。网站的外链会用到此形式</td>
</tr>
<tr>
<td>&#x2F;&#x2F;atguigu.com&#x2F;web</td>
<td>与页面 URL 的协议拼接形成完整 URL 再发送请求。大型网站用的比较多</td>
</tr>
<tr>
<td>&#x2F;web</td>
<td>与页面 URL 的协议、主机名、端口拼接形成完整 URL 再发送请求。中小型网站</td>
</tr>
</tbody></table>
<h4 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h4><p>相对路径在发送请求时，需要与当前页面 URL 路径进行 <code>计算</code> ，得到完整 URL 后，再发送请求，学习阶段用的较多</p>
<p>例如当前网页 url 为 <a target="_blank" rel="noopener" href="http://www.atguigu.com/course/h5.html">http://www.atguigu.com/course/h5.html</a></p>
<table>
<thead>
<tr>
<th>形式</th>
<th>最终的 <strong>URL</strong></th>
</tr>
</thead>
<tbody><tr>
<td>.&#x2F;css&#x2F;app.css</td>
<td><a target="_blank" rel="noopener" href="http://www.atguigu.com/course/css/app.css">http://www.atguigu.com/course/css/app.css</a></td>
</tr>
<tr>
<td>js&#x2F;app.js</td>
<td><a target="_blank" rel="noopener" href="http://www.atguigu.com/course/js/app.js">http://www.atguigu.com/course/js/app.js</a></td>
</tr>
<tr>
<td>..&#x2F;img&#x2F;logo.png</td>
<td><a target="_blank" rel="noopener" href="http://www.atguigu.com/img/logo.png">http://www.atguigu.com/img/logo.png</a></td>
</tr>
<tr>
<td>..&#x2F;..&#x2F;mp4&#x2F;show.mp4</td>
<td><a target="_blank" rel="noopener" href="http://www.atguigu.com/mp4/show.mp4">http://www.atguigu.com/mp4/show.mp4</a></td>
</tr>
</tbody></table>
<h4 id="网页中使用-URL-的场景小结"><a href="#网页中使用-URL-的场景小结" class="headerlink" title="网页中使用 URL 的场景小结"></a>网页中使用 <strong>URL</strong> 的场景小结</h4><p>包括但不限于如下场景：</p>
<ul>
<li>a 标签 href</li>
<li>link 标签 href</li>
<li>script 标签 src </li>
<li>img 标签 src</li>
<li>video audio 标签 src</li>
<li>form 中的 action</li>
<li>AJAX 请求中的 URL</li>
</ul>
<h3 id="设置资源类型（mime类型）"><a href="#设置资源类型（mime类型）" class="headerlink" title="设置资源类型（mime类型）"></a>设置资源类型（<strong>mime</strong>类型）</h3><p><code>媒体类型</code>（通常称为 Multipurpose Internet Mail Extensions 或 MIME 类型 ）是一种标准，用来表示文档、文件或字节流的性质和格式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mime 类型结构： [type]/[subType]</span><br><span class="line"></span><br><span class="line">例如： text/html text/css image/jpeg image/png application/json</span><br></pre></td></tr></table></figure>

<p>HTTP 服务可以设置响应头 Content-Type 来表明响应体的 MIME 类型，浏览器会根据该类型决定如何处理资源</p>
<p>下面是常见文件对应的 mime 类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">html</span>: <span class="string">&#x27;text/html&#x27;</span>,</span><br><span class="line"><span class="attr">css</span>: <span class="string">&#x27;text/css&#x27;</span>,</span><br><span class="line"><span class="attr">js</span>: <span class="string">&#x27;text/javascript&#x27;</span>,</span><br><span class="line"><span class="attr">png</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line"><span class="attr">jpg</span>: <span class="string">&#x27;image/jpeg&#x27;</span>, </span><br><span class="line"><span class="attr">gif</span>: <span class="string">&#x27;image/gif&#x27;</span>,</span><br><span class="line"><span class="attr">mp4</span>: <span class="string">&#x27;video/mp4&#x27;</span>,</span><br><span class="line"><span class="attr">mp3</span>: <span class="string">&#x27;audio/mpeg&#x27;</span>,</span><br><span class="line"><span class="attr">json</span>: <span class="string">&#x27;application/json&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>对于未知的资源类型，可以选择 <code>application/octet-stream</code> 类型，浏览器在遇到该类型的响应时，会对响应体内容进行独立存储，也就是我们常见的 <code>下载</code> 效果</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>).<span class="title function_">createServer</span>(<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//获取请求的方法已经路径</span></span><br><span class="line">	<span class="keyword">let</span> &#123;url,method&#125; = request;</span><br><span class="line">	<span class="comment">//判断请求方式以及请求路径</span></span><br><span class="line">	<span class="keyword">if</span>(method == <span class="string">&quot;GET&quot;</span> &amp;&amp; url == <span class="string">&quot;/index.html&quot;</span>)&#123;</span><br><span class="line">		<span class="comment">//需要响应文件中的内容</span></span><br><span class="line">		<span class="keyword">let</span> data = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).<span class="title function_">readFileSync</span>( dirname + <span class="string">&#x27;/index.html&#x27;</span>);</span><br><span class="line">         response.<span class="title function_">end</span>(data);</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(method == <span class="string">&quot;GET&quot;</span> &amp;&amp; url == <span class="string">&quot;/css/app.css&quot;</span>)&#123;</span><br><span class="line">		<span class="comment">//需要响应文件中的内容</span></span><br><span class="line">		<span class="keyword">let</span> data = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).<span class="title function_">readFileSync</span>( dirname + <span class="string">&#x27;/public/css/app.css&#x27;</span>);</span><br><span class="line">		response.<span class="title function_">end</span>(data);</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(method == <span class="string">&quot;GET&quot;</span> &amp;&amp; url == <span class="string">&quot;/js/app.js&quot;</span>)&#123;</span><br><span class="line">		<span class="comment">//需要响应文件中的内容</span></span><br><span class="line">		<span class="keyword">let</span> data = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).<span class="title function_">readFileSync</span>( dirname + <span class="string">&#x27;/public/js/app.js&#x27;</span>);</span><br><span class="line">         response.<span class="title function_">end</span>(data);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="comment">//404响应</span></span><br><span class="line">         response.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">		response.<span class="title function_">end</span>(<span class="string">&quot;&lt;h1&gt;404 Not Found&lt;/h1&gt;&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">80</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;80端口正在启动中....&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>很明显上面的代码，当只要有一个请求路径就需要进行判断，显然这种方式不够完美，那么我们需要封装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>).<span class="title function_">createServer</span>(<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//获取请求的方法已经路径</span></span><br><span class="line">	<span class="keyword">let</span> &#123;url,method&#125; = request;</span><br><span class="line">	<span class="comment">//文件夹路径  根路径</span></span><br><span class="line">	<span class="keyword">let</span> rootDir = dirname + <span class="string">&#x27;/public&#x27;</span>;</span><br><span class="line">	<span class="comment">//拼接文件路径</span></span><br><span class="line">	<span class="keyword">let</span> filePath = rootDir + url;</span><br><span class="line">	<span class="comment">//读取文件内容</span></span><br><span class="line">    fs.<span class="title function_">readFile</span>(filePath,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">		<span class="comment">//判断</span></span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">			<span class="comment">//如果出现错误，响应404状态码</span></span><br><span class="line">            response.<span class="property">statusCode</span> = <span class="number">404</span>; </span><br><span class="line">            response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="comment">//响应文件内容</span></span><br><span class="line">            response.<span class="title function_">end</span>(data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">80</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;80端口正在启动中....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="GET-和-POST-请求场景小结"><a href="#GET-和-POST-请求场景小结" class="headerlink" title="GET 和 POST 请求场景小结"></a>GET <strong>和</strong> POST <strong>请求场景小结</strong></h3><p>GET 请求的情况：</p>
<ul>
<li>在地址栏直接输入 url 访问</li>
<li>点击 a 链接</li>
<li>link 标签引入 css</li>
<li>script 标签引入 js</li>
<li>img 标签引入图片</li>
<li>form 标签中的 method 为 get （不区分大小写）</li>
<li>ajax 中的 get 请求</li>
</ul>
<p>POST 请求的情况：</p>
<ul>
<li><p>form 标签中的 method 为 post（不区分大小写）</p>
</li>
<li><p>AJAX 的 post 请求</p>
</li>
</ul>
<h2 id="GET和POST请求的区别"><a href="#GET和POST请求的区别" class="headerlink" title="GET和POST请求的区别"></a><strong>GET</strong>和<strong>POST</strong>请求的区别</h2><p><code>GET</code> 和 <code>POST</code> 是 HTTP 协议请求的两种方式。</p>
<ul>
<li><code>GET</code> 主要用来获取数据，<code>POST</code> 主要用来提交数据</li>
<li><code>GET</code> 带参数请求是将参数缀到 URL 之后，在地址栏中输入 url 访问网站就是 GET 请求，<code>POST</code> 带参数请求是将参数放到请求体中</li>
<li><code>POST</code> 请求相对 <code>GET</code> 安全一些，因为在浏览器中参数会暴露在地址栏</li>
<li><code>GET</code> 请求大小有限制，一般为 2K，而 POST 请求则没有</li>
</ul>
<h1 id="3-Node模块化"><a href="#3-Node模块化" class="headerlink" title="3.Node模块化"></a>3.Node模块化</h1><h2 id="1-模块化的基本概念"><a href="#1-模块化的基本概念" class="headerlink" title="1.模块化的基本概念"></a>1.模块化的基本概念</h2><h3 id="1-1什么是模块化？"><a href="#1-1什么是模块化？" class="headerlink" title="1.1什么是模块化？"></a>1.1什么是模块化？</h3><p>遇到一个复杂问题时，自顶向下逐层把系统划分成若干模块的过程。模块是可组合、分解更换的单元</p>
<p>把代码进行模块化拆分的好处：</p>
<ul>
<li>提高了代码的复用性</li>
<li>提高了代码的可维护性</li>
<li>可以实现按需加载</li>
</ul>
<h3 id="1-2模块化规范"><a href="#1-2模块化规范" class="headerlink" title="1.2模块化规范"></a>1.2模块化规范</h3><p>就是一种规则，对代码进行模块化拆分与组合时，需要遵守的规则</p>
<h2 id="2-Node-js中的模块化"><a href="#2-Node-js中的模块化" class="headerlink" title="2.Node.js中的模块化"></a>2.Node.js中的模块化</h2><h3 id="2-1Node-js中模块的分类"><a href="#2-1Node-js中模块的分类" class="headerlink" title="2.1Node.js中模块的分类"></a>2.1Node.js中模块的分类</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/image-20240711141725508.png" alt="image-20240711141725508"></p>
<h3 id="2-2加载模块"><a href="#2-2加载模块" class="headerlink" title="2.2加载模块"></a>2.2加载模块</h3><p>基础语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//利用require方法</span></span><br><span class="line"><span class="comment">//加载内置模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//加载自定义模块</span></span><br><span class="line"><span class="keyword">const</span> custom = (<span class="string">&#x27;./custom.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//加载外置模块（该模块需下载后再使用）</span></span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>require在加载模块时，会执行被加载模块中的代码。</strong></p>
<h3 id="2-3模块的作用域"><a href="#2-3模块的作用域" class="headerlink" title="2.3模块的作用域"></a>2.3模块的作用域</h3><p>只能在导入的模块内部使用，但是当你通过导入的方式加入某模块时，被导入模块内定义的变量无法再当前导入模块内使用。</p>
<p>比如你在c1模块内导入c2模块，c2模块中的变量在c1中是无法访问的，但是c2可以访问自身的变量。</p>
<h3 id="2-4向外共享模块作用域中的成员"><a href="#2-4向外共享模块作用域中的成员" class="headerlink" title="2.4向外共享模块作用域中的成员"></a>2.4向外共享模块作用域中的成员</h3><p>在每个.js自定义模块中都有一个module对象，在这里面存储了和当前模块有关的信息。</p>
<p>利用里面的export属性来进行向外共享即可，下面介绍用法</p>
<p>基础语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    属性名：属性值，</span><br><span class="line">    ....：...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当我向M2中导入自定义(这里用M1解释)M1模块时，M2模块中得到的成员就是M1中module.exports所指向的对象。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/image-20240711143524990.png" alt="image-20240711143524990"></p>
<p>打印查看</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/image-20240711143544849.png" alt="image-20240711143544849"></p>
<h4 id="2-4-1共享成员的注意点"><a href="#2-4-1共享成员的注意点" class="headerlink" title="2.4.1共享成员的注意点"></a>2.4.1共享成员的注意点</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Node-js%E5%AD%A6%E4%B9%A0/image-20240711143751028.png" alt="image-20240711143751028"></p>
<h4 id="2-4-2exports对象"><a href="#2-4-2exports对象" class="headerlink" title="2.4.2exports对象"></a>2.4.2exports对象</h4><p>Node提供了一种简化的module.exports对象，<strong>exports</strong>对象。默认情况下，<strong>exports和module.exports指向同一个对象</strong>。</p>
<h4 id="2-4-3exports和module-exports的使用误区"><a href="#2-4-3exports和module-exports的使用误区" class="headerlink" title="2.4.3exports和module.exports的使用误区"></a>2.4.3exports和module.exports的使用误区</h4><ul>
<li>require()模块时，得到的永远是<strong>module.exports</strong>所指向的对象</li>
</ul>
<h3 id="2-5Node-js中的模块化规范"><a href="#2-5Node-js中的模块化规范" class="headerlink" title="2.5Node.js中的模块化规范"></a>2.5Node.js中的模块化规范</h3><p>CommonJS 规范是一种JavaScript模块化编程的标准，最初为服务器端JavaScript设计，被Node.js采纳并广泛应用。它的核心特点包括：</p>
<ol>
<li><strong>模块定义</strong>：在CommonJS中，每个<code>.js</code>文件被视为一个独立的模块。这意味着文件内部定义的变量、函数等都是模块私有的，不会污染全局作用域。</li>
<li><strong>模块导出</strong>：使用<code>module.exports</code>或<code>exports</code>来导出模块希望公开的接口。其他模块可以访问这些导出的接口来使用该模块的功能。<code>module.exports</code>是模块的默认导出对象，而<code>exports</code>是<code>module.exports</code>的一个引用，通常用于导出多个属性或方法。</li>
<li><strong>模块引入</strong>：通过<code>require</code>函数来引入其他模块。<code>require</code>函数接受一个模块标识符作为参数，用于加载并返回导出的模块接口。模块标识符可以是相对路径或绝对路径，也可以是核心模块名。</li>
<li><strong>加载机制</strong>：Node.js实现了懒加载（也称为延迟加载）策略，即只有当使用<code>require</code>函数时，模块才会被加载和执行。这样可以提高程序的运行效率，因为不立即加载所有模块，而是按需加载。</li>
<li><strong>缓存机制</strong>：Node.js对加载过的模块进行缓存，任何后续对该模块的<code>require</code>调用都会直接从缓存中获取模块，而不是重新加载，这进一步提升了程序性能。</li>
<li>当使用<code>require</code>函数加载模块时，获取到的是<code>module.exports</code>最终指向的那个对象，无论这个指向是否在过程中被改变过。简而言之，尽管<code>exports</code>常用于方便地添加模块接口，但真正对外暴露的是通过<code>module.exports</code>指定的内容。</li>
</ol>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">LiSir</div><div class="post-copyright__author_desc">心怀远方</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/07/09/Node-js%E5%AD%A6%E4%B9%A0/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/07/09/Node-js%E5%AD%A6%E4%B9%A0/')">Node.js学习</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/07/09/Node-js%E5%AD%A6%E4%B9%A0/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Node.js学习&amp;url=http://example.com/2024/07/09/Node-js%E5%AD%A6%E4%B9%A0/&amp;pic=/img/default_cover.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">LiSir</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/js-node-js/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>js-node.js<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/default_cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/08/Git%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Git的基本使用</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/11/npm%E4%B8%8E%E5%8C%85/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Node%E4%B8%8E%E7%BB%88%E7%AB%AF"><span class="toc-number">1.</span> <span class="toc-text">Node与终端</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Buffer%EF%BC%88%E7%BC%93%E5%86%B2%E5%99%A8%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">Buffer（缓冲器）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">2.2.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">2.3.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Buffer"><span class="toc-number">2.3.1.</span> <span class="toc-text">创建 Buffer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Buffer-%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%BD%AC%E5%8C%96"><span class="toc-number">2.3.2.</span> <span class="toc-text">Buffer 与字符串的转化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Buffer-%E7%9A%84%E8%AF%BB%E5%86%99"><span class="toc-number">2.3.3.</span> <span class="toc-text">Buffer 的读写</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#fs-%E6%A8%A1%E5%9D%97"><span class="toc-number">3.</span> <span class="toc-text">fs 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5"><span class="toc-number">3.1.</span> <span class="toc-text">文件写入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#writeFile-%E5%BC%82%E6%AD%A5%E5%86%99%E5%85%A5"><span class="toc-number">3.1.1.</span> <span class="toc-text">writeFile 异步写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#writeFileSync-%E5%90%8C%E6%AD%A5%E5%86%99%E5%85%A5"><span class="toc-number">3.1.2.</span> <span class="toc-text">writeFileSync 同步写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#appendFile-appendFileSync-%E8%BF%BD%E5%8A%A0%E5%86%99%E5%85%A5"><span class="toc-number">3.1.3.</span> <span class="toc-text">appendFile &#x2F; appendFileSync 追加写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#createWriteStream-%E6%B5%81%E5%BC%8F%E5%86%99%E5%85%A5"><span class="toc-number">3.1.4.</span> <span class="toc-text">createWriteStream 流式写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-number">3.1.5.</span> <span class="toc-text">写入文件的场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-number">3.2.</span> <span class="toc-text">文件读取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#readFile-%E5%BC%82%E6%AD%A5%E8%AF%BB%E5%8F%96"><span class="toc-number">3.2.1.</span> <span class="toc-text">readFile 异步读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#readFileSync-%E5%90%8C%E6%AD%A5%E8%AF%BB%E5%8F%96"><span class="toc-number">3.2.2.</span> <span class="toc-text">readFileSync 同步读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#createReadStream-%E6%B5%81%E5%BC%8F%E8%AF%BB%E5%8F%96"><span class="toc-number">3.2.3.</span> <span class="toc-text">createReadStream 流式读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.2.4.</span> <span class="toc-text">读取文件应用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%A7%BB%E5%8A%A8%E4%B8%8E%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">3.3.</span> <span class="toc-text">文件移动与重命名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="toc-number">3.4.</span> <span class="toc-text">文件删除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.</span> <span class="toc-text">文件夹操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mkdir-%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">3.5.1.</span> <span class="toc-text">mkdir 创建文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#readdir-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">3.5.2.</span> <span class="toc-text">readdir 读取文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rmdir-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">3.5.3.</span> <span class="toc-text">rmdir 删除文件夹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%B5%84%E6%BA%90%E7%8A%B6%E6%80%81"><span class="toc-number">3.6.</span> <span class="toc-text">查看资源状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">3.7.</span> <span class="toc-text">相对路径问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dirname"><span class="toc-number">3.8.</span> <span class="toc-text">__dirname</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">3.9.</span> <span class="toc-text">练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA-JS-%E6%96%87%E4%BB%B6%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">3.9.1.</span> <span class="toc-text">编写一个 JS 文件，实现复制文件的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">3.9.2.</span> <span class="toc-text">文件重命名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.9.2.1.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">3.9.3.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#-2"><span class="toc-number">3.9.3.1.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%80%83%E8%AF%95%E6%88%90%E7%BB%A9%E6%95%B4%E7%90%86"><span class="toc-number">3.9.4.</span> <span class="toc-text">案例：考试成绩整理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E2%80%94%E6%97%B6%E9%92%9F%E6%A1%88%E4%BE%8B"><span class="toc-number">3.10.</span> <span class="toc-text">案例—时钟案例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#path%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">path模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#http%E6%A8%A1%E5%9D%97"><span class="toc-number">5.</span> <span class="toc-text">http模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-1"><span class="toc-number">5.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">5.2.</span> <span class="toc-text">请求报文的组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E7%9A%84%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-number">5.3.</span> <span class="toc-text">HTTP 的请求行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">5.4.</span> <span class="toc-text">HTTP 请求头</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E7%9A%84%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-number">5.5.</span> <span class="toc-text">HTTP 的请求体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">5.6.</span> <span class="toc-text">响应报文的组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-HTTP-%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.7.</span> <span class="toc-text">创建 HTTP 服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4"><span class="toc-number">5.7.1.</span> <span class="toc-text">操作步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">5.7.2.</span> <span class="toc-text">测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">5.7.3.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E7%9C%8B-HTTP-%E6%8A%A5%E6%96%87"><span class="toc-number">5.8.</span> <span class="toc-text">浏览器查看 HTTP 报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%AF%B7%E6%B1%82%E8%A1%8C%E4%B8%8E%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">5.8.1.</span> <span class="toc-text">查看请求行与请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-number">5.8.2.</span> <span class="toc-text">查看请求体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B-URL-%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">5.8.3.</span> <span class="toc-text">查看 URL 查询字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E8%A1%8C%E4%B8%8E%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="toc-number">5.8.4.</span> <span class="toc-text">查看响应行与响应头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E4%BD%93"><span class="toc-number">5.8.5.</span> <span class="toc-text">查看响应体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96-HTTP-%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">5.9.</span> <span class="toc-text">获取 HTTP 请求报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-1"><span class="toc-number">5.9.1.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-HTTP-%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">5.10.</span> <span class="toc-text">设置 HTTP 响应报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-2"><span class="toc-number">5.10.1.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="toc-number">5.11.</span> <span class="toc-text">网页资源的基本加载过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.12.</span> <span class="toc-text">静态资源服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%88%96%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9B%AE%E5%BD%95"><span class="toc-number">5.12.1.</span> <span class="toc-text">网站根目录或静态资源目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E4%B8%AD%E7%9A%84-URL"><span class="toc-number">5.12.2.</span> <span class="toc-text">网页中的 URL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">5.12.2.1.</span> <span class="toc-text">绝对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">5.12.2.2.</span> <span class="toc-text">相对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E4%B8%AD%E4%BD%BF%E7%94%A8-URL-%E7%9A%84%E5%9C%BA%E6%99%AF%E5%B0%8F%E7%BB%93"><span class="toc-number">5.12.2.3.</span> <span class="toc-text">网页中使用 URL 的场景小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8B%EF%BC%88mime%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="toc-number">5.12.3.</span> <span class="toc-text">设置资源类型（mime类型）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GET-%E5%92%8C-POST-%E8%AF%B7%E6%B1%82%E5%9C%BA%E6%99%AF%E5%B0%8F%E7%BB%93"><span class="toc-number">5.12.4.</span> <span class="toc-text">GET 和 POST 请求场景小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GET%E5%92%8CPOST%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.13.</span> <span class="toc-text">GET和POST请求的区别</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Node%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">6.</span> <span class="toc-text">3.Node模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">6.1.</span> <span class="toc-text">1.模块化的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%9F"><span class="toc-number">6.1.1.</span> <span class="toc-text">1.1什么是模块化？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83"><span class="toc-number">6.1.2.</span> <span class="toc-text">1.2模块化规范</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Node-js%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">6.2.</span> <span class="toc-text">2.Node.js中的模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1Node-js%E4%B8%AD%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">6.2.1.</span> <span class="toc-text">2.1Node.js中模块的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97"><span class="toc-number">6.2.2.</span> <span class="toc-text">2.2加载模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">6.2.3.</span> <span class="toc-text">2.3模块的作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E5%90%91%E5%A4%96%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98"><span class="toc-number">6.2.4.</span> <span class="toc-text">2.4向外共享模块作用域中的成员</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1%E5%85%B1%E4%BA%AB%E6%88%90%E5%91%98%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">6.2.4.1.</span> <span class="toc-text">2.4.1共享成员的注意点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2exports%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.2.4.2.</span> <span class="toc-text">2.4.2exports对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3exports%E5%92%8Cmodule-exports%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AF%AF%E5%8C%BA"><span class="toc-number">6.2.4.3.</span> <span class="toc-text">2.4.3exports和module.exports的使用误区</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5Node-js%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83"><span class="toc-number">6.2.5.</span> <span class="toc-text">2.5Node.js中的模块化规范</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/15/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="数据结构">数据结构</a><time datetime="2024-09-15T03:57:19.000Z" title="发表于 2024-09-15 11:57:19">2024-09-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/12/%E7%AE%97%E6%B3%95%E8%B7%9F%E5%AD%A6/" title="算法跟学">算法跟学</a><time datetime="2024-09-12T13:58:11.000Z" title="发表于 2024-09-12 21:58:11">2024-09-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/04/%E9%A1%B9%E7%9B%AEAI%E7%BB%98%E7%94%BB%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/" title="项目AI绘画开发总结">项目AI绘画开发总结</a><time datetime="2024-09-04T00:25:48.000Z" title="发表于 2024-09-04 08:25:48">2024-09-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/02/TypeScript/" title="TypeScript">TypeScript</a><time datetime="2024-09-02T01:29:05.000Z" title="发表于 2024-09-02 09:29:05">2024-09-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/09/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/" title="移动端开发+less+BSP">移动端开发+less+BSP</a><time datetime="2024-08-09T10:44:43.000Z" title="发表于 2024-08-09 18:44:43">2024-08-09</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="LiSir" target="_blank">LiSir</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">2</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://newerproduct.github.io/" title="我的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.jpg" alt="我的博客"/><span class="back-menu-item-text">我的博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="鱼图床"/><span class="back-menu-item-text">鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HTML-CSS/" style="font-size: 0.88rem;">HTML,CSS<sup>1</sup></a><a href="/tags/JS/" style="font-size: 0.88rem;">JS<sup>1</sup></a><a href="/tags/JavaWeb/" style="font-size: 0.88rem;">JavaWeb<sup>1</sup></a><a href="/tags/Java%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">Java学习<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 0.88rem;">TypeScript<sup>1</sup></a><a href="/tags/git%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">git学习<sup>1</sup></a><a href="/tags/jQuery/" style="font-size: 0.88rem;">jQuery<sup>1</sup></a><a href="/tags/java%E5%92%8Cvue%E5%BC%80%E5%8F%91%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%94%99%E8%AF%AF%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E6%94%B9%E6%AD%A3%E5%92%8C%E5%AF%B9%E4%BB%96%E4%BB%AC%E7%9A%84%E7%90%86%E8%A7%A3%E6%95%B4%E7%90%86-%E5%8F%82%E5%8A%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/" style="font-size: 0.88rem;">java和vue开发中遇到的错误以及如何改正和对他们的理解整理(参加的项目)<sup>1</sup></a><a href="/tags/js-node-js/" style="font-size: 0.88rem;">js-node.js<sup>1</sup></a><a href="/tags/jwt-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-cookie/" style="font-size: 0.88rem;">jwt,身份认证,cookie<sup>1</sup></a><a href="/tags/nginx%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">nginx学习<sup>1</sup></a><a href="/tags/uni-app%E6%A1%86%E6%9E%B6/" style="font-size: 0.88rem;">uni-app框架<sup>1</sup></a><a href="/tags/vue-js/" style="font-size: 0.88rem;">vue.js<sup>1</sup></a><a href="/tags/vue-js%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">vue.js前置知识<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF-web-%E6%A1%86%E6%9E%B6/" style="font-size: 0.88rem;">前端,web,框架<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/" style="font-size: 0.88rem;">开发总结<sup>1</sup></a><a href="/tags/%E6%89%8B%E6%9C%BA%EF%BC%8C%E7%A7%BB%E5%8A%A8%E7%AB%AF%EF%BC%8Cless/" style="font-size: 0.88rem;">手机，移动端，less<sup>1</sup></a><a href="/tags/%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%EF%BC%8C%E6%A8%A1%E5%9D%97/" style="font-size: 0.88rem;">打包工具，模块<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">数据结构<sup>1</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-vue2-js/" style="font-size: 0.88rem;">状态管理工具(vue2.js)<sup>1</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-vue3-js/" style="font-size: 0.88rem;">状态管理工具(vue3.js)<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 LiSir 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>